(function(GLOBAL,jQuery,undefined,define){if(GLOBAL["wr"]){return};(function(b){function h(k){k.each(function(){var k=n(this);if(k){var r=b(this),g=m.call(r);b.each(d(k),function(a,e){(!g||!g.hasOwnProperty(a))&&m.call(r,a,e)});b(k).remove()}})}function i(d){d.each(function(){var d=n(this);d&&b(d).remove()})}function n(b){return(b=b.nextSibling)&&8===b.nodeType&&0===(""+b.nodeValue).indexOf("[data]")?b:null}function d(d){d=d.nodeValue;return 0===d.indexOf("[data]")?(d=d.substring(6).replace(/^\s+|\s+$/g,""),b.parseJSON(d)):{}}var m=b.fn.data,k=b.fn.removeData;b.fn.data=
function(){h(this);return m.apply(this,arguments)};b.fn.removeData=function(){0<arguments.length?h(this):i(this);return k.apply(this,arguments)}})(jQuery);(function(b){var h={maximize:!1,minimize:!1,dblclick:!1,titlebar:!1,icons:{maximize:"ui-icon-extlink",minimize:"ui-icon-minus",restore:"ui-icon-newwin"},events:{load:null,beforeCollapse:null,beforeMaximize:null,beforeMinimize:null,beforeRestore:null,collapse:null,maximize:null,minimize:null,restore:null}},i,n={init:function(d){b(this).dialog||b.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted");d=d||{};d.icons=d.icons||{};d.events=d.events||{};i=b.extend({},h,d);i.icons=
b.extend({},h.icons,d.icons);i.events=b.extend({},h.events,d.events);b(this).each(function(){b(this).data("dialog-state","normal").dialogExtend("_verifySettings").dialogExtend("_initEvents").dialogExtend("_initStyles").dialogExtend("_initButtons").dialogExtend("_initTitleBar").dialogExtend("_trigger","load")});return this},collapse:function(){var d=b(this).dialog("widget").find(".ui-dialog-titlebar").height()+15;b(this).dialogExtend("_trigger","beforeCollapse").dialogExtend("_saveSnapshot").data("dialog-state",
"collapsed").dialog("option",{height:d,maxHeight:d}).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content").dialogExtend("_trigger","collapse");return this},maximize:function(){var d=b(window).height()-11,m=b(window).width()-11;b(this).dialogExtend("_trigger","beforeMaximize").dialogExtend("_saveSnapshot").data("dialog-state","maximized").dialogExtend("_toggleButtons").dialog("widget").css("position",
"fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:d,width:m,position:[1,1]}).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end().find(".ui-dialog-content").dialogExtend("_trigger","maximize");return this},minimize:function(){var d=b(this).dialog("widget").find(".ui-dialog-titlebar").height()+15;b("#minimized-dialog-container").length||
b("<div />").attr("id","#minimized-dialog-container".replace("#","")).css({left:1,bottom:1,position:"fixed"}).appendTo("body");b(this).dialogExtend("_trigger","beforeMinimize").dialogExtend("_saveSnapshot").data("dialog-state","minimized").dialogExtend("_toggleButtons").dialog("widget").css({"float":"left",margin:1,position:"static"}).appendTo("#minimized-dialog-container").find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:d,width:200}).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space",
"nowrap").end().find(".ui-dialog-content").dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end().find(".ui-dialog-content").dialogExtend("_trigger","minimize");return this},restore:function(){var d=b(this).data("dialog-state");b(this).dialogExtend("_trigger","beforeRestore").data("dialog-state","normal").dialogExtend("_toggleButtons").dialogExtend("maximized"==d?"_restoreFromMaximized":"minimized"==d?"_restoreFromMinimized":"collapsed"==
d?"_restoreFromCollapsed":b.error("jQuery.dialogExtend Error : Cannot restore dialog from unknown state '"+d+"'")).dialogExtend("_trigger","restore");return this},_initButtons:function(){var d=this,m=b(d).dialog("widget").find(".ui-dialog-titlebar");b(m).append('<a class="ui-dialog-titlebar-maximize ui-corner-all" href="#"><span class="ui-icon '+i.icons.maximize+'">maximize</span></a>').append('<a class="ui-dialog-titlebar-minimize ui-corner-all" href="#"><span class="ui-icon '+i.icons.minimize+'">minimize</span></a>').append('<a class="ui-dialog-titlebar-restore ui-corner-all" href="#"><span class="ui-icon '+
i.icons.restore+'">restore</span></a>').find(".ui-dialog-titlebar-maximize,.ui-dialog-titlebar-minimize,.ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){b(this).addClass("ui-state-hover")}).mouseout(function(){b(this).removeClass("ui-state-hover")}).focus(function(){b(this).addClass("ui-state-focus")}).blur(function(){b(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-maximize").toggle(i.maximize).css({right:i.maximize?"1.4em":"-9999em"}).click(function(k){k.preventDefault();
b(d).dialogExtend("maximize")}).end().find(".ui-dialog-titlebar-minimize").toggle(i.minimize).css({right:i.maximize?"2.5em":i.minimize?"1.4em":"-9999em"}).click(function(k){k.preventDefault();b(d).dialogExtend("minimize")}).end().find(".ui-dialog-titlebar-restore").hide().css({right:"-9999em"}).click(function(k){k.preventDefault();b(d).dialogExtend("restore")}).end().dblclick(function(){i.dblclick&&i.dblclick.length&&b(d).dialogExtend("normal"!=b(d).data("dialog-state")?"restore":i.dblclick)}).each(function(){b(this).select(function(){return!1})});
return d},_initEvents:function(){var d=this;b.each(i.events,function(m){b.isFunction(i.events[m])&&b(d).bind(m+".dialogExtend",i.events[m])});return d},_initStyles:function(){var d;b('<style type="text/css">.ui-dialog .ui-dialog-titlebar-maximize,.ui-dialog .ui-dialog-titlebar-minimize,.ui-dialog .ui-dialog-titlebar-restore { position: absolute; top: 50%; width: 19px; margin: -10px 0 0 0; padding: 1px; height: 18px; }.ui-dialog .ui-dialog-titlebar-maximize span,.ui-dialog .ui-dialog-titlebar-minimize span,.ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }.ui-dialog .ui-dialog-titlebar-maximize:hover,.ui-dialog .ui-dialog-titlebar-maximize:focus,.ui-dialog .ui-dialog-titlebar-minimize:hover,.ui-dialog .ui-dialog-titlebar-minimize:focus,.ui-dialog .ui-dialog-titlebar-restore:hover,.ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }.ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }</style>').appendTo("body");
return this},_initTitleBar:function(){switch(i.titlebar){case !1:break;case "none":if(b(this).dialog("option","draggable")){var d=b("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5);b(this).dialog("widget").prepend(d).draggable("option","handle",d)}b(this).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("\ufffd").end().css({"background-color":"transparent","background-image":"none",border:0,position:"absolute",right:0,top:0,"z-index":9999}).end();
break;case "transparent":b(this).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none",border:0});break;default:b.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+i.titlebar+"'")}return this},_loadSnapshot:function(){return{config:{resizable:b(this).data("original-config-resizable"),draggable:b(this).data("original-config-draggable")},size:{height:b(this).data("original-size-height"),width:b(this).data("original-size-width"),maxHeight:b(this).data("original-size-maxHeight")},
position:{mode:b(this).data("original-position-mode"),left:b(this).data("original-position-left"),top:b(this).data("original-position-top")},titlebar:{wrap:b(this).data("original-titlebar-wrap")}}},_restoreFromCollapsed:function(){var d=b(this).dialogExtend("_loadSnapshot");b(this).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",d.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{height:d.size.height,maxHeight:d.size.maxHeight});
return this},_restoreFromMaximized:function(){var d=b(this).dialogExtend("_loadSnapshot");b(this).dialog("widget").css("position",d.position.mode).find(".ui-dialog-titlebar").css("white-space",d.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:d.config.resizable,draggable:d.config.draggable,height:d.size.height,width:d.size.width,maxHeight:d.size.maxHeight,position:[d.position.left,d.position.top]}).dialog("widget").draggable("option","handle",b(this).find(".ui-dialog-draggable-handle")).find(".ui-dialog-draggable-handle").css("cursor",
"move");return this},_restoreFromMinimized:function(){var d=b(this).dialogExtend("_loadSnapshot");b(this).dialog("widget").appendTo("body").css({"float":"none",margin:0,position:d.position.mode}).find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",d.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:d.config.resizable,draggable:d.config.draggable,height:d.size.height,width:d.size.width,
maxHeight:d.size.maxHeight,position:[d.position.left,d.position.top]}).dialog("widget").draggable("option","handle",b(this).find(".ui-dialog-draggable-handle")).find(".ui-dialog-draggable-handle").css("cursor","move");return this},_saveSnapshot:function(){"normal"==b(this).data("dialog-state")&&b(this).data("original-config-resizable",b(this).dialog("option","resizable")).data("original-config-draggable",b(this).dialog("option","draggable")).data("original-size-height",b(this).dialog("widget").height()).data("original-size-width",
b(this).dialog("option","width")).data("original-size-maxHeight",b(this).dialog("option","maxHeight")).data("original-position-mode",b(this).dialog("widget").css("position")).data("original-position-left",b(this).dialog("widget").offset().left).data("original-position-top",b(this).dialog("widget").offset().top).data("original-titlebar-wrap",b(this).dialog("widget").find(".ui-dialog-titlebar").css("white-space"));return this},_toggleButtons:function(){b(this).dialog("widget").find(".ui-dialog-titlebar-maximize").toggle("maximized"!=
b(this).data("dialog-state")&&i.maximize).end().find(".ui-dialog-titlebar-minimize").toggle("minimized"!=b(this).data("dialog-state")&&i.minimize).end().find(".ui-dialog-titlebar-restore").toggle("normal"!=b(this).data("dialog-state")&&(i.maximize||i.minimize)).css({right:"maximized"==b(this).data("dialog-state")?"1.4em":"minimized"==b(this).data("dialog-state")?!i.maximize?"1.4em":"2.5em":"-9999em"}).end();return this},_trigger:function(d){b(this).triggerHandler(d+".dialogExtend",this);return this},
_verifySettings:function(){if(i.dblclick&&"maximize"!=i.dblclick&&"minimize"!=i.dblclick&&"collapse"!=i.dblclick)b.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+i.dblclick+"'"),i.dblclick=!1;if(i.titlebar&&"none"!=i.titlebar&&"transparent"!=i.titlebar)b.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+i.titlebar+"'"),i.titlebar=!1;return this}};b.fn.dialogExtend=function(d){if(n[d])return n[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof d||
!d)return n.init.apply(this,arguments);b.error("jQuery.dialogExtend Error : Method <"+d+"> does not exist")}})(jQuery);(function(b,h){function i(c){return"string"===typeof c}function n(c){var a=q.call(arguments,1);return function(){return c.apply(this,a.concat(q.call(arguments)))}}function d(a,l,d,j,k){var m;j!==r?(l=d.match(a?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),d=l[3]||"",2===k&&i(j)?j=j.replace(a?x:A,""):(m=e(l[2]),j=i(j)?e[a?v:y](j):j,j=2===k?j:1===k?b.extend({},j,m):b.extend({},m,j),j=g(j),a&&(j=j.replace(B,o))),a=l[1]+(a?"#":j||!l[1]?"?":"")+j+d):a=l(d!==r?d:h[c][t]);return a}function m(a,c,l){c===
r||"boolean"===typeof c?(l=c,c=g[a?v:y]()):c=i(c)?c.replace(a?x:A,""):c;return e(c,l)}function k(c,a,l,e){!i(l)&&"object"!==typeof l&&(e=l,l=a,a=r);return this.each(function(){var j=b(this),d=a||z()[(this.nodeName||"").toLowerCase()]||"",k=d&&j.attr(d)||"";j.attr(d,g[c](k,l,e))})}var r,q=Array.prototype.slice,o=decodeURIComponent,g=b.param,a,e,j,p=b.bbq=b.bbq||{},s,C,z,F=b.event.special,y="querystring",v="fragment",c="location",t="href",A=/^.*\?|#.*$/g,x=/^.*\#/,B,l={};g[y]=n(d,0,function(c){return c.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,
"$1")});g[v]=a=n(d,1,function(c){return c.replace(/^[^#]*#?(.*)$/,"$1")});a.noEscape=function(c){c=b.map((c||"").split(""),encodeURIComponent);B=RegExp(c.join("|"),"g")};a.noEscape(",/");b.deparam=e=function(c,a){var l={},e={"true":!0,"false":!1,"null":null};b.each(c.replace(/\+/g," ").split("&"),function(c,u){var E;var j=u.split("="),d=o(j[0]),f=l,G=0,w=d.split("]["),D=w.length-1;/\[/.test(w[0])&&/\]$/.test(w[D])?(w[D]=w[D].replace(/\]$/,""),w=w.shift().split("[").concat(w),D=w.length-1):D=0;if(2===
j.length)if(j=o(j[1]),a&&(j=j&&!isNaN(j)?+j:"undefined"===j?r:e[j]!==r?e[j]:j),D)for(;G<=D;G++)d=""===w[G]?f.length:w[G],E=f[d]=G<D?f[d]||(w[G+1]&&isNaN(w[G+1])?{}:[]):j,f=E;else b.isArray(l[d])?l[d].push(j):l[d]=l[d]!==r?[l[d],j]:j;else d&&(l[d]=a?r:"")});return l};e[y]=n(m,0);e[v]=j=n(m,1);b.elemUrlAttr||(b.elemUrlAttr=function(c){return b.extend(l,c)})({a:t,base:t,iframe:"src",img:"src",input:"src",form:"action",link:t,script:"src"});z=b.elemUrlAttr;b.fn[y]=n(k,y);b.fn[v]=n(k,v);p.pushState=s=
function(l,e){i(l)&&/^#/.test(l)&&e===r&&(e=2);var b=l!==r,b=a(h[c][t],b?l:{},b?e:2);h[c][t]=b+(/#/.test(b)?"":"#")};p.getState=C=function(c,a){return c===r||"boolean"===typeof c?j(c):j(a)[c]};p.removeState=function(c){var a={};c!==r&&(a=C(),b.each(b.isArray(c)?c:arguments,function(c,l){delete a[l]}));s(a,2)};F.hashchange=b.extend(F.hashchange,{add:function(c){function l(c){var b=c[v]=a();c.getState=function(c,a){return c===r||"boolean"===typeof c?e(b,c):e(b,a)[c]};j.apply(this,arguments)}var j;if(b.isFunction(c))return j=
c,l;j=c.handler;c.handler=l}})})(jQuery,this);
(function(b,h,i){function n(a){a=a||h[k][r];return a.replace(/^[^#]*#?(.*)$/,"$1")}var d,m=b.event.special,k="location",r="href",q=document.documentMode,o=b.browser.msie&&(q===i||8>q),g="onhashchange"in h&&!o;b.hashchangeDelay=100;m.hashchange=b.extend(m.hashchange,{setup:function(){if(g)return!1;b(d.start)},teardown:function(){if(g)return!1;b(d.stop)}});d=function(){function a(){g=m=function(a){return a};if(o)d=b('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,m=function(){return n(d.document[k][r])},
g=function(a,e){if(a!==e){var b=d.document;b.open().close();b[k].hash="#"+a}},g(n())}var e={},j,d,g,m;e.start=function(){if(!j){var e=n();g||a();(function y(){var a=n(),c=m(e);a!==e?(g(e=a,c),b(h).trigger("hashchange")):c!==e&&(h[k][r]=h[k][r].replace(/#.*/,"")+"#"+c);j=setTimeout(y,b.hashchangeDelay)})()}};e.stop=function(){d||(j&&clearTimeout(j),j=0)};return e}()})(jQuery,this);(function(b,h,i){function n(b){return b}function d(b){b=decodeURIComponent(b.replace(m," "));0===b.indexOf('"')&&(b=b.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));return b}var m=/\+/g,k=b.cookie=function(m,q,o){if(q!==i){o=b.extend({},k.defaults,o);if(null===q)o.expires=-1;if("number"===typeof o.expires){var g=o.expires,a=o.expires=new Date;a.setDate(a.getDate()+g)}q=k.json?JSON.stringify(q):""+q;return h.cookie=[encodeURIComponent(m),"=",k.raw?q:encodeURIComponent(q),o.expires?"; expires="+
o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}for(var q=k.raw?n:d,o=h.cookie.split("; "),g=m?null:{},a=0,e=o.length;a<e;a++){var j=o[a].split("="),p=q(j.shift()),j=q(j.join("="));if(m&&m===p){g=k.json?JSON.parse(j):j;break}m||(g[p]=k.json?JSON.parse(j):j)}return g};k.defaults={};b.removeCookie=function(d,k){return null!==b.cookie(d)?(b.cookie(d,null,k),!0):!1}})(jQuery,document);var jsDump;
(function(){function b(b){return'"'+b.toString().replace(/"/g,'\\"')+'"'}function h(b){return b+""}function i(b,d,i){var h=jsDump.separator(),o=jsDump.indent();inner=jsDump.indent(1);d.join&&(d=d.join(","+h+inner));return!d?b+i:[b,inner+d,o+i].join(h)}function n(b){var d=b.length,r=Array(d);for(this.up();d--;)r[d]=this.parse(b[d]);this.down();return i("[",r,"]")}var d=/^function (\w+)/;jsDump={parse:function(b,d){var i=this.parsers[d||this.typeOf(b)],d=typeof i;return"function"==d?i.call(this,b):
"string"==d?i:this.parsers.error},typeOf:function(b){var d=typeof b;return"object"!=d&&"function"!=d?d:!b?"null":b.exec?"regexp":b.getHours?"date":b.scrollBy?"window":"#document"==b.nodeName?"document":b.nodeName?"node":b.item?"nodelist":b.callee?"arguments":b.call||b.constructor!=Array&&-1!=(b+"").indexOf("function")?"function":"length"in b?"array":d},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(b){if(!this.multiline)return"";var d=this.indentChar;
this.HTML&&(d=d.replace(/\t/g,"   ").replace(/ /g,"&nbsp;"));return Array(this._depth_+(b||0)).join(d)},up:function(b){this._depth_+=b||1},down:function(b){this._depth_-=b||1},setParser:function(b,d){this.parsers[b]=d},quote:b,literal:h,join:i,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(b){var k="function",h="name"in b?b.name:(d.exec(b)||[])[1];h&&(k+=" "+h);k=[k+"(",this.parse(b,"functionArgs"),
"){"].join("");return i(k,this.parse(b,"functionCode"),"}")},array:n,nodelist:n,arguments:n,object:function(b){var d=[];this.up();for(var h in b)d.push(this.parse(h,"key")+": "+this.parse(b[h]));this.down();return i("{",d,"}")},node:function(b){var d=this.HTML?"&lt;":"<",i=this.HTML?"&gt;":">",h=b.nodeName.toLowerCase(),o=d+h,g;for(g in this.DOMAttrs){var a=b[this.DOMAttrs[g]];a&&(o+=" "+g+"="+this.parse(a,"attribute"))}return o+i+d+"/"+h+i},functionArgs:function(b){b=b.length;if(!b)return"";for(var d=
Array(b);b--;)d[b]=String.fromCharCode(97+b);return" "+d.join(", ")+" "},key:b,functionCode:"[code]",attribute:b,string:b,date:b,regexp:h,number:h,"boolean":h},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"   ",multiline:!0}})();var Hashtable=function(){function b(a){if("string"==typeof a)return a;return typeof a.hashCode==o?(a=a.hashCode(),"string"==typeof a?a:b(a)):typeof a.toString==o?a.toString():""+a}function h(a,b){return a.equals(b)}function i(a,b){return typeof b.equals==o?b.equals(a):a===b}function n(a){return function(b){if(null===b)throw Error("null is not a valid "+a);if("undefined"==typeof b)throw Error(a+" must not be undefined");}}function d(a,b,e,d){this[0]=a;this.entries=[];this.addEntry(b,e);if(null!==d)this.getEqualityFunction=
function(){return d}}function m(a){return function(b){for(var e=this.entries.length,d,g=this.getEqualityFunction(b);e--;)if(d=this.entries[e],g(b,d[0]))switch(a){case j:return!0;case p:return d;case s:return[e,d[1]]}return!1}}function k(a){return function(b){for(var e=b.length,d=0,j=this.entries.length;d<j;++d)b[e+d]=this.entries[d][a]}}function r(a,b){var e=a[b];return e&&e instanceof d?e:null}function q(j,p){var k=this,i=[],s={},c=typeof j==o?j:b,h=typeof p==o?p:null;this.put=function(b,j){a(b);
e(j);var l=c(b),u,g=null;(u=r(s,l))?(l=u.getEntryForKey(b))?(g=l[1],l[1]=j):u.addEntry(b,j):(u=new d(l,b,j,h),i[i.length]=u,s[l]=u);return g};this.get=function(b){a(b);var e=c(b);if(e=r(s,e))if(b=e.getEntryForKey(b))return b[1];return null};this.containsKey=function(b){a(b);var e=c(b);return(e=r(s,e))?e.containsKey(b):!1};this.containsValue=function(a){e(a);for(var c=i.length;c--;)if(i[c].containsValue(a))return!0;return!1};this.clear=function(){i.length=0;s={}};this.isEmpty=function(){return!i.length};
var m=function(a){return function(){for(var c=[],b=i.length;b--;)i[b][a](c);return c}};this.keys=m("keys");this.values=m("values");this.entries=m("getEntries");this.remove=function(b){a(b);var e=c(b),l=null,d=r(s,e);if(d&&(l=d.removeEntryForKey(b),null!==l&&!d.entries.length)){a:{for(b=i.length;b--;)if(d=i[b],e===d[0])break a;b=null}g(i,b);delete s[e]}return l};this.size=function(){for(var a=0,b=i.length;b--;)a+=i[b].entries.length;return a};this.each=function(a){for(var b=k.entries(),c=b.length,
e;c--;)e=b[c],a(e[0],e[1])};this.putAll=function(a,b){for(var c=a.entries(),e,d,j,g=c.length,i=typeof b==o;g--;){e=c[g];d=e[0];e=e[1];if(i&&(j=k.get(d)))e=b(d,j,e);k.put(d,e)}};this.clone=function(){var a=new q(j,p);a.putAll(k);return a}}var o="function",g=typeof Array.prototype.splice==o?function(a,b){a.splice(b,1)}:function(a,b){var e,d,j;if(b===a.length-1)a.length=b;else{e=a.slice(b+1);a.length=b;for(d=0,j=e.length;d<j;++d)a[b+d]=e[d]}},a=n("key"),e=n("value"),j=0,p=1,s=2;d.prototype={getEqualityFunction:function(a){return typeof a.equals==
o?h:i},getEntryForKey:m(p),getEntryAndIndexForKey:m(s),removeEntryForKey:function(a){return(a=this.getEntryAndIndexForKey(a))?(g(this.entries,a[0]),a[1]):null},addEntry:function(a,b){this.entries[this.entries.length]=[a,b]},keys:k(0),values:k(1),getEntries:function(a){for(var b=a.length,e=0,d=this.entries.length;e<d;++e)a[b+e]=this.entries[e].slice(0)},containsKey:m(j),containsValue:function(a){for(var b=this.entries.length;b--;)if(a===this.entries[b][1])return!0;return!1}};return q}();function parseUri(b){for(var h=parseUri.options,b=h.parser[h.strictMode?"strict":"loose"].exec(b),i={},n=14;n--;)i[h.key[n]]=b[n]||"";i[h.q.name]={};i[h.key[12]].replace(h.q.parser,function(b,m,k){m&&(i[h.q.name][m]=k)});return i}
parseUri.options={strictMode:!1,key:"source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};(function(){function b(f,a,e){if(f===a)return 0!==f||1/f==1/a;if(null==f||null==a)return f===a;f._chain&&(f=f._wrapped);a._chain&&(a=a._wrapped);if(f.isEqual&&c.isFunction(f.isEqual))return f.isEqual(a);if(a.isEqual&&c.isFunction(a.isEqual))return a.isEqual(f);var l=q.call(f);if(l!=q.call(a))return!1;switch(l){case "[object String]":return f==""+a;case "[object Number]":return f!=+f?a!=+a:0==f?1/f==1/a:f==+a;case "[object Date]":case "[object Boolean]":return+f==+a;case "[object RegExp]":return f.source==
a.source&&f.global==a.global&&f.multiline==a.multiline&&f.ignoreCase==a.ignoreCase}if("object"!=typeof f||"object"!=typeof a)return!1;for(var d=e.length;d--;)if(e[d]==f)return!0;e.push(f);var d=0,j=!0;if("[object Array]"==l){if(d=f.length,j=d==a.length)for(;d--&&(j=d in f==d in a&&b(f[d],a[d],e)););}else{if("constructor"in f!="constructor"in a||f.constructor!=a.constructor)return!1;for(var g in f)if(c.has(f,g)&&(d++,!(j=c.has(a,g)&&b(f[g],a[g],e))))break;if(j){for(g in a)if(c.has(a,g)&&!d--)break;
j=!d}}e.pop();return j}var h=this,i=h._,n={},d=Array.prototype,m=Object.prototype,k=d.slice,r=d.unshift,q=m.toString,o=m.hasOwnProperty,g=d.forEach,a=d.map,e=d.reduce,j=d.reduceRight,p=d.filter,s=d.every,C=d.some,z=d.indexOf,F=d.lastIndexOf,m=Array.isArray,y=Object.keys,v=Function.prototype.bind,c=function(f){return new E(f)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=c),exports._=c):h._=c;c.VERSION="1.3.3";var t=c.each=c.forEach=function(f,
a,b){if(null!=f)if(g&&f.forEach===g)f.forEach(a,b);else if(f.length===+f.length)for(var e=0,d=f.length;e<d&&!(e in f&&a.call(b,f[e],e,f)===n);e++);else for(e in f)if(c.has(f,e)&&a.call(b,f[e],e,f)===n)break};c.map=c.collect=function(f,b,c){var e=[];if(null==f)return e;if(a&&f.map===a)return f.map(b,c);t(f,function(f,a,d){e[e.length]=b.call(c,f,a,d)});if(f.length===+f.length)e.length=f.length;return e};c.reduce=c.foldl=c.inject=function(f,a,b,d){var l=2<arguments.length;null==f&&(f=[]);if(e&&f.reduce===
e)return d&&(a=c.bind(a,d)),l?f.reduce(a,b):f.reduce(a);t(f,function(f,c,e){l?b=a.call(d,b,f,c,e):(b=f,l=!0)});if(!l)throw new TypeError("Reduce of empty array with no initial value");return b};c.reduceRight=c.foldr=function(f,a,b,e){var d=2<arguments.length;null==f&&(f=[]);if(j&&f.reduceRight===j)return e&&(a=c.bind(a,e)),d?f.reduceRight(a,b):f.reduceRight(a);var l=c.toArray(f).reverse();e&&!d&&(a=c.bind(a,e));return d?c.reduce(l,a,b,e):c.reduce(l,a)};c.find=c.detect=function(f,a,b){var c;A(f,function(f,
e,d){if(a.call(b,f,e,d))return c=f,!0});return c};c.filter=c.select=function(f,a,b){var c=[];if(null==f)return c;if(p&&f.filter===p)return f.filter(a,b);t(f,function(f,e,d){a.call(b,f,e,d)&&(c[c.length]=f)});return c};c.reject=function(f,a,b){var c=[];if(null==f)return c;t(f,function(f,e,d){a.call(b,f,e,d)||(c[c.length]=f)});return c};c.every=c.all=function(f,a,b){var c=!0;if(null==f)return c;if(s&&f.every===s)return f.every(a,b);t(f,function(f,e,d){if(!(c=c&&a.call(b,f,e,d)))return n});return!!c};
var A=c.some=c.any=function(f,a,b){a||(a=c.identity);var e=!1;if(null==f)return e;if(C&&f.some===C)return f.some(a,b);t(f,function(f,c,d){if(e||(e=a.call(b,f,c,d)))return n});return!!e};c.include=c.contains=function(f,a){var b;return null==f?!1:z&&f.indexOf===z?-1!=f.indexOf(a):b=A(f,function(f){return f===a})};c.invoke=function(f,a){var b=k.call(arguments,2);return c.map(f,function(f){return(c.isFunction(a)?a||f:f[a]).apply(f,b)})};c.pluck=function(f,a){return c.map(f,function(f){return f[a]})};
c.max=function(f,a,b){if(!a&&c.isArray(f)&&f[0]===+f[0])return Math.max.apply(Math,f);if(!a&&c.isEmpty(f))return-Infinity;var e={computed:-Infinity};t(f,function(f,c,d){c=a?a.call(b,f,c,d):f;c>=e.computed&&(e={value:f,computed:c})});return e.value};c.min=function(a,b,e){if(!b&&c.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&c.isEmpty(a))return Infinity;var d={computed:Infinity};t(a,function(a,f,c){f=b?b.call(e,a,f,c):a;f<d.computed&&(d={value:a,computed:f})});return d.value};c.shuffle=
function(a){var b=[],c;t(a,function(a,f){c=Math.floor(Math.random()*(f+1));b[f]=b[c];b[c]=a});return b};c.sortBy=function(a,b,e){var d=c.isFunction(b)?b:function(a){return a[b]};return c.pluck(c.map(a,function(a,f,b){return{value:a,criteria:d.call(e,a,f,b)}}).sort(function(a,f){var b=a.criteria,c=f.criteria;return void 0===b?1:void 0===c?-1:b<c?-1:b>c?1:0}),"value")};c.groupBy=function(a,b){var e={},d=c.isFunction(b)?b:function(a){return a[b]};t(a,function(a,f){var b=d(a,f);(e[b]||(e[b]=[])).push(a)});
return e};c.sortedIndex=function(a,b,e){e||(e=c.identity);for(var d=0,l=a.length;d<l;){var j=d+l>>1;e(a[j])<e(b)?d=j+1:l=j}return d};c.toArray=function(a){return!a?[]:c.isArray(a)||c.isArguments(a)?k.call(a):a.toArray&&c.isFunction(a.toArray)?a.toArray():c.values(a)};c.size=function(a){return c.isArray(a)?a.length:c.keys(a).length};c.first=c.head=c.take=function(a,b,c){return null!=b&&!c?k.call(a,0,b):a[0]};c.initial=function(a,b,c){return k.call(a,0,a.length-(null==b||c?1:b))};c.last=function(a,
b,c){return null!=b&&!c?k.call(a,Math.max(a.length-b,0)):a[a.length-1]};c.rest=c.tail=function(a,b,c){return k.call(a,null==b||c?1:b)};c.compact=function(a){return c.filter(a,function(a){return!!a})};c.flatten=function(a,b){return c.reduce(a,function(a,f){if(c.isArray(f))return a.concat(b?f:c.flatten(f));a[a.length]=f;return a},[])};c.without=function(a){return c.difference(a,k.call(arguments,1))};c.uniq=c.unique=function(a,b,e){var e=e?c.map(a,e):a,d=[];3>a.length&&(b=!0);c.reduce(e,function(e,l,
j){if(b?c.last(e)!==l||!e.length:!c.include(e,l))e.push(l),d.push(a[j]);return e},[]);return d};c.union=function(){return c.uniq(c.flatten(arguments,!0))};c.intersection=c.intersect=function(a){var b=k.call(arguments,1);return c.filter(c.uniq(a),function(a){return c.every(b,function(b){return 0<=c.indexOf(b,a)})})};c.difference=function(a){var b=c.flatten(k.call(arguments,1),!0);return c.filter(a,function(a){return!c.include(b,a)})};c.zip=function(){for(var a=k.call(arguments),b=c.max(c.pluck(a,"length")),
e=Array(b),d=0;d<b;d++)e[d]=c.pluck(a,""+d);return e};c.indexOf=function(a,b,e){if(null==a)return-1;var d;if(e)return e=c.sortedIndex(a,b),a[e]===b?e:-1;if(z&&a.indexOf===z)return a.indexOf(b);e=0;for(d=a.length;e<d;e++)if(e in a&&a[e]===b)return e;return-1};c.lastIndexOf=function(a,b){if(null==a)return-1;if(F&&a.lastIndexOf===F)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};c.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);for(var c=arguments[2]||1,
e=Math.max(Math.ceil((b-a)/c),0),d=0,l=Array(e);d<e;)l[d++]=a,a+=c;return l};var x=function(){};c.bind=function(a,b){var e,d;if(a.bind===v&&v)return v.apply(a,k.call(arguments,1));if(!c.isFunction(a))throw new TypeError;d=k.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(b,d.concat(k.call(arguments)));x.prototype=a.prototype;var c=new x,l=a.apply(c,d.concat(k.call(arguments)));return Object(l)===l?l:c}};c.bindAll=function(a){var b=k.call(arguments,1);0==b.length&&(b=c.functions(a));
t(b,function(b){a[b]=c.bind(a[b],a)});return a};c.memoize=function(a,b){var e={};b||(b=c.identity);return function(){var d=b.apply(this,arguments);return c.has(e,d)?e[d]:e[d]=a.apply(this,arguments)}};c.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};c.defer=function(a){return c.delay.apply(c,[a,1].concat(k.call(arguments,1)))};c.throttle=function(a,b){var e,d,l,j,g,u,i=c.debounce(function(){g=j=!1},b);return function(){e=this;d=arguments;l||
(l=setTimeout(function(){l=null;g&&a.apply(e,d);i()},b));j?g=!0:u=a.apply(e,d);i();j=!0;return u}};c.debounce=function(a,b,c){var e;return function(){var d=this,l=arguments;c&&!e&&a.apply(d,l);clearTimeout(e);e=setTimeout(function(){e=null;c||a.apply(d,l)},b)}};c.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};c.wrap=function(a,b){return function(){var c=[a].concat(k.call(arguments,0));return b.apply(this,c)}};c.compose=function(){var a=arguments;
return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};c.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};c.keys=y||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],e;for(e in a)c.has(a,e)&&(b[b.length]=e);return b};c.values=function(a){return c.map(a,c.identity)};c.functions=c.methods=function(a){var b=[],e;for(e in a)c.isFunction(a[e])&&b.push(e);return b.sort()};c.extend=function(a){t(k.call(arguments,
1),function(b){for(var c in b)a[c]=b[c]});return a};c.pick=function(a){var b={};t(c.flatten(k.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};c.defaults=function(a){t(k.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};c.clone=function(a){return!c.isObject(a)?a:c.isArray(a)?a.slice():c.extend({},a)};c.tap=function(a,b){b(a);return a};c.isEqual=function(a,c){return b(a,c,[])};c.isEmpty=function(a){if(null==a)return!0;if(c.isArray(a)||c.isString(a))return 0===
a.length;for(var b in a)if(c.has(a,b))return!1;return!0};c.isElement=function(a){return!!(a&&1==a.nodeType)};c.isArray=m||function(a){return"[object Array]"==q.call(a)};c.isObject=function(a){return a===Object(a)};c.isArguments=function(a){return"[object Arguments]"==q.call(a)};c.isArguments(arguments)||(c.isArguments=function(a){return!(!a||!c.has(a,"callee"))});c.isFunction=function(a){return"[object Function]"==q.call(a)};c.isString=function(a){return"[object String]"==q.call(a)};c.isNumber=function(a){return"[object Number]"==
q.call(a)};c.isFinite=function(a){return c.isNumber(a)&&isFinite(a)};c.isNaN=function(a){return a!==a};c.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==q.call(a)};c.isDate=function(a){return"[object Date]"==q.call(a)};c.isRegExp=function(a){return"[object RegExp]"==q.call(a)};c.isNull=function(a){return null===a};c.isUndefined=function(a){return void 0===a};c.has=function(a,b){return o.call(a,b)};c.noConflict=function(){h._=i;return this};c.identity=function(a){return a};c.times=
function(a,b,c){for(var e=0;e<a;e++)b.call(c,e)};c.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};c.result=function(a,b){if(null==a)return null;var e=a[b];return c.isFunction(e)?e.call(a):e};c.mixin=function(a){t(c.functions(a),function(b){M(b,c[b]=a[b])})};var B=0;c.uniqueId=function(a){var b=B++;return a?a+b:b};c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var l=/.^/,u={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},H;for(H in u)u[u[H]]=H;var I=/\\|'|\r|\n|\t|\u2028|\u2029/g,L=/\\(\\|'|r|n|t|u2028|u2029)/g,J=function(a){return a.replace(L,function(a,b){return u[b]})};c.template=function(a,b,e){e=c.defaults(e||{},c.templateSettings);a="__p+='"+a.replace(I,function(a){return"\\"+u[a]}).replace(e.escape||l,function(a,b){return"'+\n_.escape("+J(b)+")+\n'"}).replace(e.interpolate||l,function(a,b){return"'+\n("+
J(b)+")+\n'"}).replace(e.evaluate||l,function(a,b){return"';\n"+J(b)+"\n;__p+='"})+"';\n";e.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",d=new Function(e.variable||"obj","_",a);if(b)return d(b,c);b=function(a){return d.call(this,a,c)};b.source="function("+(e.variable||"obj")+"){\n"+a+"}";return b};c.chain=function(a){return c(a).chain()};var E=function(a){this._wrapped=a};c.prototype=E.prototype;
var K=function(a,b){return b?c(a).chain():a},M=function(a,b){E.prototype[a]=function(){var a=k.call(arguments);r.call(a,this._wrapped);return K(b.apply(c,a),this._chain)}};c.mixin(c);t("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=d[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var e=c.length;("shift"==a||"splice"==a)&&0===e&&delete c[0];return K(c,this._chain)}});t(["concat","join","slice"],function(a){var b=d[a];E.prototype[a]=function(){return K(b.apply(this._wrapped,
arguments),this._chain)}});E.prototype.chain=function(){this._chain=!0;return this};E.prototype.value=function(){return this._wrapped}}).call(this);(function(b){var h=String.prototype.trim,i=String.prototype.trimRight,n=String.prototype.trimLeft,d=function(a,b,d){a+="";b=~~b;for(var g=[];0<b;g[--b]=a);return g.join(null==d?"":d)},m=function(a){return null!=a?"["+g.escapeRegExp(a)+"]":"\\s"},k={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},r={},q;for(q in k)r[k[q]]=q;var o=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var b=function(){return b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=
b.parse(arguments[0])),b.format.call(null,b.cache[arguments[0]],arguments)};return b.format=function(b,e){var g=1,i=b.length,k="",h,m=[],n,c,q,r,x;for(n=0;n<i;n++)if(k=a(b[n]),"string"===k)m.push(b[n]);else if("array"===k){c=b[n];if(c[2]){h=e[g];for(k=0;k<c[2].length;k++){if(!h.hasOwnProperty(c[2][k]))throw Error(o('[_.sprintf] property "%s" does not exist',c[2][k]));h=h[c[2][k]]}}else c[1]?h=e[c[1]]:h=e[g++];if(/[^s]/.test(c[8])&&"number"!=a(h))throw Error(o("[_.sprintf] expecting number but found %s",
a(h)));switch(c[8]){case "b":h=h.toString(2);break;case "c":h=String.fromCharCode(h);break;case "d":h=parseInt(h,10);break;case "e":h=c[7]?h.toExponential(c[7]):h.toExponential();break;case "f":h=c[7]?parseFloat(h).toFixed(c[7]):parseFloat(h);break;case "o":h=h.toString(8);break;case "s":h=(h=""+h)&&c[7]?h.substring(0,c[7]):h;break;case "u":h=Math.abs(h);break;case "x":h=h.toString(16);break;case "X":h=h.toString(16).toUpperCase()}h=/[def]/.test(c[8])&&c[3]&&0<=h?"+"+h:h;r=c[4]?"0"==c[4]?"0":c[4].charAt(1):
" ";x=c[6]-(""+h).length;q=c[6]?d(r,x):"";m.push(c[5]?h+q:q+h)}return m.join("")},b.cache={},b.parse=function(a){for(var b=[],e=[],d=0;a;){if(null!==(b=/^[^\x25]+/.exec(a)))e.push(b[0]);else if(null!==(b=/^\x25{2}/.exec(a)))e.push("%");else{if(null===(b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a)))throw Error("[_.sprintf] huh?");if(b[2]){var d=d|1,g=[],h=b[2],i=[];if(null===(i=/^([a-z_][a-z_\d]*)/i.exec(h)))throw Error("[_.sprintf] huh?");for(g.push(i[1]);""!==
(h=h.substring(i[0].length));){if(null===(i=/^\.([a-z_][a-z_\d]*)/i.exec(h)))if(null===(i=/^\[(\d+)\]/.exec(h)))throw Error("[_.sprintf] huh?");g.push(i[1])}b[2]=g}else d|=2;if(3===d)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");e.push(b)}a=a.substring(b[0].length)}return e},b}(),g={VERSION:"2.2.0rc",isBlank:function(a){return/^\s*$/.test(a)},stripTags:function(a){return(""+a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){return a+="",a.charAt(0).toUpperCase()+
a.substr(1)},chop:function(a,b){return a+="",b=~~b,0<b?a.match(RegExp(".{1,"+b+"}","g")):[a]},clean:function(a){return g.strip(a).replace(/\s+/g," ")},count:function(a,b){return a+="",b+="",a.split(b).length-1},chars:function(a){return(""+a).split("")},escapeHTML:function(a){return(""+a).replace(/[&<>"']/g,function(a){return"&"+r[a]+";"})},unescapeHTML:function(a){return(""+a).replace(/\&([^;]+);/g,function(a,b){var d;return b in k?k[b]:(d=b.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(d[1],
16)):(d=b.match(/^#(\d+)$/))?String.fromCharCode(~~d[1]):a})},escapeRegExp:function(a){return(""+a).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(a,b,d){a=g.chars(a);return a.splice(~~b,0,""+d),a.join("")},include:function(a,b){return!!~(""+a).indexOf(b)},join:function(){var a=Array.prototype.slice.call(arguments);return a.join(a.shift())},lines:function(a){return(""+a).split("\n")},reverse:function(a){return g.chars(a).reverse().join("")},splice:function(a,b,d,h){a=g.chars(a);return a.splice(~~b,
~~d,h),a.join("")},startsWith:function(a,b){return a+="",b+="",a.length>=b.length&&a.substr(0,b.length)===b},endsWith:function(a,b){return a+="",b+="",a.length>=b.length&&a.substr(a.length-b.length)===b},succ:function(a){var a=a+"",b=g.chars(a);return b.splice(a.length-1,1,String.fromCharCode(a.charCodeAt(a.length-1)+1)),b.join("")},titleize:function(a){return(""+a).replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})},camelize:function(a){return g.trim(a).replace(/[-_\s]+(.)?/g,function(a,
b){return b.toUpperCase()})},underscored:function(a){return g.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return g.trim(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return g.titleize((""+a).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(a){return g.capitalize(g.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,b){return a+="",!b&&h?h.call(a):(b=m(b),a.replace(RegExp("^"+
b+"+|"+b+"+$","g"),""))},ltrim:function(a,b){return a+="",!b&&n?n.call(a):(b=m(b),a.replace(RegExp("^"+b+"+"),""))},rtrim:function(a,b){return a+="",!b&&i?i.call(a):(b=m(b),a.replace(RegExp(b+"+$"),""))},truncate:function(a,b,d){return a+="",d=d||"...",b=~~b,a.length>b?a.slice(0,b)+d:a},prune:function(a,b,d){a+="";b=~~b;d=null!=d?""+d:"...";var h,i,k=a.replace(/\W/g,function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "});return i=k.charAt(b),h=k.slice(0,b),i&&i.match(/\S/)&&(h=h.replace(/\s\S+$/,
"")),h=g.rtrim(h),(h+d).length>a.length?a:a.substr(0,h.length)+d},words:function(a,b){return g.trim(a,b).split(b||/\s+/)},pad:function(a,b,j,g){var a=a+"",h=0;b=~~b;j?1<j.length&&(j=j.charAt(0)):j=" ";switch(g){case "right":return h=b-a.length,a+d(j,h);case "both":return h=b-a.length,d(j,Math.ceil(h/2))+a+d(j,Math.floor(h/2));default:return h=b-a.length,d(j,h)+a}},lpad:function(a,b,d){return g.pad(a,b,d)},rpad:function(a,b,d){return g.pad(a,b,d,"right")},lrpad:function(a,b,d){return g.pad(a,b,d,"both")},
sprintf:o,vsprintf:function(a,b){return b.unshift(a),o.apply(null,b)},toNumber:function(a,b){var a=a+"",d;d=1*(1*a||0).toFixed(~~b)||0;return 0===d&&!a.match(/^0+$/)?Number.NaN:d},strRight:function(a,b){a+="";b=null!=b?""+b:b;var d=b?a.indexOf(b):-1;return~d?a.slice(d+b.length,a.length):a},strRightBack:function(a,b){a+="";b=null!=b?""+b:b;var d=b?a.lastIndexOf(b):-1;return~d?a.slice(d+b.length,a.length):a},strLeft:function(a,b){a+="";b=null!=b?""+b:b;var d=b?a.indexOf(b):-1;return~d?a.slice(0,d):
a},strLeftBack:function(a,b){a+="";b=null!=b?""+b:b;var d=a.lastIndexOf(b);return~d?a.slice(0,d):a},toSentence:function(a,b,d){b||(b=", ");d||(d=" and ");for(var g=a.length,h="",i=0;i<g;i++)h+=a[i],i===g-2?h+=d:i<g-1&&(h+=b);return h},slugify:function(a){var b=RegExp(m("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a"),"g");return a=(""+a).toLowerCase(),a=a.replace(b,
function(a){return"aaaaaaceeeeeiiiilnooooouuuunczz".charAt("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a".indexOf(a))||"-"}),g.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,b){return[b,a,b].join("")},quote:function(a){return g.surround(a,'"')},exports:function(){var a={},b;for(b in this)this.hasOwnProperty(b)&&!b.match(/^(?:include|contains|reverse)$/)&&
(a[b]=this[b]);return a},repeat:d,levenshtein:function(a,b){a+="";b+="";for(var d=[],g,h,i=0;i<=b.length;i++)for(var k=0;k<=a.length;k++)i&&k?a.charAt(k-1)===b.charAt(i-1)?h=g:h=Math.min(d[k],d[k-1],g)+1:h=i+k,g=d[k],d[k]=h;return d.pop()}};g.strip=g.trim;g.lstrip=g.ltrim;g.rstrip=g.rtrim;g.center=g.lrpad;g.rjust=g.lpad;g.ljust=g.rpad;g.contains=g.include;g.q=g.quote;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=g),exports._s=g):"function"==typeof define&&
define.amd?define("underscore.string",function(){return g}):(b._=b._||{},b._.string=b._.str=g)})(this);var XRegExp;
XRegExp=XRegExp||function(b){function h(a,b,c){for(var d in g.prototype)g.prototype.hasOwnProperty(d)&&(a[d]=g.prototype[d]);a.xregexp={captureNames:b,isNative:!!c};return a}function i(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function n(a,b,c){if(!g.isRegExp(a))throw new TypeError("type RegExp expected");b=p.replace.call(i(a)+(b||""),v,"");c&&(b=p.replace.call(b,RegExp("["+c+"]+","g"),""));return a=a.xregexp&&!a.xregexp.isNative?h(g(a.source,
b),a.xregexp.captureNames?a.xregexp.captureNames.slice(0):null):h(RegExp(a.source,b),null,!0)}function d(a,b){var c=a.length;if(Array.prototype.lastIndexOf)return a.lastIndexOf(b);for(;c--;)if(a[c]===b)return c;return-1}function m(a,b){return Object.prototype.toString.call(a).toLowerCase()==="[object "+b+"]"}function k(a){a=a||{};"all"===a||a.all?a={natives:!0,extensibility:!0}:m(a,"string")&&(a=g.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function r(a,b,c,d){var e=z.length,g=null,
h,i;x=!0;try{for(;e--;)if(i=z[e],("all"===i.scope||i.scope===c)&&(!i.trigger||i.trigger.call(d)))if(i.pattern.lastIndex=b,(h=s.exec.call(i.pattern,a))&&h.index===b){g={output:i.handler.call(d,h,c),match:h};break}}catch(j){throw j;}finally{x=!1}return g}function q(b){g.addToken=a[b?"on":"off"];j.extensibility=b}function o(a){RegExp.prototype.exec=(a?s:p).exec;RegExp.prototype.test=(a?s:p).test;String.prototype.match=(a?s:p).match;String.prototype.replace=(a?s:p).replace;String.prototype.split=(a?s:
p).split;j.natives=a}var g,a,e,j={natives:!1,extensibility:!1},p={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s={},C={},z=[],F={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},y=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,
v=/([\s\S])(?=[\s\S]*\1)/g,c=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,t=p.exec.call(/()??/,"")[1]===b,A=RegExp.prototype.sticky!==b,x=!1,B="gim"+(A?"y":"");g=function(a,c){if(g.isRegExp(a)){if(c!==b)throw new TypeError("can't supply flags when constructing one RegExp from another");return n(a)}if(x)throw Error("can't call the XRegExp constructor within token definition functions");var d=[],e="default",i={hasNamedCapture:!1,captureNames:[],hasFlag:function(a){return-1<c.indexOf(a)}},j=0,k,a=a===b?"":""+a,c=
c===b?"":""+c;if(p.match.call(c,v))throw new SyntaxError("invalid duplicate regular expression flag");a=p.replace.call(a,/^\(\?([\w$]+)\)/,function(a,b){if(p.test.call(/[gy]/,b))throw new SyntaxError("can't use flag g or y in mode modifier");c=p.replace.call(c+b,v,"");return""});for(g.forEach(c,/[\s\S]/,function(a){if(0>B.indexOf(a[0]))throw new SyntaxError("invalid regular expression flag "+a[0]);});j<a.length;)(k=r(a,j,e,i))?(d.push(k.output),j+=k.match[0].length||1):(k=p.exec.call(F[e],a.slice(j)))?
(d.push(k[0]),j+=k[0].length):(k=a.charAt(j),"["===k?e="class":"]"===k&&(e="default"),d.push(k),++j);return h(RegExp(d.join(""),p.replace.call(c,/[^gimy]+/g,"")),i.hasNamedCapture?i.captureNames:null)};a={on:function(a,b,c){c=c||{};a&&z.push({pattern:n(a,"g"+(A?"y":"")),handler:b,scope:c.scope||"default",trigger:c.trigger||null});c.customFlags&&(B=p.replace.call(B+c.customFlags,v,""))},off:function(){throw Error("extensibility must be installed before using addToken");}};g.addToken=a.off;g.cache=
function(a,b){var c=a+"/"+(b||"");return C[c]||(C[c]=g(a,b))};g.escape=function(a){return p.replace.call(a,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};g.exec=function(a,b,c,d){var e=n(b,"g"+(d&&A?"y":""),!1===d?"y":"");e.lastIndex=c=c||0;a=s.exec.call(e,a);d&&a&&a.index!==c&&(a=null);if(b.global)b.lastIndex=a?e.lastIndex:0;return a};g.forEach=function(a,b,c,d){for(var e=0,h=-1;e=g.exec(a,b,e);)c.call(d,e,++h,a,b),e=e.index+(e[0].length||1);return d};g.globalize=function(a){return n(a,"g")};g.install=function(a){a=
k(a);!j.natives&&a.natives&&o(!0);!j.extensibility&&a.extensibility&&q(!0)};g.isInstalled=function(a){return!!j[a]};g.isRegExp=function(a){return m(a,"regexp")};g.matchChain=function(a,b){return function I(a,c){var d=b[c].regex?b[c]:{regex:b[c]},e=[],l=function(a){e.push(d.backref?a[d.backref]||"":a[0])},f;for(f=0;f<a.length;++f)g.forEach(a[f],d.regex,l);return c===b.length-1||!e.length?e:I(e,c+1)}([a],0)};g.replace=function(a,c,d,e){var h=g.isRegExp(c),i=c;h?(e===b&&c.global&&(e="all"),i=n(c,"all"===
e?"g":"","all"===e?"":"g")):"all"===e&&(i=RegExp(g.escape(""+c),"g"));a=s.replace.call(""+a,i,d);if(h&&c.global)c.lastIndex=0;return a};g.split=function(a,b,c){return s.split.call(a,b,c)};g.test=function(a,b,c,d){return!!g.exec(a,b,c,d)};g.uninstall=function(a){a=k(a);j.natives&&a.natives&&o(!1);j.extensibility&&a.extensibility&&q(!1)};g.union=function(a,b){var c=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,d=0,e,h,i=function(a,b,c){var f=h[d-e];if(b){if(++d,f)return"(?<"+f+">"}else if(c)return"\\"+
(+c+e);return a},j=[],k,f;if(!m(a,"array")||!a.length)throw new TypeError("patterns must be a nonempty array");for(f=0;f<a.length;++f)k=a[f],g.isRegExp(k)?(e=d,h=k.xregexp&&k.xregexp.captureNames||[],j.push(g(k.source).source.replace(c,i))):j.push(g.escape(k));return g(j.join("|"),b)};g.version="2.0.0";s.exec=function(a){var c,e,g,h;if(!this.global)g=this.lastIndex;if(c=p.exec.apply(this,arguments)){!t&&1<c.length&&-1<d(c,"")&&(e=RegExp(this.source,p.replace.call(i(this),"g","")),p.replace.call((""+
a).slice(c.index),e,function(){var a;for(a=1;a<arguments.length-2;++a)arguments[a]===b&&(c[a]=b)}));if(this.xregexp&&this.xregexp.captureNames)for(h=1;h<c.length;++h)(e=this.xregexp.captureNames[h-1])&&(c[e]=c[h]);if(this.global&&!c[0].length&&this.lastIndex>c.index)this.lastIndex=c.index}if(!this.global)this.lastIndex=g;return c};s.test=function(a){return!!s.exec.call(this,a)};s.match=function(a){if(g.isRegExp(a)){if(a.global){var b=p.match.apply(this,arguments);a.lastIndex=0;return b}}else a=RegExp(a);
return s.exec.call(a,this)};s.replace=function(a,b){var c=g.isRegExp(a),e,h,i;if(c){if(a.xregexp)e=a.xregexp.captureNames;if(!a.global)i=a.lastIndex}else a+="";h=m(b,"function")?p.replace.call(""+this,a,function(){var d=arguments,g;if(e){d[0]=new String(d[0]);for(g=0;g<e.length;++g)e[g]&&(d[0][e[g]]=d[g+1])}if(c&&a.global)a.lastIndex=d[d.length-2]+d[0].length;return b.apply(null,d)}):p.replace.call(""+this,a,function(){var a=arguments;return p.replace.call(""+b,y,function(b,c,f){if(c){f=+c;if(f<=
a.length-3)return a[f]||"";f=e?d(e,c):-1;if(0>f)throw new SyntaxError("backreference to undefined group "+b);return a[f+1]||""}if("$"===f)return"$";if("&"===f||0===+f)return a[0];if("`"===f)return a[a.length-1].slice(0,a[a.length-2]);if("'"===f)return a[a.length-1].slice(a[a.length-2]+a[0].length);f=+f;if(!isNaN(f)){if(f>a.length-3)throw new SyntaxError("backreference to undefined group "+b);return a[f]||""}throw new SyntaxError("invalid token "+b);})});if(c)a.lastIndex=a.global?0:i;return h};s.split=
function(a,c){if(!g.isRegExp(a))return p.split.apply(this,arguments);var d=""+this,e=a.lastIndex,h=[],i=0,j,c=(c===b?-1:c)>>>0;g.forEach(d,a,function(a){if(a.index+a[0].length>i)h.push(d.slice(i,a.index)),1<a.length&&a.index<d.length&&Array.prototype.push.apply(h,a.slice(1)),j=a[0].length,i=a.index+j});i===d.length?(!p.test.call(a,"")||j)&&h.push(""):h.push(d.slice(i));a.lastIndex=e;return h.length>c?h.slice(0,c):h};e=a.on;e(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,
function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("invalid escape "+a[0]);},{scope:"all"});e(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});e(/(?:\(\?#[^)]*\))+/,function(a){return p.test.call(c,a.input.slice(a.index+a[0].length))?"":"(?:)"});e(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?d(this.captureNames,a[1])+1:+a[1],c=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+a[0]);return"\\"+b+(c===a.input.length||
isNaN(a.input.charAt(c))?"":"(?:)")});e(/(?:\s+|#.*)+/,function(a){return p.test.call(c,a.input.slice(a.index+a[0].length))?"":"(?:)"},{trigger:function(){return this.hasFlag("x")},customFlags:"x"});e(/\./,function(){return"[\\s\\S]"},{trigger:function(){return this.hasFlag("s")},customFlags:"s"});e(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("can't use integer as capture name "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});e(/\\(\d+)/,function(a,
b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});e(/\((?!\?)/,function(){if(this.hasFlag("n"))return"(?:";this.captureNames.push(null);return"("},{customFlags:"n"});if("undefined"!==typeof exports)exports.XRegExp=g;return g}();;(function(){"use strict";function e(a){throw a;}var g=void 0,i=!0,k=null,l=!1;function aa(){return function(a){return a}}function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function m(a){return function(){return this[a]}}function da(a){return function(){return a}}var n;function p(a,b){for(var c=a.split("."),d=GLOBAL,f;c.length&&(f=c.shift());){var h=d;!c.length&&b!==g?(d[f]=b,ea(d,f,b)):d[f]?d=d[f]:(d=d[f]={},ea(h,f,d))}}function q(a,b,c){a[b]=c;ea(a,b,c)}function ea(a,b,c){if(c&&("function"===typeof c||"object"===typeof c))a=a===GLOBAL?"":a.__wr_symbol||k||k,a!==k&&(b=a?a+"."+b:b,fa(c,b),"function"===typeof c&&fa(c.prototype,b+".prototype"))}
function fa(a,b){var c=l;try{var d={};Object.defineProperty(d,"test",{value:"foo"});c="foo"===d.test}catch(f){}fa=c=c?function(a,b){Object.prototype.hasOwnProperty.call(a,"__wr_symbol")||Object.defineProperty(a,"__wr_symbol",{value:b,enumerable:l,configurable:i});"function"===typeof a&&!Object.prototype.hasOwnProperty.call(a,"displayName")&&Object.defineProperty(a,"displayName",{value:b,configurable:i})}:ba();c(a,b)};jQuery.find.matchesSelector=function(){var a=jQuery.find.matchesSelector;return function(b,c){return/^[A-Za-z]+$/.test(c)?1===b.nodeType&&b.nodeName===(jQuery.isXMLDoc(b)?c:c.toUpperCase()):a.call(this,b,c)}}();parseUri.options.strictMode=i;jQuery.cookie.raw=i;var _=GLOBAL._.noConflict();function ga(){}function r(){e(Error("Unimplemented abstract method"))}function ha(){e(new ia("Unsupported operation"))}function ja(a,b){var c;a?(c=ba(),c.prototype=a,c=new c):c={};b&&jQuery.extend(c,b);return c}function t(a,b){a._super=b.prototype;a.prototype=ja(b.prototype);a.prototype.constructor=a}
function ka(a,b,c){function d(f){var f=f||a,h=b.call(this,f);jQuery.extend(this,h);this.name=a;this.message=h.message;"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(h,d);if(h.stack!==g)this.stack=h.stack.split(/\n+/).slice(1).join("\n");c&&c.apply(this,jQuery.makeArray(arguments))}b=b||GLOBAL.Error;t(d,b);return d}function la(a,b){var c=ma(b,a);c&&e(new TypeError("Object does not fully implement interface "+a+". "+c))}function na(a,b){return ma(a,b)===k}
function ma(a,b){if("undefined"===typeof a||a===k)return"Object is null or undefined";var c;c="function"===typeof b?b.prototype:b;var d,f,h;for(h in c){d=typeof c[h];f=typeof a[h];if("undefined"===f)return"Missing property '"+h+"'";if("function"===d&&"function"!==f||"function"!==d&&"function"===f)return"Property '"+h+"' "+("function"===d?"should be":"should not be")+" a function"}return k}
if(GLOBAL.Object&&GLOBAL.Object.prototype)GLOBAL.Object.prototype.toString=function(){var $super=GLOBAL.Object.prototype.toString;return function(){var b=this&&this.__wr_symbol;return b?""+b:$super.call(this)}}();if(GLOBAL.Function&&GLOBAL.Function.prototype)GLOBAL.Function.prototype.toString=function(){var $super=GLOBAL.Function.prototype.toString;return function(){var b=this&&this.__wr_symbol;return b?""+b:$super.call(this)}}();
function u(a){try{return jsDump.parse(a)}catch(b){return"[Error dumping object: "+b+"]"}};function v(){}p("internal.DefaultPlatform",v);var oa=function(){var a=k;return function(){return a||(a=new v)}}();q(v,"get",oa);v.prototype.getInfo=function(){var a=GLOBAL.navigator;return a?a.userAgent||k:k};q(v.prototype,"getInfo",v.prototype.getInfo);v.prototype.supportsStack=function(){var a="stack"in Error();v.prototype.supportsStack=function(){return a};return a};q(v.prototype,"supportsStack",v.prototype.supportsStack);v.prototype.supportsStackLineNumbers=function(){return pa().lines};
q(v.prototype,"supportsStackLineNumbers",v.prototype.supportsStackLineNumbers);v.prototype.supportsStackCharNumbers=function(){return pa().chars};q(v.prototype,"supportsStackCharNumbers",v.prototype.supportsStackCharNumbers);v.prototype.supportsStackParameters=function(){return pa().params};q(v.prototype,"supportsStackParameters",v.prototype.supportsStackParameters);
function pa(){var a=qa();v.prototype.supportsStackLineNumbers=function(){return a.lines};v.prototype.supportsStackCharNumbers=function(){return a.chars};v.prototype.supportsStackParameters=function(){return a.params};return a}
function qa(){function a(a){var b=[];XRegExp.forEach(a,s,function(a){b.push(Number(a[0]))});return b}var b={params:l,lines:l,chars:l},c=l;if(c=function(){var a=k;Error.prepareStackTrace=function(b,c){a=c[0]||k};var c=Error().stack;delete Error.prepareStackTrace;return a?(b.lines="getLineNumber"in a,b.chars="getColumnNumber"in a,c===c):l}())return b;var c=new Function("function x(x1,x2) {\n    function y(y1,y2) {\n        throw new RangeError();\n    }\n    y(x1,x2);\n}\nx('par_one','par_two');"),
d=[["par_one","par_two"],["par_one","par_two"],[]],f=[2,2],h=[-10,-4],j=k;try{c()}catch(o){"string"===typeof o.stack&&(j=o.stack.split(/\n+/))}var s=/\b\d+\b/g;if(j){0<=j[0].indexOf("RangeError")&&j.shift();var W=[],M=[],Ka=i;jQuery(j).slice(0,d.length).each(function(b){var c=a(this),f;if(0<b){f=M.length;for(var h=W[b-1];0<=f--;)M[f].push((c[f]||0)-(h[f]||0))}else for(f=c.length;0<=f--;)M[f]=[];W.push(c);var j=[];jQuery.each(d[b],function(){j.push(XRegExp.escape(this))});b=XRegExp("\\b"+j.join("\\b.+?\\b")+
"\\b","");Ka&&!b.test(this)&&(Ka=l)});var ae=function(a,b){if(a.length!==b.length)return l;for(var c=-1,d=a.length;++c<d;)if(a[c]!==b[c])return l;return i};jQuery.each(M,function(){if(ae(this,f))b.lines=i;if(ae(this,h))b.chars=i});b.params=Ka}return b}
v.prototype.supportsPropertyDefinition=function(){var a=l;if("function"===typeof Object.defineProperty){var b=document.createElement("test"),c={};try{var d={get:da("_test_value")};Object.defineProperty(b,"_test_property",d);Object.defineProperty(c,"_test_property",d);a="_test_value"===b._test_property&&"_test_value"===c._test_property}catch(f){}finally{b=k}}v.prototype.supportsPropertyDefinition=function(){return a};return a};q(v.prototype,"supportsPropertyDefinition",v.prototype.supportsPropertyDefinition);var ra=ka("internal.ui.html.EvalError",GLOBAL.Error,function(a,b,c){this.cause=b;this.sourceCode=c});p("internal.ui.html.EvalError",ra);function sa(a){a=a||"0";ta.test(a)||e(Error("Invalid hexadecimal number: "+a));for(var b=a.length,c=4*b,d=Math.ceil(c/28),f=[],h=0;h<d;h++)f.push(parseInt(a.substring(b-7*(h+1),b-7*h),16));this._bitSize=c;this._chunks=f}p("internal.util.HexInt",sa);var ta=/[0-9A-Fa-f]+/;sa.prototype.getBitSize=m("_bitSize");q(sa.prototype,"getBitSize",sa.prototype.getBitSize);
sa.prototype.xor=function(a){if(a){var b=a._bitSize;if(!(b<=this._bitSize)){for(var c=Math.ceil(b/28);this._chunks.length<c;)this._chunks.push(0);this._bitSize=b}for(b=0;b<this._chunks.length;b++)this._chunks[b]^=a._chunks[b]||0}};q(sa.prototype,"xor",sa.prototype.xor);sa.prototype.toString=function(){for(var a=[],b=this._chunks.length-1;0<=b;b--)a.push(_.str.lpad(this._chunks[b].toString(16),7,"0"));a=a.join("");return a.substring(a.length-this._bitSize/4)};q(sa.prototype,"toString",sa.prototype.toString);function w(){this._table=new Hashtable(ua,va)}p("internal.util.coll.HashMap",w);var wa=0;function ua(a){if(a===k)return"l";if(a===g)return"u";if("function"===typeof a.hashCode)return"_"+ua(a.hashCode());var b=typeof a;return"object"===b||"function"===b?(b=a.__wr_map_hash,b===g&&(b=wa++,xa(a,"__wr_map_hash",{value:b})),"o"+b):b.substring(0,1)+a.toString()}function va(a,b){return a&&a.equals!==g?a.equals(b):b&&b.equals!==g?b.equals(a):a===b}var ya={};function za(a){return a===k?ya:a}
function Aa(a){return a===ya?k:a}w.prototype.put=function(a,b){var a=za(a),b=za(b),c=this._table.put(a,b);return c===k?g:Aa(c)};q(w.prototype,"put",w.prototype.put);w.prototype.putAll=function(a){var b=this;a.each(function(a,d){b.put(a,d)})};q(w.prototype,"putAll",w.prototype.putAll);w.prototype.remove=function(a){a=za(a);a=this._table.remove(a);return a===k?g:Aa(a)};q(w.prototype,"remove",w.prototype.remove);w.prototype.clear=function(){this._table.clear()};q(w.prototype,"clear",w.prototype.clear);
w.prototype.isEmpty=function(){return this._table.isEmpty()};q(w.prototype,"isEmpty",w.prototype.isEmpty);w.prototype.getSize=function(){return this._table.size()};q(w.prototype,"getSize",w.prototype.getSize);w.prototype.containsKey=function(a){a=za(a);return this._table.containsKey(a)};q(w.prototype,"containsKey",w.prototype.containsKey);w.prototype.containsValue=function(a){a=za(a);return this._table.containsValue(a)};q(w.prototype,"containsValue",w.prototype.containsValue);
w.prototype.get=function(a){a=za(a);a=this._table.get(a);return a===k?g:Aa(a)};q(w.prototype,"get",w.prototype.get);w.prototype.getKeys=function(){for(var a=this._table.keys(),b=-1,c=a.length;++b<c;)a[b]=Aa(a[b]);return a};q(w.prototype,"getKeys",w.prototype.getKeys);w.prototype.getValues=function(){for(var a=this._table.values(),b=-1,c=a.length;++b<c;)a[b]=Aa(a[b]);return a};q(w.prototype,"getValues",w.prototype.getValues);
w.prototype.getEntries=function(){return jQuery.map(this._table.entries(),function(a){var b=a[1];return{key:Aa(a[0]),value:b===k?g:Aa(b)}})||[]};q(w.prototype,"getEntries",w.prototype.getEntries);w.prototype.each=function(a){a&&this._table.each(function(b,c){b=Aa(b);c=Aa(c);a(b,c)})};q(w.prototype,"each",w.prototype.each);w.prototype.toString=function(){var a=[];a.push("{");this.each(function(b,c){a.push(b===this?"(this)":""+b);a.push("=");a.push(c===this?"(this)":""+c)});a.push("}");return a.join("")};function Ba(a,b){for(var c=-1,d=a.length;++c<d;)if(a[c]===b)return a.splice(c,1),c;return k}p("internal.util.coll.arrayRemove",Ba);p("internal.util.url.isAbsolute",function(a){if(!a)return l;a=parseUri(a);return!(!a.host&&!_.str.startsWith(a.path,"/"))});p("internal.util.url.normalize",function(a){"string"===typeof a&&(a=jQuery.trim(a));if(!a)return"";var b=parseUri(a),c=b.path,d=Ca(c);return c!==d?(b.path=d,Da(b)):a});
function Ea(a,b){if(!a)return b;if(!b)return a;var c=parseUri(b);if(c.authority)return b;var d=parseUri(a);if(c.path)d.path=Ca(_.str.startsWith(c.path,"/")?c.path:d.path+"/"+c.path);if(c.path||c.query)d.query=c.query;if(c.path||c.query||c.anchor)d.anchor=c.anchor;return Da(d)}p("internal.util.url.resolve",Ea);
function Ca(a){var b;0===a.indexOf("/")?(b=i,a=a.substring(1)):b=l;var c=[],d=0;jQuery.each(a.split("/"),function(a,h){h&&"."!==h&&(".."===h?0<d?(c.pop(),d--):(b&&e(Error("Attempt to go up above root directory")),c.push("..")):(c.push(h),d++))});return(b?"/":"")+c.join("/")}
function Da(a){function b(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];b.push(c+(d?"="+d:""))}return b.join("&")}var c=parseUri(a.source);if(a.user!==c.user||a.password!==c.password)a.userInfo=a.user?a.user+(a.password?":"+a.password:""):"";if(a.userInfo!==c.userInfo||a.host!==c.host||a.port!==c.port)a.authority=a.host?(a.userInfo?a.userInfo+"@":"")+a.host+(a.port?":"+a.port:""):"";if(a.file!==c.file||a.directory!==c.directory)a.path=a.file?(a.directory?a.directory+"/":"")+a.file:"";
var d=b(a.queryKey),f=b(c.queryKey);if(d!==f)a.query=d;if(a.path!==c.path||a.query!==c.query||a.anchor!==c.anchor)a.relative=a.path?a.path+(a.query?"?"+a.query:"")+(a.anchor?"#"+a.anchor:""):"";return a.protocol!==c.protocol||a.authority!==c.authority||a.relative!==c.relative?(a.protocol?a.protocol+"://":"")+(a.authority||"")+(a.relative||""):a.source}p("internal.util.url.serialize",Da);function Fa(a){return Ea(a,"..")}p("internal.util.url.getParent",Fa);
function Ga(a,b){if(!b)return a;var c="string"===typeof b?b:jQuery.param(b);if(!c)return a;var d=parseUri(a);d.query=d.query?d.query+"&"+c:c;return Da(d)}p("internal.util.url.addQueryParams",Ga);function Ha(a){a=parseUri(a);return!a.protocol||"http"===a.protocol||"https"===a.protocol}p("internal.util.url.isHTTP",Ha);function Ia(){}p("wr.Disposable",Ia);Ia.prototype.dispose=r;q(Ia.prototype,"dispose",Ia.prototype.dispose);function Ja(){}p("wr.Initializable",Ja);Ja.prototype.init=r;q(Ja.prototype,"init",Ja.prototype.init);function La(){}p("wr.Platform",La);La.prototype.getInfo=r;q(La.prototype,"getInfo",La.prototype.getInfo);La.prototype.supportsStack=r;q(La.prototype,"supportsStack",La.prototype.supportsStack);La.prototype.supportsStackLineNumbers=r;q(La.prototype,"supportsStackLineNumbers",La.prototype.supportsStackLineNumbers);La.prototype.supportsStackCharNumbers=r;q(La.prototype,"supportsStackCharNumbers",La.prototype.supportsStackCharNumbers);La.prototype.supportsStackParameters=r;
q(La.prototype,"supportsStackParameters",La.prototype.supportsStackParameters);La.prototype.supportsPropertyDefinition=r;q(La.prototype,"supportsPropertyDefinition",La.prototype.supportsPropertyDefinition);function Ma(){}p("wr.Startable",Ma);Ma.prototype.start=r;q(Ma.prototype,"start",Ma.prototype.start);var x=ka("wr.StateError");p("wr.StateError",x);function Na(){}p("wr.Stoppable",Na);Na.prototype.stop=r;q(Na.prototype,"stop",Na.prototype.stop);var ia=ka("wr.UnsupportedError");p("wr.UnsupportedError",ia);function Oa(){this._app=k}p("wr.app.AbstractPlugin",Oa);Oa.prototype.getApp=m("_app");q(Oa.prototype,"getApp",Oa.prototype.getApp);Oa.prototype.setApp=ca("_app");q(Oa.prototype,"setApp",Oa.prototype.setApp);Oa.prototype.configure=ga;q(Oa.prototype,"configure",Oa.prototype.configure);
Oa.prototype.configureObjectsList=function(a,b,c,d){var f=this,h=a[b];return this._app.getConfigPlugin().readInstanceListFactory(h||[]).newInstance().chain(function(a){var b=_.isArray(h)&&h.length===a.length?h:k;c.call(f);for(var s=-1,W=a.length;++s<W;){var M=b&&b[s];M&&(M=jQuery.extend({},M),delete M.name,delete M.url);d.call(f,a[s],M)}})};q(Oa.prototype,"configureObjectsList",Oa.prototype.configureObjectsList);function Pa(){}p("wr.app.AppAware",Pa);Pa.prototype.setApp=r;q(Pa.prototype,"setApp",Pa.prototype.setApp);p("wr.app.ResourceType",{SCRIPT:"script"});var Qa={config:{implementation:"wr.config.ConfigPlugin",handlers:["wr.config.ObjectConfigHandler","wr.config.JsonConfigHandler"]}};p("wr.app.defaultConfig",Qa);function y(a,b){var c=this;this._size=b.length;this._results=[];this._sortedResults=[];this._errors=[];this._result=new Ra;jQuery.each(b,function(b){this.onSuccess(function(f){c._results.push(f);c._sortedResults[b]=f;c._result.isResolved()||a.call(c,c._result)}).onFailure(function(b){c._errors.push(b);c._result.isResolved()||a.call(c,c._result)})});this._result.isResolved()||a.call(this,this._result)}p("wr.async.Condition",y);y.prototype.getSize=m("_size");q(y.prototype,"getSize",y.prototype.getSize);
y.prototype.getResults=m("_results");q(y.prototype,"getResults",y.prototype.getResults);y.prototype.getSortedResults=m("_sortedResults");q(y.prototype,"getSortedResults",y.prototype.getSortedResults);y.prototype.getErrors=m("_errors");q(y.prototype,"getErrors",y.prototype.getErrors);y.prototype.onSuccess=function(a){return this._result.getPromise().onSuccess(a)};q(y.prototype,"onSuccess",y.prototype.onSuccess);y.prototype.onFailure=function(a){return this._result.getPromise().onFailure(a)};
q(y.prototype,"onFailure",y.prototype.onFailure);y.prototype.onComplete=function(a){return this._result.getPromise().onComplete(a)};q(y.prototype,"onComplete",y.prototype.onComplete);y.prototype.chain=function(a,b){return this._result.getPromise().chain(a,b)};q(y.prototype,"chain",y.prototype.chain);function Sa(a){return new y(function(a){var c=this._errors;0<c.length?a.failure(c[0]):this._results.length===this.getSize()&&a.success(this._sortedResults)},jQuery.makeArray(arguments))}
q(y,"allSuccess",Sa);function Ta(){}p("wr.async.Promise",Ta);Ta.prototype.onSuccess=r;q(Ta.prototype,"onSuccess",Ta.prototype.onSuccess);Ta.prototype.onFailure=r;q(Ta.prototype,"onFailure",Ta.prototype.onFailure);Ta.prototype.onComplete=r;q(Ta.prototype,"onComplete",Ta.prototype.onComplete);Ta.prototype.chain=r;q(Ta.prototype,"chain",Ta.prototype.chain);function Ua(a){return na(a,Ta)}p("wr.async.isPromise",Ua);function Va(a,b,c){var d=jQuery.makeArray(arguments);d.shift();d.shift();return Wa(a,b,d)}p("wr.async.call",Va);function Wa(a,b,c){"function"!==typeof a&&e(new TypeError("Invalid function"));c!==g&&c!==k&&("object"!==typeof c||!jQuery.isArray(c))&&e(new TypeError("Invalid arguments array"));var d;try{var f=a.apply(b||GLOBAL,c||[]);d=Ua(f)?f:new Xa(f)}catch(h){d=new Xa(h)}return d}p("wr.async.apply",Wa);function Ya(){}p("internal.async.AbstractPromise",Ya);Ya.prototype.onSuccess=r;q(Ya.prototype,"onSuccess",Ya.prototype.onSuccess);Ya.prototype.onFailure=r;q(Ya.prototype,"onFailure",Ya.prototype.onFailure);Ya.prototype.onComplete=r;q(Ya.prototype,"onComplete",Ya.prototype.onComplete);
Ya.prototype.chain=function(a,b){function c(a){a.onSuccess(function(a){d.resolve(a)}).onFailure(function(a){d.reject(a)})}if(!a)return this;var d=jQuery.Deferred();this.onSuccess(function(b){b=a(b);Ua(b)?c(b):d.resolve(b)});if(b)this.onFailure(function(a){a=b(a);Ua(a)?c(a):d.reject(a)});else this.onFailure(function(a){d.reject(a)});return new Za(d)};q(Ya.prototype,"chain",Ya.prototype.chain);function Za(a){this._deferred=a}t(Za,Ya);p("internal.async.JQueryPromise",Za);Za.prototype.onSuccess=function(a){this._deferred.done(a);return this};q(Za.prototype,"onSuccess",Za.prototype.onSuccess);Za.prototype.onFailure=function(a){this._deferred.fail(a);return this};q(Za.prototype,"onFailure",Za.prototype.onFailure);Za.prototype.onComplete=function(a){this._deferred.always(a);return this};q(Za.prototype,"onComplete",Za.prototype.onComplete);Za.prototype.isSuccess=function(){return this._deferred.isResolved()};
q(Za.prototype,"isSuccess",Za.prototype.isSuccess);Za.prototype.isFailure=function(){return this._deferred.isRejected()};q(Za.prototype,"isFailure",Za.prototype.isFailure);function $a(a){this._deferred=a}t($a,Za);p("internal.async.JQueryAjaxPromise",$a);$a.prototype.onFailure=function(a){return $a._super.onFailure.call(this,function(b){a(Error(b.status+" "+b.statusText))})};q($a.prototype,"onFailure",$a.prototype.onFailure);$a.prototype.onComplete=function(a){var b=this;return $a._super.onComplete.call(b,function(c){b.isFailure()?a(Error(c.status+" "+c.statusText)):b.isSuccess()&&a(c)})};q($a.prototype,"onComplete",$a.prototype.onComplete);function Xa(a){this._result=a}t(Xa,Ya);p("wr.async.FixedPromise",Xa);Xa.prototype.onSuccess=function(a){a&&!(this._result instanceof Error)&&a(this._result);return this};q(Xa.prototype,"onSuccess",Xa.prototype.onSuccess);Xa.prototype.onFailure=function(a){a&&this._result instanceof Error&&a(this._result);return this};q(Xa.prototype,"onFailure",Xa.prototype.onFailure);Xa.prototype.onComplete=function(a){a&&a(this._result);return this};q(Xa.prototype,"onComplete",Xa.prototype.onComplete);var ab=new Xa(g);
q(Xa,"UNDEFINED",ab);function Ra(){this._deferred=new jQuery.Deferred;this._resolved=l;this._promise=new Za(this._deferred)}p("wr.async.Result",Ra);Ra.prototype.isResolved=m("_resolved");q(Ra.prototype,"isResolved",Ra.prototype.isResolved);Ra.prototype.getPromise=m("_promise");q(Ra.prototype,"getPromise",Ra.prototype.getPromise);Ra.prototype.success=function(a){this._resolved&&e(new x("Result already resolved"));this._resolved=i;this._deferred.resolve(a!==g?a:g)};q(Ra.prototype,"success",Ra.prototype.success);
Ra.prototype.failure=function(a){this._resolved&&e(new x("Result already resolved"));this._resolved=i;this._deferred.reject(a)};q(Ra.prototype,"failure",Ra.prototype.failure);function bb(){}p("wr.config.ConfigHandler",bb);bb.prototype.accept=r;q(bb.prototype,"accept",bb.prototype.accept);bb.prototype.getRequiredFiles=r;q(bb.prototype,"getRequiredFiles",bb.prototype.getRequiredFiles);bb.prototype.merge=r;q(bb.prototype,"merge",bb.prototype.merge);function cb(){}p("wr.config.Configurable",cb);cb.prototype.configure=r;q(cb.prototype,"configure",cb.prototype.configure);function db(){}p("wr.app.Plugin",db);t(db,cb);db.prototype.setApp=r;q(db.prototype,"setApp",db.prototype.setApp);db.prototype.getApp=r;q(db.prototype,"getApp",db.prototype.getApp);function eb(){}p("wr.config.ObjectConfigHandler",eb);eb.prototype.accept=function(a){return a instanceof Object};q(eb.prototype,"accept",eb.prototype.accept);eb.prototype.getRequiredFiles=function(a){a instanceof Object||e(Error("Invalid new configuration provided"));var b=[];if(a=a._require)jQuery.isArray(a)||(a=[a]),jQuery.each(a,function(a,d){"string"===typeof d&&1<d.length||e(Error("Invalid configuration file"));b.push(d)});return b};q(eb.prototype,"getRequiredFiles",eb.prototype.getRequiredFiles);
eb.prototype.merge=function(a,b){b instanceof Object||e(Error("Invalid new configuration provided"));fb(this,a,b,"")};q(eb.prototype,"merge",eb.prototype.merge);
function fb(a,b,c,d){for(var f in c)if(c.hasOwnProperty(f)&&"_require"!==f){var h,j;"+"===f.charAt(f.length-1)?(h=i,j=f.slice(0,-1)):(h=l,j=f);var o=c[f],s=b[j];if(h)if(s instanceof Object)if(jQuery.isArray(s))if(h=s,jQuery.isArray(o)){j=0;for(s=o.length;j<s;j++)h.push(o[j])}else h.push(o);else o instanceof Object?fb(a,s,o,d+"."+j):e(Error("Unable to merge a primitive value into object value of property '"+j+"'"+(d?" in '"+d+"'":"")));else e(Error("Unable to merge a new value into primitive or missing value of property '"+
j+"'"+(d?" in '"+d+"'":"")));else b[j]=o}};function gb(){this._objConfigHandler=new eb}p("wr.config.JsonConfigHandler",gb);gb.prototype.accept=function(a,b){if(b){var c=b.substring(b.lastIndexOf(".")+1);return"string"===typeof a&&"json"===c}return l};q(gb.prototype,"accept",gb.prototype.accept);gb.prototype.getRequiredFiles=function(a,b){"string"!==typeof a&&e(Error("Invalid new configuration provided"));return this._objConfigHandler.getRequiredFiles(jQuery.parseJSON(a),b)};q(gb.prototype,"getRequiredFiles",gb.prototype.getRequiredFiles);
gb.prototype.merge=function(a,b,c){"string"!==typeof b&&e(Error("Invalid new configuration provided"));b=jQuery.parseJSON(b);this._objConfigHandler.merge(a,b,c)};q(gb.prototype,"merge",gb.prototype.merge);function hb(a,b,c){var d,f;"string"===typeof a?(d=a,f=k):"object"===typeof a&&a!==k?(d=a.name,f=a.url):e(Error("Invalid instance factory configuration"));return new ib(d,b,f,c)}p("wr.config.readInstanceFactory",hb);function jb(a,b,c){if("string"===typeof a||"object"===typeof a&&a!==k){var d=[];jQuery.isArray(a)||(a=[a]);jQuery.each(a,function(a,h){d.push(hb(h,b,c))});return new kb(d)}e(Error("Invalid instance list factory configuration"))}p("wr.config.readInstanceListFactory",jb);function lb(a,b,c){this._type=a;this._sourceObject=b;this._property=c}p("wr.data.Event",lb);lb.prototype.getType=m("_type");q(lb.prototype,"getType",lb.prototype.getType);lb.prototype.getSourceObject=m("_sourceObject");q(lb.prototype,"getSourceObject",lb.prototype.getSourceObject);lb.prototype.getProperty=m("_property");q(lb.prototype,"getProperty",lb.prototype.getProperty);lb.prototype.toString=function(){return"Event:"+this._type+":("+this._sourceObject+"."+this._property+")"};p("wr.data.EventType",{ADD:"add",CHANGE:"change",REMOVE:"remove"});function mb(){}p("wr.data.Object",mb);mb.prototype.get=r;q(mb.prototype,"get",mb.prototype.get);mb.prototype.set=r;q(mb.prototype,"set",mb.prototype.set);mb.prototype.remove=r;q(mb.prototype,"remove",mb.prototype.remove);mb.prototype.toObject=r;q(mb.prototype,"toObject",mb.prototype.toObject);mb.prototype.addEventListener=r;q(mb.prototype,"addEventListener",mb.prototype.addEventListener);mb.prototype.removeEventListener=r;q(mb.prototype,"removeEventListener",mb.prototype.removeEventListener);
mb.prototype.triggerEvent=r;q(mb.prototype,"triggerEvent",mb.prototype.triggerEvent);p("wr.data.Type",{BLOB:"blob",BOOLEAN:"boolean",DATE:"date",DECIMAL:"decimal",FLOAT:"float",INTEGER:"integer",PASSWORD:"password",STRING:"string",TEXT:"text",TIME:"time",TIMESTAMP:"timestamp",URL:"url"});var nb={ERROR:1,WARN:2,INFO:3,DEBUG:4};p("wr.log.Level",nb);function ob(){this._level=4}p("wr.log.AbstractAppender",ob);ob.prototype.setup=function(a){if(a=a&&a.level)this._level=a};q(ob.prototype,"setup",ob.prototype.setup);ob.prototype.append=function(a){a.getLevel()<=this._level&&this.appendFiltered(a)};q(ob.prototype,"append",ob.prototype.append);ob.prototype.appendFiltered=r;q(ob.prototype,"appendFiltered",ob.prototype.appendFiltered);function pb(){}p("wr.log.Appender",pb);pb.prototype.setup=r;q(pb.prototype,"setup",pb.prototype.setup);pb.prototype.append=r;q(pb.prototype,"append",pb.prototype.append);function qb(){}p("wr.log.Log",qb);qb.prototype.isErrorEnabled=r;q(qb.prototype,"isErrorEnabled",qb.prototype.isErrorEnabled);qb.prototype.error=r;q(qb.prototype,"error",qb.prototype.error);qb.prototype.isWarnEnabled=r;q(qb.prototype,"isWarnEnabled",qb.prototype.isWarnEnabled);qb.prototype.warn=r;q(qb.prototype,"warn",qb.prototype.warn);qb.prototype.isInfoEnabled=r;q(qb.prototype,"isInfoEnabled",qb.prototype.isInfoEnabled);qb.prototype.info=r;q(qb.prototype,"info",qb.prototype.info);
qb.prototype.isDebugEnabled=r;q(qb.prototype,"isDebugEnabled",qb.prototype.isDebugEnabled);qb.prototype.debug=r;q(qb.prototype,"debug",qb.prototype.debug);function rb(){}p("wr.log.LogEvent",rb);rb.prototype.getTimestamp=r;q(rb.prototype,"getTimestamp",rb.prototype.getTimestamp);rb.prototype.getCategory=r;q(rb.prototype,"getCategory",rb.prototype.getCategory);rb.prototype.getLevel=r;q(rb.prototype,"getLevel",rb.prototype.getLevel);rb.prototype.getMessage=r;q(rb.prototype,"getMessage",rb.prototype.getMessage);rb.prototype.getErrorInfo=r;q(rb.prototype,"getErrorInfo",rb.prototype.getErrorInfo);function sb(){}p("wr.logic.AbstractActor",sb);sb.prototype.execute=r;q(sb.prototype,"execute",sb.prototype.execute);sb.prototype.setup=ba();q(sb.prototype,"setup",sb.prototype.setup);sb.prototype.destroy=ba();q(sb.prototype,"destroy",sb.prototype.destroy);function tb(){}p("wr.logic.Actor",tb);tb.prototype.setup=r;q(tb.prototype,"setup",tb.prototype.setup);tb.prototype.destroy=r;q(tb.prototype,"destroy",tb.prototype.destroy);tb.prototype.execute=r;q(tb.prototype,"execute",tb.prototype.execute);function ub(a,b,c){!b&&c===g&&e(Error("Either source name or source value is required"));this._targetName=a;this._sourceName=b;this._sourceValue=c}p("wr.logic.Coupling",ub);ub.prototype.getTargetName=m("_targetName");q(ub.prototype,"getTargetName",ub.prototype.getTargetName);ub.prototype.getSourceName=m("_sourceName");q(ub.prototype,"getSourceName",ub.prototype.getSourceName);ub.prototype.getSourceValue=m("_sourceValue");q(ub.prototype,"getSourceValue",ub.prototype.getSourceValue);
ub.prototype.toString=function(){var a=[this._targetName,":",this._sourceName];this._sourceValue!==g&&a.push(",",""+this._sourceValue);return a.join("")};function vb(){}p("wr.nav.AbstractRouter",vb);vb.prototype.route=function(a){var b=this.isRequestImplemented(a);this.alterRequest(a);b&&this.implementRequest(a)};q(vb.prototype,"route",vb.prototype.route);vb.prototype.precompute=function(a){var b=this.isRequestImplemented(a);this.alterRequest(a);return b};q(vb.prototype,"precompute",vb.prototype.precompute);vb.prototype.alterRequest=ba();q(vb.prototype,"alterRequest",vb.prototype.alterRequest);vb.prototype.isRequestImplemented=da(l);
q(vb.prototype,"isRequestImplemented",vb.prototype.isRequestImplemented);vb.prototype.implementRequest=ha;q(vb.prototype,"implementRequest",vb.prototype.implementRequest);function wb(){}p("wr.nav.NavListener",wb);wb.prototype.requestEnqueue=r;q(wb.prototype,"requestEnqueue",wb.prototype.requestEnqueue);wb.prototype.requestCancel=r;q(wb.prototype,"requestCancel",wb.prototype.requestCancel);wb.prototype.requestBeforeServe=r;q(wb.prototype,"requestBeforeServe",wb.prototype.requestBeforeServe);wb.prototype.requestServe=r;q(wb.prototype,"requestServe",wb.prototype.requestServe);wb.prototype.requestRoute=r;q(wb.prototype,"requestRoute",wb.prototype.requestRoute);
wb.prototype.requestStart=r;q(wb.prototype,"requestStart",wb.prototype.requestStart);wb.prototype.requestSuccess=r;q(wb.prototype,"requestSuccess",wb.prototype.requestSuccess);wb.prototype.requestFailure=r;q(wb.prototype,"requestFailure",wb.prototype.requestFailure);p("wr.nav.ResponseType",{HTML:"html",JSON:"json",XML:"xml"});function xb(){}p("wr.nav.Router",xb);xb.prototype.route=r;q(xb.prototype,"route",xb.prototype.route);xb.prototype.precompute=r;q(xb.prototype,"precompute",xb.prototype.precompute);p("wr.ui.Attribute",{ENABLED:"enabled",VISIBLE:"visible",FOCUSED:"focused",SHOW_EFFECT:"showEffect",HIDE_EFFECT:"hideEffect",WIDTH:"width",HEIGHT:"height",RESIZABLE:"resizable",AUTO_RESIZE:"autoResize",DRAGGABLE:"draggable",CURSOR_TYPE:"cursorType",OPEN:"open",MODAL:"modal",MAXIMIZABLE:"maximizable",MINIMIZABLE:"minimizable",CLOSABLE:"closable"});function yb(){}p("wr.ui.ContextRegistry",yb);yb.prototype.addContext=r;q(yb.prototype,"addContext",yb.prototype.addContext);yb.prototype.removeContext=r;q(yb.prototype,"removeContext",yb.prototype.removeContext);function zb(){}p("wr.ui.ControlFactory",zb);zb.prototype.create=r;q(zb.prototype,"create",zb.prototype.create);zb.prototype.destroy=r;q(zb.prototype,"destroy",zb.prototype.destroy);p("wr.ui.CursorType",{POINTER:"pointer",WAIT:"wait"});p("wr.ui.EffectType",{FADE:"fade",BLIND:"blind",SLIDE:"slide",SCALE:"scale"});function Ab(a,b,c){this._type=a;this._sourceControl=b;this._sourceView=c}p("wr.ui.Event",Ab);Ab.prototype.getType=m("_type");q(Ab.prototype,"getType",Ab.prototype.getType);Ab.prototype.getSourceControl=m("_sourceControl");q(Ab.prototype,"getSourceControl",Ab.prototype.getSourceControl);Ab.prototype.getSourceView=m("_sourceView");q(Ab.prototype,"getSourceView",Ab.prototype.getSourceView);Ab.prototype.toString=function(){return"Event:"+this._type+":("+this._sourceControl+","+this._sourceView+")"};
q(Ab.prototype,"toString",Ab.prototype.toString);var Bb={FOCUS:"focus",BLUR:"blur",CLICK:"click",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",CHANGE:"change",OPEN:"open",CLOSE:"close",CONTENT_CHANGE:"contentchange"};p("wr.ui.EventType",Bb);function z(){}p("wr.ui.Viewer",z);z.prototype.getView=r;q(z.prototype,"getView",z.prototype.getView);z.prototype.getIndexes=r;q(z.prototype,"getIndexes",z.prototype.getIndexes);z.prototype.setup=r;q(z.prototype,"setup",z.prototype.setup);z.prototype.destroy=r;q(z.prototype,"destroy",z.prototype.destroy);z.prototype.isContextProvider=r;q(z.prototype,"isContextProvider",z.prototype.isContextProvider);z.prototype.setContextRegistry=r;q(z.prototype,"setContextRegistry",z.prototype.setContextRegistry);
z.prototype.getContextRegistry=r;q(z.prototype,"getContextRegistry",z.prototype.getContextRegistry);z.prototype.refreshSubViews=r;q(z.prototype,"refreshSubViews",z.prototype.refreshSubViews);z.prototype.writeAttributes=r;q(z.prototype,"writeAttributes",z.prototype.writeAttributes);z.prototype.readAttributes=r;q(z.prototype,"readAttributes",z.prototype.readAttributes);z.prototype.writeData=r;q(z.prototype,"writeData",z.prototype.writeData);z.prototype.readData=r;q(z.prototype,"readData",z.prototype.readData);
z.prototype.addEventListener=r;q(z.prototype,"addEventListener",z.prototype.addEventListener);z.prototype.removeEventListener=r;q(z.prototype,"removeEventListener",z.prototype.removeEventListener);var Cb={fade:"fade",blind:"blind",slide:"slide",scale:"scale"},Db={fade:"fade",blind:"blind",slide:"slide",scale:"scale"};function Eb(a){return(a=Cb[a])?{effect:a,duration:150}:k}p("wr.ui.jquery.getJQueryEffect",Eb);function Fb(a){return Db[a.effect||a]}p("wr.ui.jquery.getEffectType",Fb);function Gb(a){this._error=a;this._name=a.name.valueOf();this._message=a.message?""+a.message.valueOf():k}p("wr.util.ErrorInfo",Gb);Gb.prototype.getError=m("_error");q(Gb.prototype,"getError",Gb.prototype.getError);Gb.prototype.getName=m("_name");q(Gb.prototype,"getName",Gb.prototype.getName);Gb.prototype.getMessage=m("_message");q(Gb.prototype,"getMessage",Gb.prototype.getMessage);
Gb.prototype.getStack=function(){if(this._stack===g){var a=this._error.stack;if(!a)return k;var b=Hb,c=[];jQuery.each([Ib,Jb],function(){XRegExp.forEach(a,this,function(a){var f=b(a,"line"),h=b(a,"char"),j=b(a,"params")||k,o=b(a,"name")||"",a=b(a,"url"),j=j!==k?j.split(/,/):k;c.push(new Kb(o,j,a,f!==k?Number(f):k,h!==k?Number(h):k))})});this._stack=0<c.length?c:k}return this._stack};q(Gb.prototype,"getStack",Gb.prototype.getStack);
var Ib=new XRegExp("^ +at (?:(?<name0>\\S+) \\((?:unknown source|(?<url0>[^)]+?):(?<line0>\\d+):(?<char0>\\d+))\\)|(?:unknown source|(?<url1>[^)]+?):(?<line1>\\d+):(?<char1>\\d+)))$","mg"),Jb=new XRegExp("^(?<name0>[^(@]*)(?:\\((?<params0>[^)]+)\\))?@(?<url0>.+?):(?<line0>\\d+)$","mg");function Hb(a,b){for(var c=0,d=b+c;a.hasOwnProperty(d);c++,d=b+c)if(d=a[d],"string"===typeof d)return d;return k}
Gb.prototype.toString=function(){var a=this._name+": "+this._message,b=this.getStack();return a=b===k?a+"\n\t[stack trace not available]":a+("\n"+b.join("\n"))};q(Gb.prototype,"toString",Gb.prototype.toString);function Kb(a,b,c,d,f){this._name=a;this._params=b;this._url=c;this._lineNumber=d;this._charNumber=f}n=Kb.prototype;n.getName=m("_name");n.getParams=m("_params");n.getURL=m("_url");n.getLineNumber=m("_lineNumber");n.getCharNumber=m("_charNumber");
n.toString=function(){var a="\tat "+(this._name||"<anonymous>"),a=a+(this._params?"("+this._params.join(",")+")":"");return a=this._url?a+("("+this._url+(this._lineNumber?":"+this._lineNumber:"")+(this._charNumber?":"+this._charNumber:"")+")"):a+"(<unknown location>)"};function Lb(a){var b;Lb=b="function"===typeof GLOBAL.msSetImmediate?function(a){return GLOBAL.msSetImmediate(a)}:function(a){return GLOBAL.setTimeout(a,25)};b(a)}p("internal.setImmediate",Lb);function Mb(a){var b;Mb=b="function"===typeof GLOBAL.msClearImmediate?function(a){GLOBAL.msClearImmediate(a)}:function(a){GLOBAL.clearTimeout(a)};b(a)}p("internal.clearImmediate",Mb);p("internal.setEmergencyLogFunction",function(a){Nb=a});var Nb=k;
function Ob(a,b){var c="UNLOGGED ERROR\n\n"+a;if(b)try{c+="\n\n"+(new Gb(b)).toString()}catch(d){c+="\n\n"+b.message+"\n\t[error retrieving error info]"}Nb?Nb(c):GLOBAL.alert(c)}p("internal.emergencyLog",Ob);function Pb(a,b,c,d){this._command=a||g;this._condition=b;this._expireTime=new Date((new Date).valueOf()+c);this._timeoutCommand=d?d:Qb;this._result=new Ra;this._attemptIntervalHandle=k;this.notify()}p("internal.async.DelayedCall",Pb);function Qb(){return k}Pb.prototype.getPromise=function(){return this._result.getPromise()};q(Pb.prototype,"getPromise",Pb.prototype.getPromise);
Pb.prototype._firstAttempt=function(){var a=new Date>=this._expireTime;if(!Rb(this))a?Sb(this):this._attemptIntervalHandle=GLOBAL.setInterval(jQuery.proxy(this._nextAttempt,this),100)};Pb.prototype._nextAttempt=function(){var a=Rb(this),b=new Date>=this._expireTime;if(a||b)Tb(this),!a&&b&&Sb(this)};function Tb(a){if(a._attemptIntervalHandle)GLOBAL.clearInterval(a._attemptIntervalHandle),a._attemptIntervalHandle=k}
function Rb(a){if(a._condition&&a._condition.call(a)){try{a._result.success(a._command.call(a))}catch(b){a._result.failure(b)}return i}return l}function Sb(a){try{a._result.success(a._timeoutCommand.call(a))}catch(b){a._result.failure(b)}}Pb.prototype.notify=function(){new Date>=this._expireTime||(Tb(this),Lb(jQuery.proxy(this._firstAttempt,this)))};q(Pb.prototype,"notify",Pb.prototype.notify);function Ub(a,b,c){this._postCallback=a;this._stepCallback=b;this._completeCallback=c||k;this._timer=this._state=k}p("internal.async.Task",Ub);Ub.prototype.isRunning=function(){return this._state!==k};q(Ub.prototype,"isRunning",Ub.prototype.isRunning);Ub.prototype.post=function(a){a=this._postCallback.call(this,this._state,a);a=a===g?k:a;a!==k&&this._state===k&&(this.handleStart(),Vb(this));this._state=a};q(Ub.prototype,"post",Ub.prototype.post);
Ub.prototype.shutdown=function(){if(this._timer!==k){Mb(this._timer);if(this._completeCallback)this._completeCallback.call(this,this._state),this._state=k;else for(;this._state!==k;){var a=this._completeCallback.call(this,this._state);this._state=a===g?k:a}this.handleComplete()}};q(Ub.prototype,"shutdown",Ub.prototype.shutdown);
function Vb(a){a._timer=Lb(function(){a._timer=k;for(var b=(new Date).valueOf();a._state!==k&&100>(new Date).valueOf()-b;){var c=a._stepCallback.call(a,a._state);a._state=c===g?k:c}a._state!==k?Vb(a):a.handleComplete()})}Ub.prototype.handleStart=ga;q(Ub.prototype,"handleStart",Ub.prototype.handleStart);Ub.prototype.handleComplete=ga;q(Ub.prototype,"handleComplete",Ub.prototype.handleComplete);function Wb(){var a=this;Ub.call(this,function(a,c){if(c)return a=a||[],a.unshift([c]),a},function(a){for(var c=a[0],d=10,f;0<d--&&(f=c.pop());){var h=f.childNodes;if(0==h.length)Xb(f,i);else{c.push(f);for(var j=0,o=h.length;j<o;j++)c.push(h[j])}}for(;c&&0>=c.length;)a.shift(),c=a[0];if(0<a.length)return a},function(a){for(var c;c=a.shift();)Xb(c[0],l)});this._unloadListener=function(){a.shutdown()}}t(Wb,Ub);p("internal.ui.html.NodeDestroyer",Wb);
Wb.prototype.handleStart=function(){Wb._super.handleStart.call(this);jQuery(GLOBAL).one("unload",this._unloadListener)};q(Wb.prototype,"handleStart",Wb.prototype.handleStart);Wb.prototype.handleComplete=function(){jQuery(GLOBAL).off("unload",this._unloadListener);Wb._super.handleComplete.call(this)};q(Wb.prototype,"handleComplete",Wb.prototype.handleComplete);
function Xb(a,b){if(a){jQuery(a).remove();if(!b)try{a.innerHTML=""}catch(c){for(var d;d=a.lastChild;)Xb(d,l)}a.canHaveChildren&&"removeNode"in a&&a.removeNode(l)}}q(Wb,"removeAndDestroy",Xb);function Yb(a){Xb(a,l)}p("internal.ui.html.removeAndDestroy",Yb);var Zb=k;function $b(a){Zb||(Zb=new Wb);Zb.post(a)}p("internal.ui.html.removeAndDestroyAsync",$b);function ac(a,b){bc(b,function(){jQuery(a).append(b)})}p("internal.ui.html.appendKeepScripts",ac);function cc(a,b,c){bc(b,function(){c?jQuery(c).before(b):jQuery(a).append(b)})}p("internal.ui.html.insertKeepScripts",cc);
function bc(a,b){if(a){var c=[];_.each(a,function(a){1===a.nodeType&&("script"===a.tagName.toLowerCase()?c.push(a):c.push.apply(c,jQuery.makeArray(a.getElementsByTagName("script"))))});_.each(c,function(a){a.type=(jQuery(a).attr("type")!==g)+"/"+a.type.replace("script","-script")});b();_.each(c,function(a){var b=/^true\/(.*)/.exec(a.type);b?a.type=b[1].replace("-script","script"):a.removeAttribute("type")});_.each(c,function(a){if((!a.type||/\/(java|ecma)script/i.test(a.type))&&!jQuery.data(a,"wr-executed"))a.src?
jQuery.ajax({type:"GET",global:l,url:a.src,async:l,dataType:"script"}):jQuery.globalEval((a.text||a.textContent||a.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/")),jQuery.data(a,"wr-executed",i)})}}function dc(){function a(a){try{return b.call(this,a)}catch(d){e(new ra(d.message,d,a))}}if(jQuery.globalEval._wr_orig)return l;var b=jQuery.globalEval;a._wr_orig=b;jQuery.globalEval=a;return i}p("internal.ui.html.enableEvalErrorsCapture",dc);
function ec(){var a=jQuery.globalEval._wr_orig;if(a)jQuery.globalEval=a}p("internal.ui.html.disableEvalErrorsCapture",ec);var fc=[];function gc(){function a(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}var b=GLOBAL.document,c={openFunc:a(b,"open"),closeFunc:a(b,"close"),writeFunc:a(b,"write"),written:[]};fc.push(c);b.open=ba();b.close=ba();b.write=function(a){c.written.push(a)}}p("internal.ui.html.holdDocumentWrites",gc);
function hc(){var a=GLOBAL.document,b=fc.pop();if(!b)return[];b.openFunc!==g?a.open=b.openFunc:delete a.open;b.closeFunc!==g?a.close=b.closeFunc:delete a.close;b.writeFunc!==g?a.write=b.writeFunc:delete a.write;return b.written}p("internal.ui.html.restoreDocumentWrites",hc);var ic={fieldHandlers:[],addFieldHandler:function(a){a&&ic.fieldHandlers.push(a)}};p("internal.logic.AjaxRequestUtils",ic);
ic.addFieldHandler({accept:function(a){return GLOBAL.CKEDITOR&&!!GLOBAL.CKEDITOR.instances[a.name]},getter:function(a){return GLOBAL.CKEDITOR.instances[a.name].getData()},beforeRequest:function(){if(GLOBAL.CKEDITOR){var a=[];_.each(GLOBAL.CKEDITOR.instances,function(b){b instanceof GLOBAL.CKEDITOR.editor&&a.push(b)});_.each(a,function(a){jQuery(a.element.$).closest("html")[0]||a.destroy(i)})}}});ic.patchLibraries=ba();q(ic,"patchLibraries",ic.patchLibraries);
ic.submitForm=function(a,b,c,d){function f(){var a=j[0],d={},f=[];if(b)d.action=h.attr("action")||k,h.attr("action",Ga(d.action||"",a.extraActionParams));c&&_.each(c,function(a,b){var c=jQuery("<input/>").attr("type","hidden").attr("name",b).val(a);c.appendTo(h);f.push(c[0])});if(a.target)d.target=h.attr("target")||k,h.attr("target",a.target);h[0].submit();Lb(function(){var a=j.shift();_.each(d,function(a,b){a!==k?h.attr(b,a):h.removeAttr(b)});_.each(f,function(a){Yb(a)});a.result.success()})}var h=
jQuery(a),a={extraActionParams:b,extraInputs:c,target:d,result:new Ra},j=h.data("wr-hijacks");j||h.data("wr-hijacks",j=[]);j.push(a);if(d=1<j.length?j[j.length-2]:k)d.result.getPromise().onComplete(f);else f();return a.result.getPromise()};q(ic,"submitForm",ic.submitForm);function A(a,b){this._maxSize="number"===typeof b?b:Number.MAX_VALUE;this._timeout=1E4;this._ensureDispatch=l;this._objects=[];this._objectAvailableCondition=jQuery.proxy(function(){return 0<this._objects.length},this);this._timeoutCommand=jQuery.proxy(function(){this._ensureDispatch&&e(Error("No object available to dispatch to"));return k},this);this._iface=a||k}p("internal.util.coll.DispatchCollection",A);q(A,"DEFAULT_PRIORITY",0);A.prototype.getSize=function(){return this._objects.length};
q(A.prototype,"getSize",A.prototype.getSize);A.prototype.getMaxSize=m("_maxSize");q(A.prototype,"getMaxSize",A.prototype.getMaxSize);A.prototype.getTimeout=m("_timeout");q(A.prototype,"getTimeout",A.prototype.getTimeout);A.prototype.setTimeout=ca("_timeout");q(A.prototype,"setTimeout",A.prototype.setTimeout);A.prototype.isEnsureDispatch=m("_ensureDispatch");q(A.prototype,"isEnsureDispatch",A.prototype.isEnsureDispatch);A.prototype.setEnsureDispatch=ca("_ensureDispatch");
q(A.prototype,"setEnsureDispatch",A.prototype.setEnsureDispatch);A.prototype.add=function(a,b){b=b||0;la(this._iface,a);var c=-1,d=-1;jQuery.each(this._objects,function(f,h){0>c&&h.priority>b&&(c=f);0>d&&h.object===a&&(d=f)});0<=d||(this._objects.length>=this._maxSize&&e(new RangeError("Unable to add more than "+this._maxSize+" object(s)")),this._objects.splice(0>c?this._objects.length:c,0,{object:a,priority:b}))};q(A.prototype,"add",A.prototype.add);
A.prototype.remove=function(a){la(this._iface,a);var b=this;jQuery.each(this._objects,function(c,d){if(d.object===a)return b._objects.splice(c,1),l})};q(A.prototype,"remove",A.prototype.remove);A.prototype.clear=function(){this._objects=[]};q(A.prototype,"clear",A.prototype.clear);A.prototype.dispatchOne=function(a,b){var a=a||g,b=b||k,c;c=b!==k?_.find(this._objects,function(a){return b.apply(a.object)}):0<this._objects.length?this._objects[0]:k;return!c?this._timeoutCommand():a.apply(c.object)};
q(A.prototype,"dispatchOne",A.prototype.dispatchOne);A.prototype.dispatchAll=function(a,b){var a=a||g,b=b||k,c=l,d=[];(b!==k||0<this._objects.length)&&jQuery.each(this._objects,function(f,h){if(b===k||b.apply(h.object)){var j=a.apply(h.object);"undefined"!==typeof j&&d.push(j);c=i}});return!c?this._timeoutCommand():d};q(A.prototype,"dispatchAll",A.prototype.dispatchAll);
A.prototype.dispatchOneAsync=function(a,b,c){var a=a||g,b=b||k,c="number"===typeof c?c:this._timeout,d=this,f;f=b!==k?jQuery.proxy(function(){return _.find(this._objects,function(a){return b.apply(a.object)}||jc(i))!==k},this):this._objectAvailableCondition;return(new Pb(function(){return d.dispatchOne(a,b)},f,c,this._timeoutCommand)).getPromise()};q(A.prototype,"dispatchOneAsync",A.prototype.dispatchOneAsync);
A.prototype.find=function(a){var a=a||k,b;b=a!==k?_.find(this._objects,function(b){return a.apply(b.object)}):0<this._objects.length?this._objects[0]:k;return!b?this._timeoutCommand():b.object};q(A.prototype,"find",A.prototype.find);A.prototype.toString=function(){var a=A._super.toString.call(this),b="*";this._iface!==k&&(b=""+this._iface);return a+"<"+b+">["+this._objects.length+"]"};p("wr.DEBUG",i);p("wr.VERSION","7.2.12.20160224141925");var kc;p("wr.getBase",function(){kc||e(new x("Base URL not yet available"));return kc});var lc;function mc(){lc||e(new x("Boot parameters not yet available"));return lc}p("wr.getBootParams",mc);
function nc(){"function"!==typeof jQuery&&e(Error("JQuery library not loaded. Please ensure that jQuery JavaScript file is fully loaded before loading the WebRatio Runtime."));var a=jQuery.fn.jquery;0>oc(a,"1.7.1")&&e(Error("Incompatible JQuery library version found: "+a+". The WebRatio Runtime requires JQuery 1.7.1 or later."))}p("wr.checkEnvironment",nc);p("wr.getPlatform",function(){return oa()});function pc(){}p("wr.util.LifecycleListener",pc);pc.prototype.init=r;q(pc.prototype,"init",pc.prototype.init);pc.prototype.start=r;q(pc.prototype,"start",pc.prototype.start);pc.prototype.stop=r;q(pc.prototype,"stop",pc.prototype.stop);pc.prototype.dispose=r;q(pc.prototype,"dispose",pc.prototype.dispose);function qc(){}p("wr.util.StackEntry",qc);qc.prototype.getName=r;q(qc.prototype,"getName",qc.prototype.getName);qc.prototype.getParams=r;q(qc.prototype,"getParams",qc.prototype.getParams);qc.prototype.getURL=r;q(qc.prototype,"getURL",qc.prototype.getURL);qc.prototype.getLineNumber=r;q(qc.prototype,"getLineNumber",qc.prototype.getLineNumber);qc.prototype.getCharNumber=r;q(qc.prototype,"getCharNumber",qc.prototype.getCharNumber);var rc=new XRegExp("(?<num>[0-9]+)|(?<str>[^\\.\\s0-9]+)");function oc(a,b){function c(a){var b=[];XRegExp.forEach(""+(a||""),rc,function(a){a.num?b.push(Number(a.num)):b.push(a.str)});return b}for(var d=c(a),f=c(b),h=0,j=Math.max(d.length,f.length);h<j;h++){var o=d[h],s=f[h];o===g&&(o="number"===typeof s?0:"");s===g&&(s="number"===typeof o?0:"");if(o>s)return 1;if(o<s)return-1}return 0}p("wr.util.compareVersions",oc);var sc=new w;p("wr.util.emptyFunction",ga);
function jc(a){if(a===g)return ga;var b=sc.get(a);b||(b=function(){return a},sc.put(a,b));return b}p("wr.util.valueFunction",jc);p("wr.util.errorFunction",function(a,b){if("function"!==typeof a)a=GLOBAL.Error;var c=b?[b]:[];return function(){var b=ja(a.prototype);a.apply(b,c);e(b)}});function tc(a){a&&(a=a.replace(/([^a-zA-Z0-9\-_])/g,"\\$1"));return a}p("wr.util.escapeCss",tc);function uc(a){a&&(a=a.replace(/(['"\\])/g,"\\$1"));return a}p("wr.util.escapeCssString",uc);function vc(a){this._appenders=new A(pb);this._rethrowErrors=l;this._categoryLevels={};this._preservedEvents=a?[]:k;this.setLevel("",4)}p("wr.log.Manager",vc);vc.prototype.addAppender=function(a){this._appenders.add(a);if(this._preservedEvents!==k){var b=this;jQuery.each(this._preservedEvents,function(){wc(b,this)});this._preservedEvents=k}};q(vc.prototype,"addAppender",vc.prototype.addAppender);vc.prototype.removeAppender=function(a){this._appenders.remove(a)};q(vc.prototype,"removeAppender",vc.prototype.removeAppender);
vc.prototype.setRethrowErrors=ca("_rethrowErrors");q(vc.prototype,"setRethrowErrors",vc.prototype.setRethrowErrors);vc.prototype.stopPreserving=function(){this._preservedEvents=k};q(vc.prototype,"stopPreserving",vc.prototype.stopPreserving);vc.prototype.setLevel=function(a,b){a=a||"";b?this._categoryLevels[a]=b:(""===a&&e(new x("Root category logging level cannot be removed")),delete this._categoryLevels[a])};q(vc.prototype,"setLevel",vc.prototype.setLevel);
vc.prototype.getLog=function(a){var a=a||"",b=this;return{isErrorEnabled:function(){return xc(b,a,1)},error:function(c,d){b._log(a,1,c,d)},isWarnEnabled:function(){return xc(b,a,2)},warn:function(c,d){b._log(a,2,c,d)},isInfoEnabled:function(){return xc(b,a,3)},info:function(c,d){b._log(a,3,c,d)},isDebugEnabled:function(){return xc(b,a,4)},debug:function(c,d){b._log(a,4,c,d)}}};q(vc.prototype,"getLog",vc.prototype.getLog);
vc.prototype._log=function(a,b,c,d){try{var f=new yc(a,b,c,d?new Gb(d):k);if(this._preservedEvents!==k){this._preservedEvents.push(f);1>=b&&Ob(c,d);return}wc(this,f)}catch(h){Ob("Error logging",h)}d&&this._rethrowErrors&&e(d)};function wc(a,b){try{var c=zc(a,b.getCategory());b.getLevel()<=c&&a._appenders.dispatchAll(function(){this.append(b)})}catch(d){Ob("Error dispatching log event",d)}}function xc(a,b,c){a=zc(a,b);return c<=a?i:l}
function zc(a,b){for(;;){var c=a._categoryLevels[b];if(c)return c;b=b.substring(0,b.lastIndexOf("."))}}function yc(a,b,c,d){this._timestamp=new Date;this._category=a;this._level=b;this._message=c;this._errorInfo=d}n=yc.prototype;n.getTimestamp=m("_timestamp");n.getCategory=m("_category");n.getLevel=m("_level");n.getMessage=m("_message");n.getErrorInfo=m("_errorInfo");p("wr.log.ROOT_CATEGORY","");p("wr.log.CATEGORY_SEPARATOR",".");var Ac={isErrorEnabled:jc(l),isWarnEnabled:jc(l),isInfoEnabled:jc(l),isDebugEnabled:jc(l),error:ga,warn:ga,info:ga,debug:ga};p("wr.log.NULL_LOG",Ac);Ac.error=Ob;var B=new vc(i);p("wr.log.getManager",function(){return B});function Bc(a){this._iframe=a;this._usePseudoXML=l;this._contents=this._contentType=k}p("internal.util.IFrameAccessor",Bc);Bc.prototype._log=B.getLog("internal.util.IFrameAccessor");Bc.prototype.getIFrame=m("_iframe");q(Bc.prototype,"getIFrame",Bc.prototype.getIFrame);Bc.prototype.setUsePseudoXML=ca("_usePseudoXML");q(Bc.prototype,"setUsePseudoXML",Bc.prototype.setUsePseudoXML);Bc.prototype.getContentType=function(){var a=Cc(this);return"text/x-pseudo-xml"===a?"text/xml":a};
q(Bc.prototype,"getContentType",Bc.prototype.getContentType);function Cc(a){if(!a._contentType)a._contentType=Dc(a,a._iframe);return a._contentType}Bc.prototype.getContents=function(){if(!this._contents)this._contents=Ec(this);return this._contents.value};q(Bc.prototype,"getContents",Bc.prototype.getContents);Bc.prototype.getContentsAsText=function(){if(!this._contents)this._contents=Ec(this);return this._contents.text};q(Bc.prototype,"getContentsAsText",Bc.prototype.getContentsAsText);
function Ec(a){var b=Cc(a),c=Fc(a._iframe);"text/html"===b?(a=Gc(c),a={value:a,text:a.documentElement.outerHTML?a.documentElement.outerHTML:"<"+a.documentElement.tagName+">"+a.documentElement.innerHTML+"</"+a.documentElement.tagName+">"}):"text/xml"===b||"application/xml"===b?(a=Gc(c.XMLDocument||c),b=GLOBAL.XMLSerializer?(new GLOBAL.XMLSerializer).serializeToString(a):""+a.xml,a={value:a,text:b}):"text/x-pseudo-xml"===b?(b=c.documentElement.textContent||c.documentElement.innerText,a._log.debug("Parsing pseudo-XML"),
b="<"+b.substr(1),GLOBAL.DOMParser?a=(new GLOBAL.DOMParser).parseFromString(b,"text/xml"):(a=new GLOBAL.ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(b)),a={value:a,text:b}):"text/plain"===b?(a=c.documentElement.textContent||c.documentElement.innerText,a={value:a,text:a}):a={value:k,text:k};return a}var Hc=/^<head><\/head>\s*<body><pre[^>]*>[^><]+<\/pre><\/body>$/i;
function Dc(a,b){var c=Fc(b),d=c.documentElement;if(c.contentType)return a._usePseudoXML&&"text/plain"===c.contentType&&0===(d.textContent||d.innerText).indexOf("#?xml")?"text/x-pseudo-xml":c.contentType;if(c.xmlVersion||c.XMLDocument)return"text/xml";if(a._usePseudoXML&&0===(d.textContent||d.innerText).indexOf("#?xml"))return"text/x-pseudo-xml";if(a._usePseudoXML)c=c.documentMode,"number"===typeof c&&6>Number(c)&&a._log.warn("A frame is using IE Qurks Mode, possibly resulting in XML parse errors. This may be caused by an X-UA-Compatible header or meta tag");
return Hc.test(d.innerHTML)?"text/plain":"text/html"}function Fc(a){var b=a.contentDocument;if(!b)b=a.contentWindow.document;return b}function Gc(a){var b=a.cloneNode(i);b||(b=a.implementation.createDocument(a.documentElement.namespaceURI,a.documentElement.nodeName),b.replaceChild(b.importNode(a.documentElement,i),b.documentElement));return b};var Lc=function(){function a(a,b){var c={};_.each(b.useless||[],function(b){c[b]=function(){h.warn("Calling "+a+"."+b+" - Method has no more use")}});_.each(b.gone||[],function(b){c[b]=function(){h.warn("Calling "+a+"."+b+" - Method is no longer available")}});jQuery.extend(c,b.impl||{});return c}function b(a){"toObject"in a&&(a=a.toObject());return a||{}}function c(a,b){var c=GLOBAL.$H,d=GLOBAL.ajaxRequest;"function"!==typeof c||"function"!==typeof d?h.error("Functions '$H' and 'ajaxRequest' are required for using legacy utilities."):
(c=c(b||{}),d(a,c))}function d(a){return Ic(function(b){var c=this,d=jQuery.makeArray(arguments),f=Jc();f.isStarted()?a.apply(c,d):(h.debug("Delaying "+b.type+" handler fire to application startup"),f.addLifecycleListener({start:function(){f.removeLifecycleListener(this);a.apply(c,d)}}))})}function f(a){Kc.fireWith(GLOBAL,[a]);return a.isPropagationStopped()?(h.debug("Handling of "+a.type+" halted by custom interceptor"),i):l}var h=B.getLog("wr.LegacyUtils"),j=a("WRAjax",{useless:[],gone:["FrameRequest",
"XMLFrameTransport"],impl:{onReady:function(a){jQuery(GLOBAL.document).ready(Ic(function(){var b=Jc();b.isStarted()?a():b.addLifecycleListener({start:Ic(a)})}))}}}),o=a("WRAjaxRequestQueue",{useless:[],gone:"add,submitForm,start,sendRequest,remove,DTO".split(","),impl:{}}),s=a("WRAjaxRequestUtils",{useless:[],gone:"addRequest,removeRequest,startRequest,changeCursor,getResponsePage,computeRequest,processElement,processElementContent,updateElement,addFieldHandler,showNotification,clearNotification,addDroppable".split(","),
impl:{requestsQueue:o}}),W=a("WREvent",{useless:[],gone:["doEvent"],impl:{observe:function(){function a(h,j,o,s){var s=b(s),W=jQuery(h.target),M=h.type;if(!(d[M]===i&&f[M]===i)){if(W.data("ui-wrAutocomplete")){if("change"===M)return;"wrautocompletechange"===M&&(M="change")}(function(){f[M]=i;c(j+"FormBean",jQuery.extend({sourcePage:j,isForm:i,pressedLink:"button:"+o},{onCompleteCallBack:function(){f[M]=l}},s))})()}}var d={focus:i,blur:i,focusin:i,focusout:i},f={};a.bindAsEventListener=function(a){var b=
this,c=jQuery.makeArray(arguments).slice(1);return function(d){return b.apply(a,[d].concat(c))}};return a}()}}),M=a("WREventUtils",{useless:["updateFocusedElement","getFocusedElement","getLastFocusedField","forgetForm","saveFieldValue"],gone:["fieldValueChanged","getActiveAutocompleter"],impl:{observe:function(a,b,c){a=jQuery("#"+tc(a));"change"===b&&a.is(":text, :password")&&(b+=" wrautocompletechange");a.on(b,d(function(a){return f(a)?g:c(a)}))}}}),Ka=a("Form",{useless:[],gone:[],impl:{Element:a("Form.Element",
{useless:[],gone:[],impl:function(){function a(b,c,h,j){jQuery("#"+tc(c)).find(b+"[name='"+uc(h)+"']").each(function(){var a=jQuery(this);a.click(d(function(b){f(b)||j(a[0],a.val())}))})}return{RadioEventObserver:function(b,c,d){a(":radio",b,c,d)},CheckboxEventObserver:function(b,c,d){a(":checkbox",b,c,d)}}}()})}});return{WRAjax:j,WRAjaxRequestUtils:s,WRAjaxRequestQueue:o,WREvent:W,WREventUtils:M,Form:Ka}}();p("wr.LegacyUtils",Lc);var Kc=jQuery.Callbacks("unique");function Mc(){}p("wr.app.Loader",Mc);Mc.prototype._log=B.getLog("wr.app.Loader");var Nc={};Mc.prototype.load=function(a,b){var c=this._log,d=Oc[b];d||e(Error("Invalid type "+b));var f=Nc[a];if(!f){c.debug("Loading resource "+a);d=d(a);f=new $a(d);if(c.isDebugEnabled())f.onSuccess(function(){c.debug("Loaded resource "+a)}).onFailure(function(b){c.error("Failed to load resource "+a,b)});Nc[a]=f}return f};q(Mc.prototype,"load",Mc.prototype.load);
var Oc={script:function(a){return jQuery.ajax({url:a,dataType:"script",mimeType:"text/plain"})}};function C(){this._app=k;this._config={};this._handlers=new A(bb);this._handlers.setEnsureDispatch(i);this._savedFiles={}}t(C,Oa);p("wr.config.ConfigPlugin",C);C.prototype._log=B.getLog("wr.config.ConfigPlugin");C.prototype.getConfig=m("_config");q(C.prototype,"getConfig",C.prototype.getConfig);C.prototype.setConfig=ca("_config");q(C.prototype,"setConfig",C.prototype.setConfig);C.prototype.configure=function(a){return this.configureObjectsList(a,"handlers",function(){this._handlers.clear()},function(a){this.addHandler(a)})};
q(C.prototype,"configure",C.prototype.configure);C.prototype.addHandler=function(a){this._handlers.add(a)};q(C.prototype,"addHandler",C.prototype.addHandler);C.prototype.removeHandler=function(a){this._handlers.remove(a)};q(C.prototype,"removeHandler",C.prototype.removeHandler);
C.prototype.merge=function(a){var b=this._log,c=this,d=new Ra;try{var f=Pc(c,a,k),h=f.getRequiredFiles(a,k);if(0<h.length)c.mergeFiles.apply(c,h).onSuccess(function(){try{f.merge(c._config,a,k),d.success()}catch(b){d.failure(b)}}).onFailure(function(a){d.failure(a)});else f.merge(c._config,a,k),d.success()}catch(j){b.error("Error merging new configuration ",j),d.failure(j)}return d.getPromise()};q(C.prototype,"merge",C.prototype.merge);
C.prototype.mergeFiles=function(a){var b=this._log,c=this,d=jQuery.makeArray(arguments),f=[];b.debug("Loading files "+d);jQuery.each(d,function(a,d){var o=c._savedFiles[d];if(o)f.push(o);else{var s=new Ra,o=s.getPromise();c._savedFiles[d]=o;f.push(o);b.debug("Downloading file "+d);o=jQuery.ajax({url:d,mimeType:"text/plain"});(new $a(o)).onSuccess(function(a){try{var f=Pc(c,a,d),h=f.getRequiredFiles(a,d);if(0<h.length){var o=Fa(d);jQuery.each(h,function(a,b){h[a]=Ea(o,b)});c.mergeFiles.apply(c,h).onSuccess(function(){b.debug("Merging file "+
d);try{f.merge(c._config,a,d),s.success()}catch(h){b.error("Error merging file "+d,h),s.failure(h)}}).onFailure(function(a){b.error("Error loading file "+d,a);s.failure(a)})}else b.debug("Merging file "+d),f.merge(c._config,a,d),s.success()}catch($d){b.error("Error loading file "+d,$d),s.failure($d)}}).onFailure(function(a){b.error("Error downloading file "+d,a);s.failure(a)})}});return Sa.apply(y,f)};q(C.prototype,"mergeFiles",C.prototype.mergeFiles);
function Pc(a,b,c){return a._handlers.dispatchOne(function(){return this},function(){return this.accept(b,c)})}C.prototype.readInstanceFactory=function(a,b){return hb(a,b||k,this.getApp()._loader)};q(C.prototype,"readInstanceFactory",C.prototype.readInstanceFactory);C.prototype.readInstanceListFactory=function(a,b){return jb(a,b||k,this.getApp()._loader)};q(C.prototype,"readInstanceListFactory",C.prototype.readInstanceListFactory);function Qc(){this._appenders=[]}t(Qc,Oa);p("wr.log.LogPlugin",Qc);Qc.prototype.configure=function(a){var b=a.categories||{},c=this.getLogManager();b[""]||(b[""]=4);D(b,function(a,b){c.setLevel(b,a)});return this.configureObjectsList(a,"appenders",function(){for(var a=-1,b=this._appenders.length;++a<b;)this.removeAppender(this._appenders[a])},function(a,b){a.setup(b);this.addAppender(a)})};q(Qc.prototype,"configure",Qc.prototype.configure);Qc.prototype.init=function(){this.getLogManager().stopPreserving()};
q(Qc.prototype,"init",Qc.prototype.init);Qc.prototype.addAppender=function(a){this.getLogManager().addAppender(a);this._appenders.push(a)};q(Qc.prototype,"addAppender",Qc.prototype.addAppender);Qc.prototype.removeAppender=function(a){this.getLogManager().removeAppender(a);Ba(this._appenders,a)};q(Qc.prototype,"removeAppender",Qc.prototype.removeAppender);Qc.prototype.getLog=function(a){return this.getLogManager().getLog(a)};q(Qc.prototype,"getLog",Qc.prototype.getLog);Qc.prototype.getLogManager=function(){return B};
q(Qc.prototype,"getLogManager",Qc.prototype.getLogManager);function E(){this._routers=new A(xb);this._requests=[];this._serving=l;this._listeners=[]}t(E,Oa);p("wr.nav.NavPlugin",E);E.prototype._log=B.getLog("wr.nav.NavPlugin");E.prototype.configure=function(a){return this.configureObjectsList(a,"routers",function(){this._routers.clear()},function(a,c){this.addRouter(a,Number(c.priority)||g)})};q(E.prototype,"configure",E.prototype.configure);q(E,"DEFAULT_PRIORITY",0);E.prototype.addRouter=function(a,b){this._routers.add(a,-b||0)};
q(E.prototype,"addRouter",E.prototype.addRouter);E.prototype.removeRouter=function(a){this._routers.remove(a)};q(E.prototype,"removeRouter",E.prototype.removeRouter);E.prototype.navigate=function(a){var b=new Ra;this._requests.push({request:a,result:b});this._triggerListeners("requestEnqueue",a);if(!this._serving)this._serving=i,Rc(this);return b.getPromise()};q(E.prototype,"navigate",E.prototype.navigate);
E.prototype.cancel=function(a){var b=this;_.find(this._requests,function(c,d){if(c.request===a)return b._requests.splice(d,1),b._log.debug("Canceling "+a),b._triggerListeners("requestCancel",a),c.result.failure(Error("Canceled")),i})};q(E.prototype,"cancel",E.prototype.cancel);E.prototype.precompute=function(a){var b=l;this._routers.dispatchAll(function(){b||(b=this.precompute(a))});b||e(Error("Found no router implementing "+a))};q(E.prototype,"precompute",E.prototype.precompute);
function Rc(a){var b;do(b=a._requests[0])&&a._triggerListeners("requestBeforeServe",b.request);while(b&&b!==a._requests[0]);if(b){a._requests.shift();var c=b.request,d=b.result;a._log.isDebugEnabled()&&a._log.debug("Serving "+c);a._triggerListeners("requestServe",c);b=function(b,f,h){a._triggerListeners("requestSuccess",c,b,f,h);d.success(h);Rc(a)};var f=function(b,f){a._triggerListeners("requestFailure",c,b,f);d.failure(Error(b||"Failed"));Rc(a)};c.addSuccessListener(b);c.addFailureListener(f);try{var h=
l;a._routers.dispatchAll(function(){h||(a._triggerListeners("requestRoute",c,this),this.route(c),h=c.isStarted())});h||(a._log.error("Found no router implementing "+c),c.removeSuccessListener(b),c.removeFailureListener(f),e(Error("Not routed")));a._triggerListeners("requestStart",c)}catch(j){a._log.error("Error serving "+c,j),d.failure(j)}}else a._serving=l}E.prototype.addListener=function(a){a&&0>_.indexOf(this._listeners,a)&&this._listeners.push(a)};q(E.prototype,"addListener",E.prototype.addListener);
E.prototype.removeListener=function(a){Ba(this._listeners,a)};q(E.prototype,"removeListener",E.prototype.removeListener);E.prototype._triggerListeners=function(a,b){var c=this,d=jQuery.makeArray(arguments);d.shift();_.each(this._listeners,function(b){var h=b[a];if(h)try{h.apply(b,d)}catch(j){c._log.error("Error invoking '"+a+"' of navigation listener",j)}})};function F(a,b,c,d){a=Sc(a);this._url=a.url;this._params=jQuery.extend({},a.params)||{};jQuery.extend(this._params,b);this._inputs=jQuery.makeArray(c)||[];this._target=d;this._responseTypes=k;this._listeners={};this._completed=this._started=l}p("wr.nav.Request",F);F.prototype._log=B.getLog("wr.nav.Request");F.prototype.getURL=m("_url");q(F.prototype,"getURL",F.prototype.getURL);F.prototype.setURL=function(a){a=Sc(a);this._url=a.url;jQuery.extend(this._params,a.params)};q(F.prototype,"setURL",F.prototype.setURL);
function Sc(a){var a=parseUri(a),b=jQuery.deparam.querystring(a.query);a.query="";return{url:Da(a),params:b}}F.prototype.getParams=m("_params");q(F.prototype,"getParams",F.prototype.getParams);F.prototype.getInputs=m("_inputs");q(F.prototype,"getInputs",F.prototype.getInputs);F.prototype.isDeparting=function(){return this._target!==g};q(F.prototype,"isDeparting",F.prototype.isDeparting);F.prototype.getTarget=m("_target");q(F.prototype,"getTarget",F.prototype.getTarget);
F.prototype.setTarget=function(a){this.isDeparting()||e(new x("Cannot change target of non-departing requests"));this._target=a!==g?a:k};q(F.prototype,"setTarget",F.prototype.setTarget);F.prototype.getResponseTypes=function(){return this._responseTypes&&this._responseTypes.slice()};q(F.prototype,"getResponseTypes",F.prototype.getResponseTypes);F.prototype.setResponseTypes=function(a){this._responseTypes=0<arguments.length?jQuery.makeArray(arguments):k};q(F.prototype,"setResponseTypes",F.prototype.setResponseTypes);
F.prototype.isStarted=m("_started");q(F.prototype,"isStarted",F.prototype.isStarted);F.prototype.addStartListener=function(a){Tc(this,"start",a)};q(F.prototype,"addStartListener",F.prototype.addStartListener);F.prototype.removeStartListener=function(a){Uc(this,"start",a)};q(F.prototype,"removeStartListener",F.prototype.removeStartListener);F.prototype.start=function(){Vc(this,l,k);this._started=i;this._triggerListeners("start")};q(F.prototype,"start",F.prototype.start);F.prototype.isCompleted=m("_completed");
q(F.prototype,"isCompleted",F.prototype.isCompleted);F.prototype.addSuccessListener=function(a){Tc(this,"success",a)};q(F.prototype,"addSuccessListener",F.prototype.addSuccessListener);F.prototype.removeSuccessListener=function(a){Uc(this,"success",a)};q(F.prototype,"removeSuccessListener",F.prototype.removeSuccessListener);F.prototype.success=function(a,b,c){Vc(this,i,l);this._completed=i;this._triggerListeners("success",[a,b,c])};q(F.prototype,"success",F.prototype.success);
F.prototype.addFailureListener=function(a){Tc(this,"failure",a)};q(F.prototype,"addFailureListener",F.prototype.addFailureListener);F.prototype.removeFailureListener=function(a){Uc(this,"failure",a)};q(F.prototype,"removeFailureListener",F.prototype.removeFailureListener);F.prototype.failure=function(a,b){Vc(this,i,l);this._completed=i;this._triggerListeners("failure",[a,b])};q(F.prototype,"failure",F.prototype.failure);
function Tc(a,b,c){"function"===typeof c&&(a=a._getCallbacks(b,i),a.add(c),a._count++)}function Uc(a,b,c){var d=a._getCallbacks(b);d&&(c&&(d.remove(c),d._count--),(!c||0>=d._count)&&a._removeCallbacks(b))}F.prototype._triggerListeners=function(a,b){var c=this._getCallbacks(a);if(c)try{c.fireWith(this,b)}catch(d){this._log.error("Error handling "+a+" of request "+this,d)}};F.prototype._getCallbacks=function(a,b){var c=this._listeners,d=c[a];if(!d&&b)c[a]=d=jQuery.Callbacks("unique"),d._count=0;return d};
F.prototype._removeCallbacks=function(a){var b=this._listeners,c=b[a];c&&(c.empty(),delete b[a])};function Vc(a,b,c){b!==k&&a._started!==b&&e(new x("Request "+(b?"not":"already")+" started"));c!==k&&a._completed!==c&&e(new x("Request "+(c?"not":"already")+" completed"))}F.prototype.toString=function(){return"Request to "+this._url};var Wc=B.getLog("wr.ui.html"),Xc={blob:k,"boolean":"boolean",date:"Date",decimal:"number","float":"number",integer:"number",password:"string",string:"string",text:"string",time:"Date",timestamp:"Date",url:"string"};p("wr.ui.html.getScriptType",function(a){return Xc[a]});
function Yc(a){function b(a){return!jQuery(a).parents().andSelf().filter(function(){var a=jQuery(this);return!(a.is("div")&&"inline"===a.css("display"))&&("hidden"===a.attr("type")||a.is(":hidden"))}).length}var c=!isNaN(jQuery(a).attr("tabindex")),d=a.nodeName.toLowerCase();if("area"===d){c=a.parentNode;d=c.name;if(!a.href||!d||"map"!==c.nodeName.toLowerCase())return l;a=jQuery("img[usemap=#"+d+"]")[0];return!!a&&b(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||
c:c)&&b(a)}p("wr.ui.html.isFocusable",Yc);function Zc(a){Wc.isDebugEnabled()&&Wc.debug("Focusing element "+u(a));try{a.focus()}catch(b){Wc.warn("Element "+u(a)+" is not currently focusable")}}p("wr.ui.html.focus",Zc);
function $c(a){var b=ad(a);try{if("number"===typeof a.selectionStart)return{start:a.selectionStart};if("undefined"!==typeof b.selection&&"string"===typeof a.value){var c=b.selection.createRange();if(c&&c.parentElement()===a)return c.moveStart("character",-a.value.length),{start:c.text.length}}}catch(d){}return k}p("wr.ui.html.getSelectedRange",$c);
function bd(a,b){var c=ad(a);try{if("number"===typeof a.selectionStart)a.setSelectionRange(b.start,b.start);else if("undefined"!==typeof c.selection&&"string"===typeof a.value){var d=c.selection.createRange();d&&d.parentElement()===a&&(d.move("character",-a.value.length),d.move("character",b.start),d.select())}}catch(f){}}p("wr.ui.html.setSelectedRange",bd);
var cd=function(){var a=/\W/g;return function(b,c,d){if(c.replace(a,"")!==d.replace(a,""))return b;for(var f=0,h=Math.min(b.start,c.length,d.length),j=0,o=0;j<=h&&o<=h;j++,o++){var s=a.test(c[j]),W=a.test(d[o]);s!==W&&(s&&!W?(o--,j<b.start&&f--):(j--,f++))}return{start:Math.max(0,b.start+f)}}}();p("wr.ui.html.recomputeRange",cd);p("wr.ui.html.addRemoveListener",function(a,b){var c=GLOBAL.setInterval(function(){jQuery.contains(GLOBAL.document.documentElement,a)||(GLOBAL.clearInterval(c),b(a))},500)});
function ad(a){a=a&&a.ownerDocument;(!a||9!==a.nodeType)&&e(Error("Element must be part of a document"));return a};var dd=B.getLog("wr.ui.html.resx");function ed(a,b){var c=jQuery(a),d=c.attr("src")||c.attr("href"),f=c.data("wr-resname");return f?(d=c.data("wr-resver")||k,{name:f,version:d!==k?""+d:k,unloadable:fd(c)}):b&&d?{name:"_path-"+d,version:k,unloadable:fd(c)}:k}p("wr.ui.html.resx.getInfo",ed);function fd(a){var b=a[0].nodeName.toLowerCase();return"style"===b?i:"link"===b?"stylesheet"===a.attr("rel"):l}
p("wr.ui.html.resx.getLoaded",function(a){var b=_.clone(gd());a||_.each(_.keys(hd),function(a){delete b[a]});return b});
function id(a){var b=gd(),c=b[a.name];if(c)return c.version===a.version?dd.debug("Skipping loading of resource '"+a.name+"' (version "+(a.version||"unknown")+") since it is already loaded"):dd.warn("Blocked loading of conflicting resource '"+a.name+"': version "+(a.version||"unknown")+" was incoming, but version "+(c.version||"unknown")+" is already loaded"),l;b[a.name]=jQuery.extend({unloadable:l},a);return hd[a.name]=i}p("wr.ui.html.resx.registerLoading",id);
function jd(a){hd[a]!==i&&e(new x);delete hd[a];kd(a)}p("wr.ui.html.resx.registerLoaded",jd);function ld(){gd(i)}p("wr.ui.html.resx.refreshLoaded",ld);
var gd=function(){var a=k;return function(b){if(!a||b){a||(a={});var c=_.clone(a);jQuery("script, link, style").each(function(){var d=ed(this,i);if(d){if(!b||!a.hasOwnProperty(d.name))a[d.name]=d,kd(d.name);delete c[d.name]}});_.each(c,function(b){b.unloadable&&(dd.debug("Unloading resource '"+b.name+"' (version "+(b.version||"unknown")+") which is no longer in the document"),delete a[b.name])})}return a}}(),hd={},md={};
p("wr.ui.html.resx.addListener",function(a,b,c){(md[a]||(md[a]=jQuery.Callbacks("unique"))).add(b);c&&kd(a,b)});p("wr.ui.html.resx.removeListener",function(a,b){var c=md[a];c&&c.remove(b)});function kd(a,b){var c,d=gd()[a];d&&(b?b.apply(GLOBAL,[d]):(c=md[a])&&c.fireWith(GLOBAL,[d]))};function G(a){this._owner=a;this._objects=[];this._runningPhase=this._completedPhase=k;this._listeners=[]}p("wr.util.LifecycleManager",G);G.prototype._log=B.getLog("wr.util.LifecycleManager");G.prototype.getOwner=m("_owner");q(G.prototype,"getOwner",G.prototype.getOwner);var nd={};nd[k]=["init"];nd.init=["start","dispose"];nd.start=["stop"];nd.stop=["dispose","start"];nd.dispose=[];
var od={init:["init"],start:["init","start"],stop:["init"],dispose:[]},pd={init:["dispose"],start:["stop","dispose"],stop:["dispose"],dispose:[]};function qd(a,b){0>_.indexOf(nd[a._completedPhase],b)&&e(new x("Unable to transition to "+b+" phase after "+a._completedPhase+" phase"));a._log.debug("Running phase "+b);a._runningPhase=b;var c=a._objects.slice(0);return rd(a,[b],c).chain(function(){a._runningPhase=k;a._completedPhase=b;sd(a,b);a._log.debug("Completed phase "+b)})}
function td(a,b){var c=[b],d=ab,f=od[a._completedPhase];f&&(d=d.chain(function(){a._log.debug("Applying completed phases "+f+" to "+b);return rd(a,f,c)},g));a._runningPhase!==k&&(d=d.chain(function(){a._log.debug("Applying running phase "+a._runningPhase+" to "+b);return rd(a,[a._runningPhase],c)}));return d}function ud(a,b){var c=pd[a._completedPhase];return c?(a._log.debug("Applying future phases "+c+" to "+b),rd(a,c,[b])):ab}
function rd(a,b,c){for(var d=[],f=-1,h=c.length;++f<h;){for(var j=c[f],o=ab,s=-1,W=b.length;++s<W;){var M=b[s],Ka=j[M];"function"===typeof Ka&&(o=o.chain(function(){return Wa(Ka,j)}).onFailure(function(b){a._log.error("Error during "+M+" of "+j,b)}))}d.push(o)}return Sa.apply(y,d)}G.prototype.register=function(a){var b=this;if(!a)return ab;var c=l;jQuery.each(this._objects,function(b,f){if(f===a)return c=i,l});return c?ab:td(this,a).chain(function(){b._objects.push(a)})};
q(G.prototype,"register",G.prototype.register);G.prototype.unregister=function(a){var b=this;if(!a)return ab;var c=k;jQuery.each(this._objects,function(d,f){if(f===a)return b._objects.splice(d,1),c=a,l});return!c?ab:ud(this,c)};q(G.prototype,"unregister",G.prototype.unregister);G.prototype.addListener=function(a,b){if(a&&!_.contains(this._listeners,a)&&(this._listeners.push(a),b)){var c=od[this._completedPhase];c&&_.each(c,function(b){vd(this,a,b)},this)}};q(G.prototype,"addListener",G.prototype.addListener);
G.prototype.removeListener=function(a){a&&Ba(this._listeners,a)};q(G.prototype,"removeListener",G.prototype.removeListener);function sd(a,b){0<a._listeners.length&&a._log.debug("Invoking "+a._listeners.length+" "+b+" listeners");_.each(a._listeners,function(a){vd(this,a,b)},a)}function vd(a,b,c){c=b[c];if("function"===typeof c)try{c.call(b,a._owner)}catch(d){a._log.error("Error in lifecycle listener",d)}}G.prototype.init=function(){return qd(this,"init")};q(G.prototype,"init",G.prototype.init);
G.prototype.start=function(){return qd(this,"start")};q(G.prototype,"start",G.prototype.start);G.prototype.stop=function(){return qd(this,"stop")};q(G.prototype,"stop",G.prototype.stop);G.prototype.dispose=function(){return qd(this,"dispose")};q(G.prototype,"dispose",G.prototype.dispose);function wd(a){this._data={};this._size=0;a!==g&&this.setRootData(a)}p("wr.util.coll.DataTree",wd);wd.prototype.getSize=m("_size");q(wd.prototype,"getSize",wd.prototype.getSize);wd.prototype.getData=function(a){return this._data[(a?a+".":"")+"__"]};q(wd.prototype,"getData",wd.prototype.getData);wd.prototype.setData=function(a,b){var c=(a?a+".":"")+"__",d=this._data.hasOwnProperty(c);b!==g?(this._data[c]=b,d||this._size++):d&&(delete this._data[c],this._size--)};q(wd.prototype,"setData",wd.prototype.setData);
wd.prototype.getRootData=function(){return this.getData(k)};q(wd.prototype,"getRootData",wd.prototype.getRootData);wd.prototype.setRootData=function(a){this.setData(k,a)};q(wd.prototype,"setRootData",wd.prototype.setRootData);wd.prototype.getTree=function(a){var b=(a||"")+".",c=b.length,d=this._data,a={},f=0,h;for(h in d)d.hasOwnProperty(h)&&xd(d,h)&&0===h.indexOf(b)&&(a[h.substring(c)]=d[h],f++);h=new wd;h._data=a;h._size=f;return h};q(wd.prototype,"getTree",wd.prototype.getTree);
wd.prototype.setTree=function(a,b){var c=(a||"")+".",d=this._data,f;for(f in d)d.hasOwnProperty(f)&&xd(d,f)&&0===f.indexOf(c)&&(delete d[f],this._size--);if(b){var h=b._data;for(f in h)h.hasOwnProperty(f)&&xd(h,f)&&(d[c+f]=h[f],this._size++)}};q(wd.prototype,"setTree",wd.prototype.setTree);
wd.prototype.toString=function(){var a=jQuery.map(this._data,function(a,b){var f=b.split(".");f.pop();return{name:f.join("."),depth:f.length,data:a}});a.sort(function(a,b){return a.name<b.name?-1:1});var b=[wd._super.toString.call(this)];jQuery.each(a,function(a,d){0<d.depth&&b.push(_.str.repeat(">",d.depth)+" "+d.name);b.push(u(d.data))});return 0<b.length?b.join("\n"):"<empty tree>"};function yd(a,b){function c(a){var b=d.get(a);b||(b={o:[],n:[]},d.put(a,b));return b}var a=a||[],b=b||[],d=new w;jQuery.each(a,function(a,b){c(b).o.push(a)});jQuery.each(b,function(a,b){c(b).n.push(a)});var f=[],h=[];d.each(function(a,b){for(;b.n.length>b.o.length;){var c=b.n.pop();f.push({value:a,newIndex:c})}for(;b.o.length>b.n.length;)c=b.o.pop(),h.push({value:a,oldIndex:c})});return{added:f,removed:h}}p("wr.util.coll.computeArrayDiffs",yd);
function zd(a,b,c,d){if(c||d){var a=yd(a,b),f,h;if(c)for(b=-1,f=a.removed.length;++b<f;)h=a.removed[b],c(h.value,h.oldIndex);if(d)for(b=-1,f=a.added.length;++b<f;)h=a.added[b],d(h.value,h.newIndex)}}p("wr.util.coll.walkArrayDiffs",zd);function Ad(a){function b(){e(new ia("Array is unmodifiable"))}var c={};jQuery.each("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a,f){c[f]=b});return ja(a||[],c)}p("wr.util.coll.unmodifiableArray",Ad);function H(a,b,c){this._view=a;this._lastSubViews=k;this._indexes=b;this._subViewsSupported=c;this._eventListeners=this._contextRegistry=k}p("wr.ui.AbstractViewer",H);H.prototype.getView=m("_view");q(H.prototype,"getView",H.prototype.getView);H.prototype.getIndexes=function(){return Ad(this._indexes)};q(H.prototype,"getIndexes",H.prototype.getIndexes);H.prototype.setup=r;q(H.prototype,"setup",H.prototype.setup);H.prototype.destroy=function(){this._contextRegistry=k};q(H.prototype,"destroy",H.prototype.destroy);
H.prototype.isContextProvider=m("_subViewsSupported");q(H.prototype,"isContextProvider",H.prototype.isContextProvider);H.prototype.setContextRegistry=function(a){this.isContextProvider()||e(new ia("Not a context provider"));this._contextRegistry=a};q(H.prototype,"setContextRegistry",H.prototype.setContextRegistry);H.prototype.getContextRegistry=m("_contextRegistry");q(H.prototype,"getContextRegistry",H.prototype.getContextRegistry);H.prototype.refreshSubViews=ba();
q(H.prototype,"refreshSubViews",H.prototype.refreshSubViews);H.prototype.collectSubViewsDiffs=function(a){var a=a||this.getView().getViews(),b=[],c=[];zd(this._lastSubViews,a,function(a){c.push(a)},function(a){b.push(a)});this._lastSubViews=a.slice();return{added:b,removed:c}};q(H.prototype,"collectSubViewsDiffs",H.prototype.collectSubViewsDiffs);H.prototype.writeAttributes=ba();q(H.prototype,"writeAttributes",H.prototype.writeAttributes);H.prototype.readAttributes=function(){return{}};
q(H.prototype,"readAttributes",H.prototype.readAttributes);H.prototype.writeData=ba();q(H.prototype,"writeData",H.prototype.writeData);H.prototype.readData=ba();q(H.prototype,"readData",H.prototype.readData);H.prototype.addEventListener=function(a){if(a)(this._eventListeners||(this._eventListeners=jQuery.Callbacks("unique"))).add(a)};q(H.prototype,"addEventListener",H.prototype.addEventListener);H.prototype.removeEventListener=function(a){this._eventListeners&&(a?this._eventListeners.remove(a):this._eventListeners.empty())};
q(H.prototype,"removeEventListener",H.prototype.removeEventListener);H.prototype.raiseEvent=function(a,b){a&&this._eventListeners&&(b=b||this._view,this._eventListeners.fireWith(this,[a,b]))};q(H.prototype,"raiseEvent",H.prototype.raiseEvent);function Bd(a,b){H.call(this,a,b,i)}t(Bd,H);p("wr.ui.AbstractDisplayViewer",Bd);Bd.prototype.setup=function(){Cd(this)};q(Bd.prototype,"setup",Bd.prototype.setup);Bd.prototype.destroy=function(){Cd(this);Bd._super.destroy.call(this)};q(Bd.prototype,"destroy",Bd.prototype.destroy);Bd.prototype.refreshSubViews=function(){Cd(this)};q(Bd.prototype,"refreshSubViews",Bd.prototype.refreshSubViews);
function Cd(a){var b=a.collectSubViewsDiffs();jQuery.each(b.removed,function(b,d){a.destroyWindow(d)});jQuery.each(b.added,function(b,d){a.createWindow(d)})}Bd.prototype.createWindow=r;q(Bd.prototype,"createWindow",Bd.prototype.createWindow);Bd.prototype.destroyWindow=r;q(Bd.prototype,"destroyWindow",Bd.prototype.destroyWindow);function Dd(a,b){this._id=a;this._config=b;this._parent=k;this._views=[]}p("wr.ui.View",Dd);Dd.prototype.getId=m("_id");q(Dd.prototype,"getId",Dd.prototype.getId);Dd.prototype.getConfig=m("_config");q(Dd.prototype,"getConfig",Dd.prototype.getConfig);Dd.prototype.getParent=m("_parent");q(Dd.prototype,"getParent",Dd.prototype.getParent);
Dd.prototype.setParent=function(a){if(this._parent!==a&&!this._guard_setParent){this._guard_setParent=i;try{if(this._parent)this._parent.removeView(this),this._parent=k;if(a)a.addView(this),this._parent=a}finally{delete this._guard_setParent}}};q(Dd.prototype,"setParent",Dd.prototype.setParent);Dd.prototype.getViews=function(){return Ad(this._views)};q(Dd.prototype,"getViews",Dd.prototype.getViews);
Dd.prototype.addView=function(a){if(a&&!this._guard_addView){this._guard_addView=i;try{var b=a.getParent();b!==this&&(b&&e(new x("View has been already added to another view")),a.setParent(this),this._views.push(a))}finally{delete this._guard_addView}}};q(Dd.prototype,"addView",Dd.prototype.addView);
Dd.prototype.removeView=function(a){if(a&&!this._guard_removeView){this._guard_removeView=i;try{var b=a.getParent();if(b)b!==this&&e(new x("View is not part of this view")),a.setParent(k),this._views=jQuery.grep(this._views,function(b){return b!==a})||[]}finally{delete this._guard_removeView}}};q(Dd.prototype,"removeView",Dd.prototype.removeView);Dd.prototype.toString=m("_id");function Ed(a,b){H.call(this,a,b,i);this._box=k}t(Ed,H);p("wr.ui.web.BoxViewer",Ed);Ed.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));var c;var d=a.boxSelector,f=jQuery(b.document);f.find("html")[0]?(c=f.find(d).eq(0),c[0]||e(Error("No box element found")),c=c[0]):e(Error("Document type not supported"));this._box=c;this._refreshContexts(l)};q(Ed.prototype,"setup",Ed.prototype.setup);
Ed.prototype.destroy=function(){this._refreshContexts(i);this._box=k};q(Ed.prototype,"destroy",Ed.prototype.destroy);Ed.prototype._refreshContexts=function(){var a=this.getContextRegistry(),b=this._box,c=this.collectSubViewsDiffs(!b?[]:g);a&&($.each(c.removed,function(b,c){a.removeContext(c)}),b&&$.each(c.added,function(c,f){a.addContext(f,k,b)}))};Ed.prototype.readAttributes=function(){var a=Ed._super.readAttributes.call(this);a.open=!!this._box;return a};q(Ed.prototype,"readAttributes",Ed.prototype.readAttributes);
Ed.prototype.writeData=function(a){var b=this._box;if(b){var c=a&&a.title;c!==g&&jQuery(b).attr("title",c)}Ed._super.writeData.call(this,a)};q(Ed.prototype,"writeData",Ed.prototype.writeData);Ed.prototype.readData=function(){var a=Ed._super.readData.call(this)||{},b=this._box;b&&(a.title=jQuery(b).attr("title"));return a};q(Ed.prototype,"readData",Ed.prototype.readData);function Fd(a,b){Bd.call(this,a,b);this._window=k}t(Fd,Bd);p("wr.ui.web.BrowserViewer",Fd);Fd.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));this._window=b;Fd._super.setup.call(this,a,b)};q(Fd.prototype,"setup",Fd.prototype.setup);Fd.prototype.destroy=function(){this._window=k;Fd._super.destroy.call(this)};q(Fd.prototype,"destroy",Fd.prototype.destroy);Fd.prototype.createWindow=function(a){var b=this.getContextRegistry();b&&b.addContext(a,k,window)};
q(Fd.prototype,"createWindow",Fd.prototype.createWindow);Fd.prototype.destroyWindow=function(a){var b=this.getContextRegistry();b&&b.removeContext(a)};q(Fd.prototype,"destroyWindow",Fd.prototype.destroyWindow);function I(a,b){H.call(this,a,b,i);this._pendingAttributes=this._window=k;this._autoResize=l}t(I,H);p("wr.ui.web.WindowViewer",I);I.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));this._window=b;this._refreshContexts(l)};q(I.prototype,"setup",I.prototype.setup);I.prototype.destroy=function(){Gd(this,l);this._refreshContexts(i);this._window=k;I._super.destroy.call(this)};q(I.prototype,"destroy",I.prototype.destroy);
I.prototype._refreshContexts=function(a){var b=this.getContextRegistry(),c=this.getWindow(),d=this.collectSubViewsDiffs(!c?[]:g);if(b){jQuery.each(d.removed,function(a,c){b.removeContext(c)});var f=!a&&c&&c.document;f&&jQuery.each(d.added,function(a,c){b.addContext(c,k,f)})}};
I.prototype.writeAttributes=function(a){var b=this.getWindow(),c=a&&a.open;c!==g&&(Gd(this,c),b=this.getWindow());if(b&&a){var c=a.width,d=a.height;if(c!==g||d!==g)b.resizeTo(c||b.outerWidth,d||b.outerHeight);b=a.autoResize;if(b!==g)this._autoResize=b}else if(a)this._pendingAttributes=this._pendingAttributes||{},jQuery.extend(this._pendingAttributes,a),delete this._pendingAttributes.open;I._super.writeAttributes.call(this,a)};q(I.prototype,"writeAttributes",I.prototype.writeAttributes);
I.prototype.readAttributes=function(){var a=I._super.readAttributes.call(this),b=this.getWindow();b?(a.width=b.outerWidth,a.height=b.outerHeight,a.autoResize=this._autoResize):this._pendingAttributes&&jQuery.extend(a,this._pendingAttributes);a.open=!!b;return a};q(I.prototype,"readAttributes",I.prototype.readAttributes);
I.prototype.writeData=function(a){var b=this.getWindow();if(b){var c=a&&a.title;if(c!==g){var d=b&&b.document;if(d&&"string"===typeof d.title)d.title=c||""}}I._super.writeData.call(this,a);this._autoResize&&"function"===typeof b.sizeToContent&&b.sizeToContent()};q(I.prototype,"writeData",I.prototype.writeData);I.prototype.readData=function(){var a=I._super.readData.call(this)||{},b=this.getWindow();if(b)b=b&&b.document,a.title=b&&b.title||k;return a};q(I.prototype,"readData",I.prototype.readData);
I.prototype.getWindow=m("_window");q(I.prototype,"getWindow",I.prototype.getWindow);function Gd(a,b){var c=!!a.getWindow();if(b!==c){if(b){if(a.openWindow(),a._pendingAttributes)a.writeAttributes(a._pendingAttributes),a._pendingAttributes=k}else a._pendingAttributes=a.readAttributes(),delete a._pendingAttributes.open,a.closeWindow();a._refreshContexts(l)}}I.prototype.openWindow=ba();q(I.prototype,"openWindow",I.prototype.openWindow);I.prototype.closeWindow=ba();q(I.prototype,"closeWindow",I.prototype.closeWindow);function J(a,b){H.call(this,a,b,i);this._name=[a._id,"_",b?b.join(","):"","_"].join("");this._$dialog=k;this._autoResize=this._focused=l}t(J,H);p("wr.ui.jquery.AbstractDialogViewer",J);J.prototype.setup=function(a,b){jQuery.isWindow(b)||e(Error("Context must be a browser window"));this._$dialog=this.createDialog();this._refreshContexts(l);this._$dialog.parent(".ui-dialog").on("focusin.wr focusout.wr",jQuery.proxy(this._stopEvent,this))};q(J.prototype,"setup",J.prototype.setup);
J.prototype.destroy=function(){this.closeDialog();this._$dialog.parent(".ui-dialog").off("focusin.wr focusout.wr",this._stopEvent);this._refreshContexts(i);this._$dialog.dialog("destroy");Yb(this._$dialog[0]);this._$dialog=k};q(J.prototype,"destroy",J.prototype.destroy);J.prototype.refreshSubViews=function(){this._refreshContexts(l)};q(J.prototype,"refreshSubViews",J.prototype.refreshSubViews);
J.prototype._refreshContexts=function(a){var b=this.getContextRegistry(),c=this.getDialog(),d=this.collectSubViewsDiffs(!c.dialog("isOpen")?[]:g);if(b){jQuery.each(d.removed,function(a,c){b.removeContext(c)});var f=!a?c[0]:k;f&&jQuery.each(d.added,function(a,c){b.addContext(c,k,f)})}};J.prototype._stopEvent=function(a){a.stopPropagation()};J.prototype.getDialog=function(){this._$dialog||e(new x("Dialog not available"));return this._$dialog};q(J.prototype,"getDialog",J.prototype.getDialog);
J.prototype.createDialog=function(){var a=this;return jQuery("<div/>").dialog({autoOpen:l,open:function(){a.raiseEvent("open")},close:function(){a.raiseEvent("close");a.closeDialog()},focus:function(){if(!a._focused)a._focused=i,a.raiseEvent("focus")}})};q(J.prototype,"createDialog",J.prototype.createDialog);J.prototype.openDialog=function(){var a=this.getDialog();jQuery(a[0].ownerDocument).on("focusin.wr"+this._name+" click.wr"+this._name,jQuery.proxy(this._handleDocumentInteraction,this));a.dialog("open")};
q(J.prototype,"openDialog",J.prototype.openDialog);J.prototype.closeDialog=function(){var a=this._$dialog;if(a)a.dialog("isOpen")&&a.dialog("close"),jQuery(a[0].ownerDocument).off("focusin.wr"+this._name+" click.wr"+this._name,this._handleDocumentInteraction),a.empty(),this._focused=l,this.raiseEvent("blur")};q(J.prototype,"closeDialog",J.prototype.closeDialog);
J.prototype._handleDocumentInteraction=function(a){if(this._focused&&jQuery(a.target).closest(".ui-dialog")[0]!==this.getDialog().closest(".ui-dialog")[0])this._focused=l,this.raiseEvent("blur")};
J.prototype.writeAttributes=function(a){var b=this.getDialog(),c=a&&a.open;if(c!==g){var d=b.dialog("isOpen");c&&!d?this.openDialog():!c&&d&&this.closeDialog();this._refreshContexts(l)}c=a&&a.modal;c!==g&&b.dialog("option","modal",!!c);c=a&&a.showEffect;c!==g&&b.dialog("option","show",Eb(c));c=a&&a.hideEffect;c!==g&&b.dialog("option","hide",Eb(c));c=a&&a.autoResize;if(c!==g)this._autoResize=c,Hd(this);this._autoResize||(c=a&&a.width,c!==g&&b.dialog("option","width",Number(c)),c=a&&a.height,c!==g&&
b.dialog("option","height",Number(c)));c=a&&a.resizable;c!==g&&b.dialog("option","resizable",!!c);c=a&&a.draggable;c!==g&&b.dialog("option","draggable",!!c);c=a&&a.className;c!=g&&b.dialog("option","dialogClass",c);J._super.writeAttributes.call(this,a)};q(J.prototype,"writeAttributes",J.prototype.writeAttributes);
J.prototype.readAttributes=function(){var a=J._super.readAttributes.call(this),b=this.getDialog();a.open=!!b.dialog("isOpen");a.modal=b.dialog("option","modal");a.showEffect=Fb(""+b.dialog("option","show"));a.hideEffect=Fb(""+b.dialog("option","hide"));a.autoResize=this._autoResize;a.width=Number(b.dialog("option","width"));a.height=Number(b.dialog("option","height"));a.resizable=b.dialog("option","resizable");a.draggable=b.dialog("option","draggable");a.className=b.dialog("option","dialogClass");
return a};q(J.prototype,"readAttributes",J.prototype.readAttributes);J.prototype.writeData=function(a){J._super.writeData(a);if(a){var b=this.getDialog(),c=a.title;c!==g&&b.dialog("option","title",c);a=a.content;a!==g&&(b.html(a),Hd(this))}};q(J.prototype,"writeData",J.prototype.writeData);J.prototype.readData=function(){var a=J._super.readData()||{},b=this.getDialog();a.title=b.dialog("option","title");return a};q(J.prototype,"readData",J.prototype.readData);
function Hd(a){if(a._autoResize){var b=a.getDialog();b.dialog("option",{width:10,height:"auto"});b.find("img").filter(function(){return!this.complete}).one("load",function(){Hd(a)});for(var c=b.outerWidth()-b.width(),d=jQuery(GLOBAL).width(),f,h;;){f=b[0].scrollWidth;h=b.width();var j=Math.min(d,f+c);if(Math.abs(f-h)<=c||j>=d)break;b.dialog("option",{width:j,height:"auto"})}c=b.dialog("option","position");b.dialog("option","position",c)}};function Id(a,b){J.call(this,a,b);this._extendedAttributes={maximize:l,minimize:l}}t(Id,J);p("wr.ui.jquery.DialogViewer",Id);Id.prototype.createDialog=function(){var a=Id._super.createDialog.call(this);a.dialog("option",{width:200,height:300,resizable:l,draggable:l,closeOnEscape:l});a=a.dialogExtend(this._extendedAttributes);Jd(a);Kd(a).hide();return a};q(Id.prototype,"createDialog",Id.prototype.createDialog);
function Jd(a){var b=new function(a){function b(d){return a.test(d)?g:f.call(this,d)}var f=jQuery.error;this.enable=function(){jQuery.error=b};this.disable=function(){jQuery.error=f}}(/^cannot call methods on draggable prior to initialization\b.+$/);a.on("beforeMaximize.dialogExtend",jQuery.proxy(b.enable,b));a.on("maximize.dialogExtend",jQuery.proxy(b.disable,b));a.on("beforeMinimize.dialogExtend",jQuery.proxy(b.enable,b));a.on("minimize.dialogExtend",jQuery.proxy(b.disable,b))}
function Kd(a){return a.parents(".ui-dialog").find(".ui-dialog-titlebar-close")}Id.prototype.writeAttributes=function(a){var b=this.getDialog(),c=a&&a.maximizable,d=a&&a.minimizable;if(c!==g||d!==g)c!==g&&(this._extendedAttributes.maximize=!!c),d!==g&&(this._extendedAttributes.minimize=!!d),b.dialogExtend(this._extendedAttributes);c=a&&a.closable;c!==g&&(d=Kd(b),c?d.show():d.hide(),b.dialog("option","closeOnEscape",!!c));Id._super.writeAttributes.call(this,a)};q(Id.prototype,"writeAttributes",Id.prototype.writeAttributes);
Id.prototype.readAttributes=function(){var a=Id._super.readAttributes.call(this),b=this.getDialog();a.maximizable=this._extendedAttributes.maximize;a.minimizable=this._extendedAttributes.minimize;a.closable=Kd(b).is(":visible");return a};q(Id.prototype,"readAttributes",Id.prototype.readAttributes);function Ld(a,b){J.call(this,a,b)}t(Ld,J);p("wr.ui.jquery.WaitDialogViewer",Ld);Ld.prototype.createDialog=function(){var a=Ld._super.createDialog.call(this);a.siblings(".ui-dialog-titlebar").hide();a.prepend(jQuery("<div/>").addClass("progress"));a.dialog("option",{closeOnEscape:l,draggable:l,resizable:l,modal:i});return a};q(Ld.prototype,"createDialog",Ld.prototype.createDialog);Ld.prototype.writeData=function(a){Ld._super.writeData.call(this,a);a&&a&&a.content&&this.getDialog().append(jQuery("<div/>").addClass("progress"))};
q(Ld.prototype,"writeData",Ld.prototype.writeData);function Md(a,b){I.call(this,a,b);this._secondaryWindowName=[a._id,"[",b?b.join(","):"","]"].join("");this._fixedAttributes=this._secondaryWindow=k;this.writeAttributes({width:200,height:300})}t(Md,I);p("wr.ui.web.SecondaryWindowViewer",Md);Md.prototype.getWindow=m("_secondaryWindow");q(Md.prototype,"getWindow",Md.prototype.getWindow);
Md.prototype.openWindow=function(){var a=this,b=Md._super.getWindow.call(this),c=this.readAttributes(),d=[];d.push("left=200");d.push("top=100");c.width&&d.push("width="+c.width);c.height&&d.push("height="+c.height);d.push("resizable="+(c.resizable?"yes":"no"));d.push("dialog="+(c.maximizable?"no":"yes"));d.push("minimizable="+(c.minimizable?"yes":"no"));this._fixedAttributes={};this._fixedAttributes.resizable=c.resizable;this._fixedAttributes.minimizable=c.minimizable;this._fixedAttributes.maximizable=
c.maximizable;var f=b.open(k,this._secondaryWindowName,d.join(","));jQuery(f).on("unload",function(){Lb(function(){if(f.closed)a.raiseEvent("close"),a._secondaryWindow=k,a._fixedAttributes=k})});jQuery(f).focus(function(){a.raiseEvent("focus")});this.raiseEvent("open");this._secondaryWindow=f};q(Md.prototype,"openWindow",Md.prototype.openWindow);Md.prototype.closeWindow=function(){this._secondaryWindow&&this._secondaryWindow.close()};q(Md.prototype,"closeWindow",Md.prototype.closeWindow);
Md.prototype.writeAttributes=function(a){a&&this._fixedAttributes&&D(this._fixedAttributes,function(b,c){var d=a&&a[c];d!==g&&d!==b&&e(new x("Cannot change attribute '"+c+"' at this time"))});Md._super.writeAttributes.call(this,a)};q(Md.prototype,"writeAttributes",Md.prototype.writeAttributes);Md.prototype.readAttributes=function(){var a=Md._super.readAttributes.call(this);this._fixedAttributes&&jQuery.extend(a,this._fixedAttributes);return a};q(Md.prototype,"readAttributes",Md.prototype.readAttributes);function Nd(a){return 9===a.nodeType?i:l}p("wr.util.dom.isDocument",Nd);function Od(a){return 1===a.nodeType?i:l}p("wr.util.dom.isElement",Od);function Pd(a,b){var c=jQuery(a);return b?(c=c.find(b),c.not(c.find(b))):c.children()}p("wr.util.dom.findImmediateDescendants",Pd);function K(){w.call(this);this._id="wr:"+Qd++ +":safeMap";this._elementKeys=[]}t(K,w);p("internal.util.coll.SafeMap",K);var Qd=0;K.prototype.put=function(a,b){if(Od(a)){var c=jQuery.data(a);"undefined"===typeof c[this._id]&&this._elementKeys.push(a);var d=c[this._id];c[this._id]=b;return d}return K._super.put.call(this,a,b)};q(K.prototype,"put",K.prototype.put);K.prototype.putAll=function(a){var b=this;a.each(function(a,d){b.put(a,d)})};q(K.prototype,"putAll",K.prototype.putAll);
K.prototype.remove=function(a){if(Od(a)){var b=jQuery.data(a,this._id);jQuery.removeData(a,this._id);this._elementKeys=jQuery.grep(this._elementKeys,function(b){return b!==a});return b}return K._super.remove.call(this,a)};q(K.prototype,"remove",K.prototype.remove);K.prototype.clear=function(){for(var a=-1,b=this._elementKeys.length;++a<b;)jQuery.removeData(this._elementKeys[a],this._id);this._elementKeys=[];K._super.clear.call(this)};q(K.prototype,"clear",K.prototype.clear);
K.prototype.isEmpty=function(){return 0===this._elementKeys.length&&K._super.isEmpty.call(this)};q(K.prototype,"isEmpty",K.prototype.isEmpty);K.prototype.getSize=function(){return this._elementKeys.length+K._super.getSize.call(this)};q(K.prototype,"getSize",K.prototype.getSize);K.prototype.containsKey=function(a){if(K._super.containsKey.call(this,a))return i;for(var b=-1,c=this._elementKeys.length;++b<c;)if(this._elementKeys[b]===a)return i;return l};q(K.prototype,"containsKey",K.prototype.containsKey);
K.prototype.containsValue=function(a){if(K._super.containsValue.call(this,a))return i;for(var b=-1,c=this._elementKeys.length;++b<c;)if(jQuery.data(this._elementKeys[b],this._id)===a)return i;return l};q(K.prototype,"containsValue",K.prototype.containsValue);K.prototype.get=function(a){return Od(a)?jQuery.data(a,this._id):K._super.get.call(this,a)};q(K.prototype,"get",K.prototype.get);
K.prototype.getKeys=function(){var a=[].concat(this._elementKeys);Array.prototype.push.apply(a,K._super.getKeys.call(this));return Ad(a)};q(K.prototype,"getKeys",K.prototype.getKeys);K.prototype.getValues=function(){for(var a=[],b=-1,c=this._elementKeys.length;++b<c;){var d=jQuery.data(this._elementKeys[b],this._id);a.push(d)}Array.prototype.push.apply(a,K._super.getValues.call(this));return Ad(a)};q(K.prototype,"getValues",K.prototype.getValues);
K.prototype.getEntries=function(){for(var a=[],b=-1,c=this._elementKeys.length;++b<c;){var d=this._elementKeys[b],f=jQuery.data(d,this._id);a.push({key:d,value:f})}Array.prototype.push.apply(a,K._super.getEntries.call(this));return Ad(a)};q(K.prototype,"getEntries",K.prototype.getEntries);K.prototype.each=function(a){if(a){for(var b=-1,c=this._elementKeys.length;++b<c;){var d=this._elementKeys[b],f=jQuery.data(d,this._id);a(d,f)}K._super.each.call(this,a)}};q(K.prototype,"each",K.prototype.each);function L(a,b,c){H.call(this,a,b,c);this._lastFocusedElementId=this._context=k;this._focused=l}t(L,H);p("wr.ui.html.AbstractHtmlViewer",L);L.prototype._log=B.getLog("wr.ui.html.AbstractHtmlViewer");L.prototype.setup=function(a,b){Od(b)||e(Error("Context must be an HTML DOM element"));this._context=b;jQuery(this._context).on("focusin focusout click keypress",jQuery.proxy(this._handleFocusEvents,this))};q(L.prototype,"setup",L.prototype.setup);
L.prototype.destroy=function(){jQuery(this._context).off("focusin focusout click keypress",this._handleFocusEvents);this._context=k;L._super.destroy.call(this)};q(L.prototype,"destroy",L.prototype.destroy);L.prototype.getContext=function(){this._context||e(new x("Context not available"));return this._context};q(L.prototype,"getContext",L.prototype.getContext);L.prototype.raiseEventForHtmlEvent=function(a,b,c){c&&Rd(c,"uiEventRaised")&&this.raiseEvent(a,b)};q(L.prototype,"raiseEventForHtmlEvent",L.prototype.raiseEventForHtmlEvent);
function Rd(a,b){function c(a,b){var c=a.originalEvent||a;"string"===typeof c.data?c.data=(c.data?c.data+",":"")+b:(c.__wr_eventTags||(c.__wr_eventTags={}))[b]=i}return!function(a,b){var c=a.originalEvent||a;return"string"===typeof c.data?0<=_.indexOf(c.data.split(","),b):(c.__wr_eventTags||(c.__wr_eventTags={}))[b]===i}(a,b)?(c(a,b),i):l}
L.prototype._handleFocusEvents=function(a){if(Rd(a,"focusTracked")){var b=jQuery(a.target),c=b.attr("id")||k,d="click"===a.type||"keypress"===a.type||"focusin"===a.type,f="focusin"==a.type||"focusout"==a.type;if(f||Yc(b[0])){if(d!==this._focused||d&&c!==this._lastFocusedElementId)c?this._log.debug("["+this.getView()._id+"] Focus "+(d?"received":"lost")+" by element '"+c+"'"):this._log.debug("["+this.getView()._id+"] Focus "+(d?"received":"lost")+" by element with no id "+u(b[0]));this._focused=!!d;
if(d)this._lastFocusedElementId=c||k,f?this.raiseEventForHtmlEvent("focus",this.getView(),a):this.raiseEvent("focus",this.getView())}}};L.prototype.getLastFocusedElement=function(){var a;if(this._lastFocusedElementId){a=jQuery("#"+tc(this._lastFocusedElementId));if(0<a.length)return a[0];this._lastFocusedElementId=k}return k};q(L.prototype,"getLastFocusedElement",L.prototype.getLastFocusedElement);L.prototype.isFocused=m("_focused");q(L.prototype,"isFocused",L.prototype.isFocused);
L.prototype.writeAttributes=function(a){if((a&&a.focused)===i){var b=this.getLastFocusedElement();b||jQuery(this._context).find(":input:not(:submit)").each(function(){if(Yc(this))return b=this,l});b&&Zc(b)}L._super.writeAttributes.call(this,a)};q(L.prototype,"writeAttributes",L.prototype.writeAttributes);L.prototype.readAttributes=function(){var a=L._super.readAttributes.call(this);a.focused=this.isFocused();return a};q(L.prototype,"readAttributes",L.prototype.readAttributes);function xa(a,b,c){var d;xa=d=oa().supportsPropertyDefinition()?function(a,b,c){(c.get||c.set)&&e(new TypeError("Accessor properties not supported"));Object.defineProperty(a,b,c)}:function(a,b,c){(!a||!c)&&e(new ReferenceError);(c.get||c.set)&&e(new TypeError("Accessor properties not supported"));var d=a.__wr_property_definitions;d||(a.__wr_property_definitions=d={});var s=d[b];s?s.configurable||e(new TypeError("Property is not configurable")):d[b]=s={writable:l,enumerable:l,configurable:l};jQuery.extend(s,
c);a[b]=s.value};d(a,b,c)}p("wr.util.obj.defineProperty",xa);function Sd(a,b){if(a===k||a===g||b===k||b===g)return i;b=""+b;if(!Object.prototype.hasOwnProperty.call(a,b))return i;var c;try{if(c=delete a[b],c!==Object.prototype.hasOwnProperty.call(a,b))return c}catch(d){}try{return a[b]=g,i}catch(f){return l}}p("wr.util.obj.deleteProperty",Sd);
function xd(a,b){var c;xd=c=oa().supportsPropertyDefinition()?da(i):function(a,b){if("__wr_property_definitions"===b)return l;var c=a&&a.__wr_property_definitions;return(c=c&&c[b])?!!c.enumerable:i};return c(a,b)}p("wr.util.obj.isLoopedPropertyEnumerable",xd);function Td(a,b){if(a){var c=a.split("."),d=b||GLOBAL;try{for(var f;c.length&&(f=c.shift());)d=d[f]}catch(h){h instanceof TypeError&&(h=new TypeError(""+a+" is undefined")),e(h)}return d}}p("wr.util.obj.lookup",Td);
function Ud(a){var b;Ud=b="function"===typeof Object.keys?Object.keys:function(a){("object"!==typeof a&&"function"!==typeof a||a===k)&&e(new TypeError);var b=[],f;for(f in a)Object.prototype.hasOwnProperty.call(a,f)&&xd(a,f)&&b.push(f);return b};return b(a)}p("wr.util.obj.keys",Ud);function D(a,b){var c;D=c=oa().supportsPropertyDefinition()?function(a,b){_.each(a,b)}:function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&xd(a,c)&&b(a[c],c)};c(a,b)}p("wr.util.obj.each",D);
function Vd(a,b,c){if(!a||!b||!jQuery.isPlainObject(a)||!jQuery.isPlainObject(b))return a;c===i?jQuery.extend(i,a,b):0<c?D(b,function(b,f){"undefined"!==typeof b&&(jQuery.isPlainObject(a[f])&&jQuery.isPlainObject(b)?Vd(a[f],b,c-1):a[f]=b)}):jQuery.extend(a,b);return a}p("wr.util.obj.extend",Vd);var Wd=new w;new w;
function Xd(a){a||e(new TypeError("Invalid enumeration type"));var b=Wd.get(a);if(!b){var b=[],c=[],d=new w,f;for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&xd(a,f)){var h=a[f];"function"!==typeof h&&(b.push(f),c.push(h),d.put(h,f))}b={names:b,values:c,namesByValue:d};Wd.put(a,b)}return b}function Yd(a){return Xd(a).values}p("wr.util.obj.getEnumValues",Yd);p("wr.util.obj.getEnumNames",function(a){return Xd(a).names});
function Zd(a,b){var c=Xd(a).namesByValue.get(b);c||e(new TypeError("Invalid constant value '"+b+"' for enumeration type "+a));return c||k}p("wr.util.obj.getEnumName",Zd);function be(a,b){this.readyState=0;this.onreadystatechange=k;this.status=0;this.statusText="";this.responseXML=this.responseText=k;this._$form=jQuery(a);this._formInputs=b;this._accessor=this._$iframe=k;this._error=this._complete=this._sending=l;this._responseHeaders=k;this._log.isDebugEnabled()&&this._log.debug("Constructed for form "+u(a))}p("internal.logic.AjaxFrameTransport",be);be.prototype._log=B.getLog("internal.logic.AjaxFrameTransport");
be.prototype.open=function(){var a=jQuery,b;b=jQuery("#wr-ajaxFramesDiv");0===b.length&&(b=jQuery("<div>",{id:"wr-ajaxFramesDiv"}).css({position:"absolute",display:"none",height:"0",width:"0"}).prependTo(GLOBAL.document.body));var c="wr-ajaxRequest"+Math.floor(2147483647*Math.random());b=jQuery(this._createFrame(c)).attr({name:c,id:c}).css({display:"none",height:"0",width:"0"}).appendTo(b)[0];this._$iframe=a(b);this._accessor=new Bc(this._$iframe[0]);ce(this,1,i)};
be.prototype._createFrame=function(a){var b=k;try{b=GLOBAL.document.createElement('<div name="__test">')}catch(c){}b=b&&"DIV"===b.tagName.toUpperCase()&&"__test"===b.name?function(a){return GLOBAL.document.createElement('<iframe name="'+a+'">')}:function(a){return jQuery("<iframe>",{name:a})[0]};be.prototype._createFrame=b;return b(a)};be.prototype.setRequestHeader=ba();
be.prototype.send=function(a){var b=this._$iframe,c=this._accessor,d=this._$form;if(!this._sending){this._complete=l;this._sending=i;this._responseHeaders=k;for(var f=[],h={},j=/([^=&]+)=([^&]*)/g,o;o=j.exec(a);){var s=o[1];(h[s]||(h[s]=[])).push(o[2])}var W=this._formInputs;D(h,function(a,b){var c=W[b],d=c?c.values:[],h=c&&c.element;if(!(!h?0:_.find(ic.fieldHandlers,function(a){return!!a.accept(h)})))c=de(a),d=de(d),d!=c&&jQuery.each(a,function(a,c){f.push(b+"="+c)})});"undefined"===typeof GLOBAL.DOMParser&&
(f.push("pxml=true"),c.setUsePseudoXML(i));b.one("complete load",jQuery.proxy(this._onComplete,this,l));b.one("abort error",jQuery.proxy(this._onComplete,this,i));b.one("load",jQuery.proxy(this._destroyFrame,this));ic.submitForm(d[0],0<f.length?f.join("&"):k,k,b.prop("name"))}};function de(a){return a.sort().join("&").replace(/%0D%0A/gi,"%0A").replace(/\+/g,"%20")}be.prototype.abort=function(){this._finish(i);ce(this,4,i);ce(this,0,l)};
be.prototype._onComplete=function(a){if(!this._complete)this._complete=i,this._error=a,this._finish(l),ce(this,4,i)};
be.prototype._finish=function(a){a?(this._log.debug("Aborted"),this.status=0,this.responseText=this.statusText="",this._responseHeaders=this.responseXML=k):(this._log.debug("Finished: extracting result"),this.status=200,this.statusText="OK",a=this._accessor.getContentType(),this.responseText=this._accessor.getContentsAsText(),this.responseXML="text/xml"===a||"application/xml"===a?this._accessor.getContents():k,this._responseHeaders={"content-type":a});this._sending=l};
be.prototype._destroyFrame=function(){this._sending?Lb(jQuery.proxy(this._destroyFrame,this)):GLOBAL.setTimeout(jQuery.proxy(function(){this._$iframe&&(this._$iframe.off(),Yb(this._$iframe[0]));this._accessor=this._$iframe=k},this),5E3)};be.prototype.getResponseHeader=function(a){return this._responseHeaders&&this._responseHeaders[a.toLowerCase()]||k};
be.prototype.getAllResponseHeaders=function(){if(this._responseHeaders){var a=[];D(this._responseHeaders,function(b,c){a.push(c);a.push(": ");a.push(b);a.push("\r\n")});return a.join("")}return k};function ce(a,b,c){a._log.isDebugEnabled()&&a._log.debug("Ready state "+b);a.readyState=b;c&&(a.onreadystatechange||ga)()};function ee(a,b){this._callback=a;this._finishOnInteraction=b;this._uniqueId=this._done=k;fe(this)}p("internal.util.RequestWaiter",ee);var ge=[];
function fe(a){a._done!==k&&e(new x("Already started waiting"));a._done=l;ge.push(a);if(1===ge.length){if(a._finishOnInteraction)jQuery(GLOBAL).on("click focusin","a, area, :submit",he);jQuery(GLOBAL).on("unload",he)}a._uniqueId=0<ie.length?ie.shift():(""+(new Date).valueOf()).slice(-3)+(""+Math.floor(100*Math.random()));var b="wrReq"+a._uniqueId;jQuery.cookie(b,"waiting",{path:"/"});je(b,function(b,d){(!d||"done"===d)&&a._finish()})}
ee.prototype._finish=function(){this._done===k&&e(new x("Not waiting"));this._done=i;Ba(ge,this);0===ge.length&&(jQuery(GLOBAL).off("unload",he),this._finishOnInteraction&&jQuery(GLOBAL).off("click focusin","a, area, :submit",he));if(this._uniqueId){var a="wrReq"+this._uniqueId;ke.hasOwnProperty(a)&&(delete ke[a],0===--le&&GLOBAL.clearInterval(me));jQuery.removeCookie(a,{path:"/"});ie.push(this._uniqueId);this._uniqueId=k}this._callback.call(GLOBAL)};
ee.prototype.notifyDone=function(){this._done===l&&this._finish()};q(ee.prototype,"notifyDone",ee.prototype.notifyDone);ee.prototype.getWaitedCookieName=function(){return this._uniqueId?"wrReq"+this._uniqueId:k};q(ee.prototype,"getWaitedCookieName",ee.prototype.getWaitedCookieName);function he(){_.each(ge,function(a){a._finish()})}var ke={},le=0,me=k;
function je(a,b){ke.hasOwnProperty(a)&&e(new x("Already observing"));0===le++&&(me=GLOBAL.setInterval(ne,100));ke[a]={lastValue:jQuery.cookie(a)||k,callback:b}}function ne(){D(ke,function(a,b){var c=jQuery.cookie(b)||k,d=a.lastValue!==c;a.lastValue=c;d&&a.callback.call(GLOBAL,b,c)})}var ie=[];function oe(){this._level=4;this._queue=[]}t(oe,ob);p("wr.log.ConsoleAppender",oe);var pe={1:["error"],2:["warn"],3:["info"],4:["debug","log"]};oe.prototype.appendFiltered=function(a){var b=this;this._queue.push(a);1<=this._queue.length&&Lb(function(){for(var a;a=b._queue.shift();)qe(a)})};q(oe.prototype,"appendFiltered",oe.prototype.appendFiltered);
function qe(a){var b=GLOBAL.console;if(b){var c=a.getLevel(),d=a.getErrorInfo(),f=[];f.push(re(a.getTimestamp()));f.push(Zd(nb,c));f.push("["+a.getCategory()+"]");f.push(a.getMessage());d&&f.push(""+d);for(var h=f.join(" "),a=d&&1>=c?ja(d._error,{toString:function(){return h}}):h,c=pe[c],d=0;d<c.length;d++)if(f=b[c[d]]){"function"===typeof f?f.call(b,a):Function.prototype.call.call(f,b,a);break}}}
function re(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")};function se(){this._level=4;this._autoShowLevel=2;this._historyVisible=this._loggerVisible=l;this._follow=i;this._highestLevel=4}t(se,ob);p("wr.log.HtmlAppender",se);
se.prototype.appendFiltered=function(a){var b=a.getLevel(),c=a.getErrorInfo(),d,f=this._getStripe();if(f){var h=f.find(".wr-log-message"),j=f.find(".wr-log-history");d=[];d.push(te(a.getTimestamp()));d.push(Zd(nb,b));d.push("["+a.getCategory()+"]");d.push(a.getMessage());c&&d.push(""+c);c=d.join(" ");if(b<=this._highestLevel){if(b<this._highestLevel)this._highestLevel=b,this._setColors(f,this._highestLevel);h.text(a.getMessage())}f.css({"z-index":this._getMaxZIndex(".ui-dialog")+1});b<=this._autoShowLevel&&
!this._loggerVisible&&this._toggleLogger();a=jQuery("<div/>").addClass("wr-log-entry");a.attr("data-loglevel",Zd(nb,b).toLowerCase());this._setColors(a,b,i);a.text(c).appendTo(j);this._follow&&j.scrollTop(j[0].scrollHeight)}};q(se.prototype,"appendFiltered",se.prototype.appendFiltered);
function te(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")}
var ue={1:["#FF0000","#FFFFFF"],2:["#FFFF00","#000000"],3:["#0000FF","#FFFFFF"],4:["#808080","#FFFFFF"]},ve={1:["#FFB2B2","#000000"],2:["#FFFFB2","#000000"],3:["#B2B2FF","#000000"],4:["#D8D8D8","#000000"]},we={thickness:"1.5em",toggleShow:"<<",toggleHide:">>"},xe="#wr-log { position: fixed; top: 0; right: 0; overflow: hidden; text-align: center; font: 12px sans-serif; },.wr-log-toggle { float: right; width: ${thickness}; line-height: ${thickness}; text-align: center; font-weight: bold; cursor: pointer; },.wr-log-message { height: ${thickness}; margin-right: ${thickness}; line-height: ${thickness}; margin: 0; overflow: hidden; font-weight: bold; -moz-user-select: none; -ms-user-select: none; },.wr-log-history { max-height: 300px; margin: 5px; border: 3px solid #222222; border-bottom: 0; overflow: auto; background-color: #EEEEEE; text-align: left; white-space: pre-wrap; font: 90% monospace; },.wr-log-historyLinks { padding: 0 3px; margin: -5px 5px 5px; background-color: #111111; text-align: left; font-size: 80%; },.wr-log-historyLinks a { cursor: pointer; color: #FFFFFF; text-decoration: none; },.wr-log-historyLinks a ~ a { margin-left: 2em; },.wr-log-entry { border-bottom: 1px solid #222222; }".split(",");
n=se.prototype;n._toggleLogger=function(){var a=this._getStripe();this._loggerVisible=!this._loggerVisible;a.animate({width:this._loggerVisible?"100%":we.thickness},200);a.find(".wr-log-toggle").text(this._loggerVisible?we.toggleHide:we.toggleShow);!this._loggerVisible&&this._historyVisible&&this._toggleHistory()};
n._toggleHistory=function(){var a=this._getStripe();this._historyVisible=!this._historyVisible;a.css({height:this._historyVisible?"auto":we.thickness});this._historyVisible&&a.find(".wr-log-history").each(function(){this.scrollTop=this.scrollHeight})};
n._getStripe=function(){var a=this,b=GLOBAL.document.body,c=k,d=k;b&&(d=jQuery("#wr-log-style"),d[0]||(c=xe.join("\r\n").replace(/\$\{([^}]+)}/g,function(a,b){return we[b]}),d=jQuery("<style id='wr-log-style'>"+c+"</style>").prependTo(b)),c=jQuery("#wr-log"),c[0]||(c=jQuery("<div id='wr-log'/>").css({width:we.thickness,height:we.thickness}).on("click keydown keyup keypress",l).prependTo(b).fadeIn(),jQuery("<div/>").addClass("wr-log-toggle").attr("title","Click to show/hide logger").text(we.toggleShow).appendTo(c),
jQuery("<p/>").addClass("wr-log-message").attr("title","Double-click to show/hide log history").appendTo(c),jQuery("<div/>").addClass("wr-log-history").appendTo(c),b=jQuery("<div/>").addClass("wr-log-historyLinks").appendTo(c),jQuery("<a/>").text("SELECT ALL").click(function(){a._selectText(jQuery(this).parent().siblings(".wr-log-history")[0])}).attr("title","Selects all log entries").appendTo(b),jQuery("<a/>").text("FOLLOW:"+(a._follow?"ON":"OFF")).click(function(){a._follow=!a._follow;jQuery(this).text("FOLLOW:"+
(a._follow?"ON":"OFF"))}).attr("title","Toggles automatic scrolling to the last log entry").appendTo(b),jQuery("<a/>").text("RETHROW").click(function(){var a=l;return function(){a=!a;B.setRethrowErrors(a);jQuery(this).text("RETHROW:"+(a?"ON":"OFF"))}}()).attr("title","Toggles re-throwing of errors, allowing browser tools to detect them").appendTo(b),this._setColors(c,this._highestLevel),c.find(".wr-log-toggle").click(jQuery.proxy(this._toggleLogger,this)),c.find(".wr-log-message").dblclick(jQuery.proxy(this._toggleHistory,
this))));return c};n._getMaxZIndex=function(a){if(!jQuery.fn.zIndex)return 999;var b=Number.MIN_VALUE;jQuery(a||"*").each(function(){b=Math.max(b,jQuery(this).zIndex())});return b>Number.MIN_VALUE?b:999};n._setColors=function(a,b,c){b=(c?ve:ue)[b];a.css({"background-color":b[0],color:b[1]})};
n._selectText=function(a){var b;b=GLOBAL.getSelection?function(a){var b=GLOBAL.getSelection(),f=a.ownerDocument.createRange();f.selectNodeContents(a);b.removeAllRanges();b.addRange(f)}:a.ownerDocument.createTextRange?function(a){var b=a.ownerDocument.body.createTextRange();b.moveToElementText(a);b.select()}:function(){GLOBAL.alert("Text selection not supported")};se.prototype._selectText=b;return b(a)};function ye(){this._level=4;this._useNotifies=i;this._notifyMessage="<strong>Log Status</strong>";this._notifyStats=i;this._notifyLevel=2;this._notifying=l;this._highestLevel=4;this._tempStats={};this._tempLines=[];this._refreshTimeout=k;this._maxSize=512E3;this._viewer=k;ze(this,_.str.repeat("=",80));ze(this,""+GLOBAL.document.location);ze(this,""+new Date);ze(this,""+GLOBAL.navigator.userAgent);ze(this,_.str.repeat("=",80));var a=this;jQuery(GLOBAL).on("unload",function(){a._viewer&&a._viewer.w.close()});
Ae.push(this)}t(ye,ob);p("wr.log.LocalAppender",ye);var Ae=[];ye.prototype.setup=function(a){ye._super.setup.call(this,a);this._useNotifies="boolean"===typeof a.notify?a.notify:i;this._notifyMessage=a.notifyMessage||"<strong>Log Status</strong>";this._notifyStats="boolean"===typeof a.notifyStats?a.notifyStats:i;this._notifyLevel=a.notifyLevel||2;this._maxSize=a.maxSize||512E3};q(ye.prototype,"setup",ye.prototype.setup);
ye.prototype.appendFiltered=function(a){var b=a.getLevel(),c=a.getErrorInfo();if(b<this._highestLevel)this._highestLevel=b;if(b<=this._notifyLevel&&!this._notifying)this._notifying=i;var d=[];d.push(Be(a.getTimestamp()));d.push(Zd(nb,b));d.push("["+a.getCategory()+"]");d.push(a.getMessage());c&&d.push(""+c);ze(this,d.join(" "),Ce[b])};q(ye.prototype,"appendFiltered",ye.prototype.appendFiltered);
function Be(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")}function ze(a,b,c){try{a._tempLines.push(De(b)),c&&(a._tempStats[c]=(a._tempStats[c]||0)+1),Ee(a)}catch(d){Fe(d)}}
function De(a){return a.replace(/[\u0000-\u0008\u000B-\u000C\u000E-\u001F]/g,function(a){return"[0x"+a.charCodeAt(0)+"]"})}function Ge(a){a._highestLevel=4;a._tempLines=[];a._tempStats={};He()&&(GLOBAL.localStorage.removeItem("wr.clientLog.text"),GLOBAL.localStorage.removeItem("wr.clientLog.stats"));Ee(a)}function Ee(a){if(!a._refreshTimeout)a._refreshTimeout=GLOBAL.setTimeout(jQuery.proxy(a._refreshNow,a),100)}
ye.prototype._refreshNow=function(){this._refreshTimeout=k;try{var a=Ie();a&&this._tempLines.unshift(a);a=this._tempLines.join("\n");if(a.length>this._maxSize)var b=a.indexOf("\n",a.length-this._maxSize),a=a.substring(0<=b?b+1:a.length);He()&&GLOBAL.localStorage.setItem("wr.clientLog.text",a);this._tempLines=[];var c=Je(),d;for(d in this._tempStats)this._tempStats.hasOwnProperty(d)&&(c[d]=(c[d]||0)+this._tempStats[d]);He()&&GLOBAL.localStorage.setItem("wr.clientLog.stats",GLOBAL.JSON.stringify(c));
this._tempStats={};Ke(this);Le(this)}catch(f){Fe(f)}};function Fe(a){var b=GLOBAL.console;"function"===typeof b.error&&b.error(a)}function Ie(){if(He())return GLOBAL.localStorage.getItem("wr.clientLog.text")||""}function Je(){if(He())return GLOBAL.JSON.parse(GLOBAL.localStorage.getItem("wr.clientLog.stats")||"{}")}function He(){return!!GLOBAL.localStorage&&!!GLOBAL.JSON}q(ye,"openViewer",function(){_.each(Ae,function(a){Me(a)})});
function Ke(a){if(a._viewer){var b=jQuery(a._viewer.history),c=Ie();b.text(c||"");a._viewer.follow&&b.scrollTop(b[0].scrollHeight)}}
function Me(a){if(a._viewer)a._viewer.w.focus();else{var b=GLOBAL.open();b||e(Error("Unable to open viewer window: this may be caused by popup blocking."));var c=b.document;c.open("text/html","replace");c.write('<html><head><title></title><meta http-equiv="X-UA-Compatible" content="IE=8"></head><body></body></html>');c.close();var d=GLOBAL.document.location;c.title="Log - "+d.protocol+"//"+d.host;var f={};f.w=b;f.follow=i;f.history=jQuery(c.createElement("PRE")).css({position:"absolute",top:10,left:10,
right:10,bottom:25,padding:5,margin:0,overflow:"scroll",border:"3px solid #222222","background-color":"#EEEEEE"}).appendTo(c.body)[0];d=jQuery(c.createElement("DIV")).css({position:"absolute",left:10,right:10,bottom:5,height:16,padding:"2px 4px","background-color":"#111111","font-size":"14px","line-height":"16px"}).appendTo(c.body)[0];jQuery(c.createElement("A")).text("Follow:"+(f.follow?"ON":"OFF")).attr({title:"Toggles automatic scrolling to the last log entry"}).css({color:"#FFFFFF",cursor:"pointer"}).click(function(){f.follow=
!f.follow;jQuery(this).text("Follow:"+(f.follow?"ON":"OFF"))}).appendTo(d);jQuery(c.createElement("A")).text("Clear").attr({title:"Clears all recorded log entries"}).css({color:"#FFFFFF",cursor:"pointer","margin-left":"2em"}).click(function(){Ge(a)}).appendTo(d);a._viewer=f;jQuery(b).on("unload",function(){a._viewer=k});Ke(a)}}
var Ne={1:["#FF0000","#FFFFFF"],2:["#FFFF00","#000000"],3:["#0000FF","#FFFFFF"],4:["#808080","#FFFFFF"]},Ce={1:"Error",2:"Warn",3:"Info",4:"Debug"},Oe={thickness:"1.5em",dismiss:"X"},Pe="#wr-clientLog { position: fixed; top: 0; right: 0; max-width: 16em; padding: 0 5px 5px; overflow: hidden; box-shadow: 0 0 5px #000000; -ms-user-select: none; -moz-user-select: none; -webkit-user-select: none; cursor: default; text-align: left; font: 12px sans-serif; },.wr-clientLog-dismiss { float: right; width: ${thickness}; margin: 0 -5px 0 10px; line-height: ${thickness}; text-align: center; font-weight: bold; cursor: pointer; background-color: #111111; color: #FFFFFF; },.wr-clientLog-stats { width: 100%; margin-top: 5px; font-weight: normal; },.wr-clientLog-stats th { text-align: left; background-color: inherit !important; color: inherit !important; },.wr-clientLog-stats td { text-align: right; background-color: inherit !important; color: inherit !important; },.wr-clientLog-links { padding: 0 3px; margin-top: 5px; background-color: #111111; font-size: 80%; font-weight: normal; },.wr-clientLog-links a { cursor: pointer; color: #FFFFFF; text-decoration: none; },.wr-clientLog-links a ~ a { margin-left: 2em; }".split(",");
function Le(a){var b=a._getStripe();if(b){a._setColors(b,a._highestLevel);b.css({"z-index":a._getMaxZIndex(".ui-dialog")+1});a._notifying&&b.show();var c=b.find(".wr-clientLog-stats");if(c[0]){var d=Je(),f=Ce;_.each(Yd(nb),function(b){if(b<=a._notifyLevel){var j=f[b],b=c.find(".wr-clientLog-stats-"+b);b.find("th").text(j);b.find("td").text(d[j]||0)}})}}}
ye.prototype._getStripe=function(){var a=this;if(!this._useNotifies)return k;var b=GLOBAL.document.body,c=k,d=k,f;b&&(d=jQuery("#wr-clientLog-style"),d[0]||(d=Pe.join("\r\n").replace(/\$\{([^}]+)}/g,function(a,b){return Oe[b]}),d=jQuery("<style id='wr-clientLog-style'>"+d+"</style>").prependTo(b)),c=jQuery("#wr-clientLog"),c[0]||(c=jQuery("<div id='wr-clientLog'/>").html(this._notifyMessage).css({display:"none"}).on("click keydown keyup keypress",l).prependTo(b),jQuery("<div/>").addClass("wr-clientLog-dismiss").text(Oe.dismiss).click(function(){a._notifying=
l;c.hide()}).attr("title","Click to dismiss").prependTo(c),this._notifyStats&&(f=jQuery("<table/>").addClass("wr-clientLog-stats").appendTo(c),_.each(Yd(nb),function(a){jQuery("<tr><th></th><td></td></tr>").addClass("wr-clientLog-stats-"+a).appendTo(f)})),b=jQuery("<div/>").addClass("wr-clientLog-links").appendTo(c),jQuery("<a/>").text("SHOW").click(function(){Me(a)}).attr("title","Shows the full log").appendTo(b),jQuery("<a/>").text("CLEAR").click(function(){Ge(a);a._notifying=l;c.hide()}).attr("title",
"Clears the log and dismisses this notification").appendTo(b),this._setColors(c,this._highestLevel)));return c};ye.prototype._getMaxZIndex=function(a){if(!jQuery.fn.zIndex)return 999;var b=Number.MIN_VALUE;jQuery(a||"*").each(function(){b=Math.max(b,jQuery(this).zIndex())});return b>Number.MIN_VALUE?b:999};ye.prototype._setColors=function(a,b){var c=Ne[b];a.css({"background-color":c[0],color:c[1]})};function Qe(){this._lastDepartureWaiter=k}t(Qe,vb);p("wr.nav.HttpWebRouter",Qe);Qe.prototype._log=B.getLog("wr.nav.HttpWebRouter");Qe.prototype.isRequestImplemented=function(){return Re(i)!=k};q(Qe.prototype,"isRequestImplemented",Qe.prototype.isRequestImplemented);
Qe.prototype.implementRequest=function(a){Re();var b=a.getURL();if((b=b&&parseUri(b))&&(b.protocol||b.host||b.path||b.query))a.isDeparting()?0<a._inputs.length?Se(this,a):Te(this,a):Ue(this,a);else{var b=a.getURL(),c=a._target;a.start();this._log.debug("Request to "+b+" with target "+c+" - Consumed");a.success("Consumed",k,k)}};q(Qe.prototype,"implementRequest",Qe.prototype.implementRequest);function Re(a){var b=GLOBAL.document;a!==i&&!b&&e(Error("Document DOM not available"));return b}
function Ue(a,b){var c=Ve(a,b),d=c[0]?c[0].form:k,f={};_.each(c,function(a){var b=encodeURIComponent(a.name);(f[b]||(f[b]={element:a,values:[]})).values.push(encodeURIComponent(a.value))});var h=b.getURL(),j={};j.xhr=We(d,f)||g;j.type="POST";j.data=Xe(b.getParams(),c);j.dataType=Ye(b.getResponseTypes())||g;var o=k;j.beforeSend=function(){a._log.debug("Request to "+h+" - Started");Ze();b.start();o=(new Date).valueOf()};j.success=function(c,d,j){var Ka=(new Date).valueOf()-o;a._log.isDebugEnabled()&&
a._log.debug("Request to "+h+" - Succeeded in "+Ka+" ms");b.success(d,j&&j.responseText,c);b=f=k};j.error=function(c,d,j){var Ka=(new Date).valueOf()-o,j=j&&(j.message||j),d=_.str.capitalize(d||"Generic error")+(j?" - "+j:"");a._log.isDebugEnabled()&&a._log.debug("Request to "+h+" - Failed in "+Ka+"ms, "+d);b.failure(d,c&&c.responseText);b=f=k};a._log.isDebugEnabled()&&a._log.debug("Request to "+h+" - Underway\nType: "+j.type+"\nData: "+u(j.data)+"\nData type: "+j.dataType);jQuery.ajax(h,j)}
function Ze(){jQuery.each(ic.fieldHandlers,function(a,b){b.beforeRequest()})}function We(a,b){return a&&_.any(b,function(a){return jQuery(a.element).is(":file")})?function(){return new be(a,b)}:k}
function Xe(a,b){var c=[];c.push(jQuery.param(a));var d=jQuery(b),f={};d.each(function(a,b){var c=k;jQuery.each(ic.fieldHandlers,function(a,d){if(d.accept(b))return c=d,l});if(c)f[b.id]=c.getter});d=d.filter(function(){return"submit"!=this.type&&"file"!=this.type&&"image"!=this.type&&!f[this.id]});c.push(d.serialize());D(f,function(a,b){var d=a(jQuery("#"+tc(b))[0]);c.push(encodeURIComponent(b)+"="+encodeURIComponent(d))});return _.filter(c,function(a){return!!a}).join("&")}
var $e={html:"html",json:"json",xml:"xml"};function Ye(a){return!a?k:_.map(a,function(a){return $e[a]}).join(" ")}
function Se(a,b){var c=jQuery(Ve(a,b)),d=jQuery(c[0].form);af(a,b,l,function(){a._log.debug("Request to "+h+" - Form post complete");b.success("Form post complete",k,k)});var f={};jQuery.extend(f,b.getParams());c.filter(":submit").each(function(){var a=jQuery(this);f[a.prop("name")]=a.val()});var h=b.getURL(),c=b._target,j=bf(),c=c||j.target;a._log.isDebugEnabled()&&a._log.debug("Request to "+h+" - Form submit underway\nForm: "+u(d[0])+"\nExtra parameters: "+u(f)+"\nTarget: "+c);b.start();ic.submitForm(d[0],
k,f,c).onComplete(function(){a._log.debug("Request to "+h+" - Form submitted")})}
function Te(a,b){var c=b.getURL(),d=b._target,f=cf(c),h=af(a,b,f,function(){a._log.debug("Request to "+c+" - Location get complete");b.success("Location get complete",k,k)}),c=Ga(c,b.getParams()),c=_.str.strLeftBack(c,"#"),j=bf(),c=Ea(j.href,c),d=d||j.target;a._log.isDebugEnabled()&&a._log.debug("Request to "+c+" - Location change underway\nTarget: "+d);b.start();(j=df(d))?(d=j.location,d.href===c?d.reload(i):d.assign(c),a._log.debug("Request to "+c+" - Location changed"),(f||j!==GLOBAL)&&h.notifyDone()):
b.failure("Unable to open window for target "+d,k)}function Ve(a,b){var c=[];_.each(b._inputs,function(b){if(jQuery(b).is(":input")){var f;var h=jQuery(b);!h.prop("disabled")&&!ef(b)?f=b:(f=h.data("wr-originalId")||h.attr("id"),h=h.data("wr-originalName")||h.attr("name"),f=(f?jQuery("#"+tc(f))[0]:h?jQuery(":input[name='"+uc(h)+"']:not(:disabled)")[0]:k)||k);f?c.push(f):a._log.debug("No replacement found for input "+u(b))}});return c}
function ef(a){var b=a&&a.ownerDocument;if(!b)return i;do if(a===b)return l;while(a=a.parentNode);return i}function cf(a){var b=bf().href,c=parseUri(Ea(b,".")),a=parseUri(Ea(b,a));return c.authority!==a.authority}function bf(){var a=jQuery(Re()).find("base").eq(0),b=GLOBAL.location.href,b=a[0]&&a.attr("href")||Fa(b),a=a[0]&&a.attr("target")||"_self";return{href:b,target:a}}function df(a){var b=GLOBAL;return!a||"_self"===a?b:"_parent"===a?b.parent:"_top"===a?b.top:b.open("about:blank",a)}
q(Qe,"CALLBACK_COOKIE_PARAM","cbck");function af(a,b,c,d){if(a._lastDepartureWaiter)a._lastDepartureWaiter.notifyDone(),a._lastDepartureWaiter=k;a=new ee(d,i);c||(b.getParams().cbck=a.getWaitedCookieName());return a};function ff(){}t(ff,vb);p("wr.nav.PropagationRouter",ff);ff.prototype._log=B.getLog("wr.nav.PropagationRouter");q(ff,"HASH_PARAMETER","CRC");ff.linkInfosSelective={};ff.linkInfos={};var gf={},hf={},jf={};function kf(a,b){var c=gf,d=c[a]||(c[a]={}),f=hf[a]!==l?jf[a]||(jf[a]={}):k;D(b,function(a,b){var c;if(a){if(c="object"===typeof a?{value:a.value,hash:a.hash}:{value:a,hash:k},d[b]=c,f&&c.hash)(f[b]||(f[b]={}))[c.value]=c.hash}else delete d[b]})}q(ff,"mergeLinkData",kf);
function lf(a){a?delete gf[a]:gf={}}q(ff,"clearLinkData",lf);q(ff,"getLinkData",function(){return gf});q(ff,"setKeepHashes",function(a,b){hf[a]=!!b});q(ff,"extendParameters",function(a,b,c){if(c){var d=k;D(ff.linkInfos,function(a,b){a[c]&&(d=b)});if(d){var f=a.CRC?new sa(a.CRC):k,h={},j=jf[d];if(b)D(b,function(b,c){h[c]={value:b};f=mf(a,c,h,j,f)}),f&&(a.CRC=f.toString())}}});
ff.prototype.alterRequest=function(a){ff._super.alterRequest.call(this,a);var b=nf(a);if(b){var c=k,d=k,f="true"===a.getParams().ajaxRefresh?ff.linkInfosSelective:ff.linkInfos;D(f,function(a,f){a[b]&&(c=a[b],d=f)});if(c&&d){var h=a.getParams(),j=h.CRC?new sa(h.CRC):k,o=gf[d],s=jf[d];if(o)this._log.isDebugEnabled()&&this._log.debug("Propagating link "+b),_.each(c,function(a){j=mf(h,a,o,s,j)}),j&&(h.CRC=j.toString())}}};q(ff.prototype,"alterRequest",ff.prototype.alterRequest);
function mf(a,b,c,d,f){function h(a){if(f||a)a?(a=new sa(a),f?f.xor(a):f=a):j.warn("Found missing hashes: request may fail validation")}var j=ff.prototype._log,o=(c=c[b])&&c.value;if(o===g||o===k)return f;var s=a[b];s!==o&&(j.isDebugEnabled()&&j.debug("Propagating parameter "+b+" (old value: "+s+"): "+u(c)),s!==k&&s!==g&&h(d&&d[b]&&d[b][s]),h(c.hash));a[b]=o;return f}var of=new XRegExp("^!(?<fparams>.+)"),pf=new XRegExp("^button:(?<id>.+)$");
function nf(a){var b=parseUri(a.getURL()),b=XRegExp.exec(b.anchor,of),c=(b?jQuery.deparam.querystring(b.fparams):{}).link||a.getParams().link;c||D(a.getParams(),function(a,b){var h=XRegExp.exec(b,pf);h&&(c=h.id)});c||jQuery.each(a._inputs,function(a,b){var h=jQuery(b);if(h.is(":input")&&(h=h.attr("name"),h=XRegExp.exec(h,pf)))return c=h.id,l});return c||k};function N(){this._app=k}t(N,sb);p("wr.logic.AjaxRequestActor",N);N.prototype._log=B.getLog("wr.logic.AjaxRequestActor");N.prototype._responseLog=B.getLog("wr.logic.AjaxRequestActor._response");N.prototype.setApp=ca("_app");q(N.prototype,"setApp",N.prototype.setApp);N.prototype.setup=function(a){N._super.setup.call(this,a);this._defaults=a};q(N.prototype,"setup",N.prototype.setup);
N.prototype.execute=function(a,b,c){var d=this,f=c.getDisplay(),h;jQuery.extend(a,this._defaults);h=qf(this,a,f);h=h.chain(function(){try{rf(f);try{return sf(d,a)}finally{tf(f)}}catch(b){return d._log.error("Error in core request execution",b),new Xa(b)}});h=h.chain(function(a){var b=(a="object"===typeof a?a:k)&&a.getElementsByTagName("parsererror")[0];if(!a||b)e(Error("Received a non-XML response from server (see log for full text)"+(b?"\r\n"+b.textContent:"")));return uf(d,a,c)});b=function(b){vf(d,
a,f);return b};return h=h.chain(b,b)};q(N.prototype,"execute",N.prototype.execute);function qf(a,b,c){var d=b.waitWin,f=b.indicator,a=d&&d.id?wf(a,d,c):ab;f&&Od(f)&&(a=a.chain(function(){jQuery(f).show()}));return a}function vf(a,b,c){var d=b.waitWin;(b=b.indicator)&&Od(b)&&jQuery(b).hide();if(d&&d.id)d=d.id,a._log.debug("Closing waiting window "+d),c.closeWindow(d);return ab}
function wf(a,b,c){var d=b.id,f={},h;a._log.debug("Opening waiting window "+d);b=jQuery.extend({},{width:200,height:100},b)||{};a=c.getWindow(d);f={};f.width=b.width;f.height=b.height;f.className="wr-waitDialog "+(b.className||"");a.setAttributes(f);xf(a,b.message);a.open();h=new Ra;GLOBAL.setTimeout(function(){h.success()},b.duration);return h.getPromise()}function rf(a){a.getOpenWindows()[0].getControls()[0].setAttribute("cursorType","wait")}
function tf(a){a.getOpenWindows()[0].getControls()[0].setAttribute("cursorType",k)}function sf(a,b){var c=yf(a,b.url,b.formPost,b.allowIgnoreFields||l);c.setResponseTypes("xml");var d=new Ra;c.addSuccessListener(function(b,c,j){try{d.success(j)}catch(o){zf(a,"Error at request success ("+b+")",c,o)}});c.addFailureListener(function(b,c){d.failure(zf(a,"Server request "+b,c,k))});a._app.getPlugin("nav").navigate(c);return d.getPromise()}
function uf(a,b,c){var d=c.getDisplay();_.each(b.getElementsByTagName("CloseWindow"),function(b){var b=b.getAttribute("name"),c;a._log.debug("Closing window "+b);(c=d.getWindow(b))?(xf(c,""),c.close()):a._log.warn("Window "+b+" not found for closing")});_.each(b.getElementsByTagName("OpenWindow"),function(b){var c=b.getElementsByTagName("UIConfig")[0],c=jQuery.parseJSON(c.textContent||c.text),f=b.getElementsByTagName("Params")[0],s=[];f&&_.each(f.attributes,function(a){s[a.name]=a.value});Af(a,b.getAttribute("name"),
c,s,d)});var b=jQuery(b).find("Content").eq(0),f=b.attr("location");return f?Bf(a,f):Cf(a,b,c)}function Bf(a,b){var c=new F(b,g,g,k);c.addFailureListener(function(b,c){zf(a,"External content request "+b,c,k)});return a._app.getPlugin("nav").navigate(c)}
function Cf(a,b,c){var d=c.getDisplay(),f=c._state,c=b.attr("window");(d=d.getWindow(c))||e(Error("Unable to find window "+c+" to update"));c=b.children("PageRefresh").eq(0);c[0]?(c.find("HiddenFields").each(function(){var a=jQuery(this);f.set(a.attr("page")+"HiddenFields",a.text())}),c.find("LinkData").each(function(){var b=jQuery.parseJSON(_.str.trim(jQuery(this).text()));D(b,function(a,b){kf(b,a)});a._log.isDebugEnabled()&&a._log.debug("Received new link data: "+u(b))}),c.find("ControlData").each(function(){var a=
jQuery(this);f.set(a.attr("control"),a.text())})):(xf(d,b.text()),d.triggerEvent("contentchange"),d.setAttribute("autoResize",d.getAttribute("autoResize")));a._log.debug("Focusing updated window "+d);d.focus();return ab}function zf(a,b,c,d){var f=d&&(d.message||d),b=b+(f?" - "+f:""),d=d instanceof Error?d:k;a._log.error(b,d);a._responseLog.isDebugEnabled()&&a._responseLog.debug("Server response was"+(c?":\r\n"+c:" still to be received"));return d||Error(b)}
function yf(a,b,c,d){var f={},h=[];f.ajax=i;if(c){Array.prototype.push.apply(h,jQuery(c.form).find(":input").filter(function(){var a=jQuery(this).attr("ignore");return!a&&a!=d}).get());f[c.button]="link";c.selectiveRefresh&&(f.ajaxRefresh="true");var j=_.str.strRight(c.button,"button:")+(c.selectiveRefresh?"_sr":""),j=jQuery(c.form).find(":input:hidden[name='"+tc(j)+"']")[0];0>_.indexOf(h,j)&&a._log.warn("Action URL input associated with button '"+c.button+"' was not sent along the request: this may disrupt application state")}return new F(b,
f,h)}
function Af(a,b,c,d,f){var h={};a._log.debug("Opening window "+b);a._app.getPlugin("ui").configureViews(k,c);c=f.getWindow(b);h={};h.modal="true"===d.modal;h.closable="true"===d.closable;h.draggable="true"===d.draggable;h.width=Number(d.width||"200");h.height=Number(d.height||"300");h.resizable="true"===d.resizable;h.autoResize="true"===d.autoResizing;h.maximizable="true"===d.maximizable;h.minimizable="true"===d.minimizable;h.showEffect=d.showEffect||k;h.hideEffect=d.hideEffect||k;h.className=d.className;
c.setAttributes(h);c.setData({title:d.title});c.isOpen()?a._log.warn("Window "+b+" is already open"):c.open()}function xf(a,b){var c=a.getControls()[0];c?c.setData({html:b}):a.setData({content:b})}N.prototype.precomputeRequest=function(a){jQuery.extend(a,this._defaults);var b=yf(this,a.url,a.formPost,a.allowIgnoreFields||l),a=_.str.strLeft(b.getURL(),"#"),b=jQuery.param(b.getParams());return{url:a,params:b}};q(N.prototype,"precomputeRequest",N.prototype.precomputeRequest);
N.prototype.startFullWaitUX=function(a,b){return qf(this,a,b)};q(N.prototype,"startFullWaitUX",N.prototype.startFullWaitUX);N.prototype.stopFullWaitUX=function(a,b){return vf(this,a,b)};q(N.prototype,"stopFullWaitUX",N.prototype.stopFullWaitUX);N.prototype.startSendWaitUX=function(a,b){rf(b)};q(N.prototype,"startSendWaitUX",N.prototype.startSendWaitUX);N.prototype.stopSendWaitUX=function(a,b){tf(b)};q(N.prototype,"stopSendWaitUX",N.prototype.stopSendWaitUX);
N.prototype.processResponse=function(a,b){uf(this,a,b)};q(N.prototype,"processResponse",N.prototype.processResponse);function O(a,b){this._id=a;this._viewer=b;this._viewerListener=this._listeners=this._parent=k;this.addViewerListener()}p("wr.ui.Control",O);O.prototype._log=B.getLog("wr.ui.Control");O.prototype.destroy=function(){if(this._viewer){this.removeEventListener(k,k);this.removeViewerListener();this.setParent(k);try{this._viewer.destroy()}catch(a){this._log.error("Error destroying viewer",a)}this._viewer=k}};q(O.prototype,"destroy",O.prototype.destroy);O.prototype.getId=m("_id");q(O.prototype,"getId",O.prototype.getId);
O.prototype.getViewer=m("_viewer");q(O.prototype,"getViewer",O.prototype.getViewer);O.prototype.getParent=m("_parent");q(O.prototype,"getParent",O.prototype.getParent);O.prototype.setParent=function(a){if(this._parent!==a&&!this._guard_setParent){this._guard_setParent=i;try{if(this._parent)this._parent.removeControl(this),this._parent=k;if(a)a.addControl(this),this._parent=a}finally{delete this._guard_setParent}}};q(O.prototype,"setParent",O.prototype.setParent);
O.prototype.addEventListener=function(a,b){var c=this;if("function"===typeof b)if(a){var d=this._getCallbacks(a,i);d.add(b);d._count++}else jQuery.each(Yd(Bb),function(a,d){c.addEventListener(d,b)})};q(O.prototype,"addEventListener",O.prototype.addEventListener);O.prototype.removeEventListener=function(a,b){var c=this;if(a){var d=this._getCallbacks(a);d&&(b&&(d.remove(b),d._count--),(!b||0>=d._count)&&this._removeCallbacks(a))}else jQuery.each(Yd(Bb),function(a,d){c.removeEventListener(d,b)})};
q(O.prototype,"removeEventListener",O.prototype.removeEventListener);O.prototype.triggerEvent=function(a){Df(this,a,k)};q(O.prototype,"triggerEvent",O.prototype.triggerEvent);function Df(a,b,c){b&&(c=c||a._viewer.getView(),Ef(a,new Ab(b,a,c)))}function Ef(a,b){if(b){a._log.isDebugEnabled()&&a._log.debug("Dispatching "+b+" to "+a);var c=a._getCallbacks(b._type);if(c)try{c.fireWith(a,[b])}catch(d){a._log.error("Error handling "+b+" on "+a,d)}a._parent&&Ef(a._parent,b)}}
O.prototype._getCallbacks=function(a,b){var c=this._eventListeners;if(!c&&b)this._eventListeners=c={};var d=c&&c[a];if(!d&&b)c[a]=d=jQuery.Callbacks("unique"),d._count=0,this.addViewerListener();return d};O.prototype._removeCallbacks=function(a){var b=this._eventListeners,c=b&&b[a];c&&(c.empty(),delete b[a],this.removeViewerListener())};
O.prototype.addViewerListener=function(){var a=this,b=this._eventListeners;if(!b)this._eventListeners=b={};var c=b._count||0;if(0===c){var d=function(b,c){Df(a,b,c)};this._viewer.addEventListener(d);this._viewerListener=d}b._count=c+1};q(O.prototype,"addViewerListener",O.prototype.addViewerListener);
O.prototype.removeViewerListener=function(){var a=this._eventListeners,b=a._count;if(0<b)a._count=b-1;else{if(this._viewerListener)this._viewer.removeEventListener(this._viewerListener),this._viewerListener=k;delete a._count}};q(O.prototype,"removeViewerListener",O.prototype.removeViewerListener);O.prototype.isVisible=function(){return this.getAttribute("visible")!==l};q(O.prototype,"isVisible",O.prototype.isVisible);O.prototype.setVisible=function(a){this.setAttribute("visible",a)};
q(O.prototype,"setVisible",O.prototype.setVisible);O.prototype.isEnabled=function(){return this.getAttribute("enabled")!==l};q(O.prototype,"isEnabled",O.prototype.isEnabled);O.prototype.setEnabled=function(a){this.setAttribute("enabled",a)};q(O.prototype,"setEnabled",O.prototype.setEnabled);O.prototype.isFocused=function(){return this.getAttribute("focused")===i};q(O.prototype,"isFocused",O.prototype.isFocused);O.prototype.focus=function(){this.setAttribute("focused",i)};q(O.prototype,"focus",O.prototype.focus);
O.prototype.setAttribute=function(a,b){var c={};c[a]=b;this.writeAttributes(c)};q(O.prototype,"setAttribute",O.prototype.setAttribute);O.prototype.setAttributes=function(a){this.writeAttributes(a)};q(O.prototype,"setAttributes",O.prototype.setAttributes);O.prototype.writeAttributes=function(a){this._viewer.writeAttributes(a)};q(O.prototype,"writeAttributes",O.prototype.writeAttributes);O.prototype.getAttribute=function(a){var b=this.readAttributes();return b?b[a]:g};q(O.prototype,"getAttribute",O.prototype.getAttribute);
O.prototype.getAttributes=function(){return this.readAttributes()};q(O.prototype,"getAttributes",O.prototype.getAttributes);O.prototype.readAttributes=function(){return this._viewer.readAttributes()};q(O.prototype,"readAttributes",O.prototype.readAttributes);O.prototype.setData=function(a){a!==g&&this._viewer.writeData(a)};q(O.prototype,"setData",O.prototype.setData);O.prototype.getData=function(){var a=this._viewer.readData();a===g&&e(new ia);return a};q(O.prototype,"getData",O.prototype.getData);
O.prototype.setDataTree=function(a){this.setData(a?a.getRootData():k)};q(O.prototype,"setDataTree",O.prototype.setDataTree);O.prototype.getDataTree=function(){var a=this._viewer.readData();return new wd(a)};q(O.prototype,"getDataTree",O.prototype.getDataTree);O.prototype.toString=function(){return"Control:"+this._id};function P(a,b){O.call(this,a,b);this._controls=[];this._controlsById={}}t(P,O);p("wr.ui.Container",P);P.prototype.destroy=function(){_.each(this.getControls(),function(a){a.destroy()});P._super.destroy.call(this)};q(P.prototype,"destroy",P.prototype.destroy);P.prototype.getControls=function(){return Ad(this._controls)};q(P.prototype,"getControls",P.prototype.getControls);
P.prototype.addControl=function(a){if(a&&!this._guard_addControl){this._guard_addControl=i;try{var b=a.getParent();b!==this&&(b&&e(new x("Control has been already added to a container")),a.setParent(this),this._controls.push(a),this._controlsById[a._id]=a)}finally{delete this._guard_addControl}}};q(P.prototype,"addControl",P.prototype.addControl);
P.prototype.removeControl=function(a){if(a&&!this._guard_removeControl){this._guard_removeControl=i;try{var b=a.getParent();if(b)b!==this&&e(new x("Control is not part of this container")),a.setParent(k),this._controls=jQuery.grep(this._controls,function(b){return b!==a})||[],delete this._controlsById[a._id]}finally{delete this._guard_removeControl}}};q(P.prototype,"removeControl",P.prototype.removeControl);
P.prototype.getControl=function(a){return this._controlsById.hasOwnProperty(a)?this._controlsById[a]||k:k};q(P.prototype,"getControl",P.prototype.getControl);P.prototype.lookupControl=function(a){var b=k;if(b=this.getControl(a))return b;jQuery.each(this._controls,function(c,d){if(d instanceof P&&(b=d.lookupControl(a)))return l});return b};q(P.prototype,"lookupControl",P.prototype.lookupControl);
P.prototype.setAttributes=function(a){P._super.setAttributes.call(this,a);jQuery.each(this.getControls(),function(b,c){c.setAttributes(a)})};q(P.prototype,"setAttributes",P.prototype.setAttributes);P.prototype.setDataTree=function(a){P._super.setDataTree.call(this,a);jQuery.each(this.getControls(),function(b,c){var d=a.getTree(c._id);c.setDataTree(d)})};q(P.prototype,"setDataTree",P.prototype.setDataTree);
P.prototype.getDataTree=function(){var a=P._super.getDataTree.call(this);jQuery.each(this.getControls(),function(b,c){var d=c._id,f=c.getDataTree(d);f&&a.setTree(d,f)});return a};q(P.prototype,"getDataTree",P.prototype.getDataTree);function Ff(a,b){this._rootContainer=a;this._factoryProvider=b;this._contexts={}}p("wr.ui.ControlTreeBuilder",Ff);Ff.prototype._log=B.getLog("wr.ui.ControlTreeBuilder");Ff.prototype.getRootContainer=m("_rootContainer");q(Ff.prototype,"getRootContainer",Ff.prototype.getRootContainer);
Ff.prototype.addContext=function(a,b,c){var d=this,f=a._id,h=b===k?"":b.join("_"),j=b===k?0:b.length,o=this._contexts[f];o||(this._contexts[f]=o={rank:j,ctxs:{},ctrls:{}});o.rank!==j&&e(new x("View '"+f+"' already has a context added with a different number of indexes"));var j=o.ctxs,s=o.ctrls;j.hasOwnProperty(h)&&e(new x("View '"+f+"' already has a context added with indexes "+u(b)));j[h]=c;if(a=Gf(this,a,b,c))if(s[h]=a,Ua(a))a.onSuccess(function(a){s[h]=a}).onFailure(function(a){d._log.error("Error creating '"+
f+"' control",a)})};q(Ff.prototype,"addContext",Ff.prototype.addContext);Ff.prototype.removeContext=function(a,b){var c=this,d=a._id,f=this._contexts[d];if(f){var h=f.ctxs,f=f.ctrls;if(b!==g){var j=b===k?"":b.join("_");if(h.hasOwnProperty(j)){var o=f[j];if(o)if(Ua(o))o.onSuccess(function(d){Hf(c,a,b,d)});else Hf(this,a,b,o);delete h[j]}}else{for(j in h)if(h.hasOwnProperty(j)&&xd(h,j)){if(o=f[j])if(Ua(o))o.onSuccess(function(b){Hf(c,a,If(j),b)});else Hf(this,a,If(j),o);delete h[j]}delete this._contexts[d]}}};
q(Ff.prototype,"removeContext",Ff.prototype.removeContext);function If(a){return a?jQuery.map(a.split("_"),function(a){return Number(a)}):k}function Gf(a,b,c,d){var f=a._factoryProvider(b);if(!f)return k;b=f.create(b,c,d,a._factoryProvider);Ua(b)?b=b.chain(function(b){a._rootContainer.addControl(b);return b}):a._rootContainer.addControl(b);return b}function Hf(a,b,c,d){var f=a._factoryProvider(b);a._rootContainer.removeControl(d);f?f.destroy(b,c,d):d.destroy()};function Q(a,b){P.call(this,a,b)}t(Q,P);p("wr.ui.Display",Q);Q.prototype.setParent=function(a){a!==k&&e(new ia("Cannot set display parent"))};q(Q.prototype,"setParent",Q.prototype.setParent);Q.prototype.readAttributes=function(){var a=Q._super.readAttributes.call(this);a.visible=i;a.enabled=i;a.focused=i;return a};q(Q.prototype,"readAttributes",Q.prototype.readAttributes);
Q.prototype.writeAttributes=function(a){a.visible!==g&&e(new ia("Cannot set display 'visible' attribute"));a.enabled!==g&&e(new ia("Cannot set display 'enabled' attribute"));a.focused!==g&&e(new ia("Cannot set display 'focused' attribute"));Q._super.writeAttributes.call(this,a)};q(Q.prototype,"writeAttributes",Q.prototype.writeAttributes);Q.prototype.getWindows=function(){return this.getControls()};q(Q.prototype,"getWindows",Q.prototype.getWindows);Q.prototype.getWindow=function(a){return this.getControl(a)};
q(Q.prototype,"getWindow",Q.prototype.getWindow);Q.prototype.getOpenWindows=function(){var a=[];jQuery.each(this.getWindows(),function(b,c){c.isOpen()&&a.push(c)});return Ad(a)};q(Q.prototype,"getOpenWindows",Q.prototype.getOpenWindows);Q.prototype.openWindow=function(a){(a=a&&this.getWindow(a))&&a.open()};q(Q.prototype,"openWindow",Q.prototype.openWindow);Q.prototype.closeWindow=function(a){(a=a&&this.getWindow(a))&&a.close()};q(Q.prototype,"closeWindow",Q.prototype.closeWindow);
Q.prototype.toString=function(){return"Display:"+this._id};function Jf(a,b){this._display=a;this._state=b}p("wr.logic.Context",Jf);Jf.prototype.getDisplay=m("_display");q(Jf.prototype,"getDisplay",Jf.prototype.getDisplay);Jf.prototype.getState=m("_state");q(Jf.prototype,"getState",Jf.prototype.getState);function R(a,b){this._id=a;this._actor=b;this._failureLink=this._successLinks=this._transportLinks=k}p("wr.logic.Action",R);R.prototype._log=B.getLog("wr.logic.Action");R.prototype.destroy=function(){this._failureLink=this._successLinks=this._transportLinks=k;try{this._actor.destroy()}catch(a){this._log.error("Error destroying actor",a)}this._actor=k};q(R.prototype,"destroy",R.prototype.destroy);R.prototype.getId=m("_id");q(R.prototype,"getId",R.prototype.getId);R.prototype.getActor=m("_actor");
q(R.prototype,"getActor",R.prototype.getActor);R.prototype.addTransport=function(a,b){if(a)this._transportLinks?jQuery.each(this._transportLinks,function(b,d){d.action===a&&e(new x("Propagation for "+a+" already added"))}):this._transportLinks=[],this._transportLinks.push({action:a,couplings:b||k})};q(R.prototype,"addTransport",R.prototype.addTransport);
R.prototype.removeTransport=function(a){var b=this;a&&this._transportLinks&&jQuery.each(this._transportLinks,function(c,d){if(d.action===a)return b._transportLinks.splice(c,1),l})};q(R.prototype,"removeTransport",R.prototype.removeTransport);R.prototype.addSuccessHop=function(a,b,c){if(b)a=a||k,this._successLinks?this._successLinks.hasOwnProperty(a)&&e(new x("Success hop for '"+a+"' already added")):this._successLinks={},this._successLinks[a]={action:b,couplings:c||k}};
q(R.prototype,"addSuccessHop",R.prototype.addSuccessHop);R.prototype.removeSuccessHop=function(a){this._successLinks&&delete this._successLinks[a||k]};q(R.prototype,"removeSuccessHop",R.prototype.removeSuccessHop);R.prototype.addFailureHop=function(a,b){if(a)this._failureLink&&e(new x("Failure hop already added")),this._failureLink={action:a,couplings:b||k}};q(R.prototype,"addFailureHop",R.prototype.addFailureHop);R.prototype.removeFailureHop=function(){this._failureLink=k};
q(R.prototype,"removeFailureHop",R.prototype.removeFailureHop);R.prototype.execute=function(a,b){return Kf(this,a,{},b)};q(R.prototype,"execute",R.prototype.execute);
function Kf(a,b,c,d){a._log.isDebugEnabled&&a._log.debug("Executing "+a+". Input: "+u(b));var f={},b=Va(a._actor.execute,a._actor,b||{},f,d);return b=b.chain(function(b){a._log.isDebugEnabled&&a._log.debug("Executed "+a+": success. Output: "+u(f));var j=a._successLinks&&a._successLinks[b||k];return j?Lf(a,j,f,c,d):b},function(b){a._log.isDebugEnabled&&a._log.debug("Executed "+a+": failure. Output: "+u(f),b);var j=a._failureLink;return j?Lf(a,j,f,c,d):b})}
function Lf(a,b,c,d,f){a._transportLinks&&jQuery.each(a._transportLinks,function(a,b){Mf(b,c,d)});Mf(b,c,d);return Kf(b.action,d[b.action._id]||{},d,f)}function Mf(a,b,c){var d=a.action._id,a=a.couplings,f;(f=c[d])||(f=c[d]={});jQuery.each(a,function(a,c){var d=g,s=c._sourceName,W=c._sourceValue;s&&(d=b[s]);d===g&&(d=W);d!==g&&(f[c._targetName]=d)})}R.prototype.toString=function(){return"Action:"+this._id};function Nf(){this._actions=this._app=k}t(Nf,Oa);p("wr.logic.LogicPlugin",Nf);Nf.prototype._log=B.getLog("wr.logic.LogicPlugin");Nf.prototype.configure=function(a){Of(this);if(a.actions)return Pf(this,a.actions)};q(Nf.prototype,"configure",Nf.prototype.configure);Nf.prototype.dispose=function(){Of(this)};q(Nf.prototype,"dispose",Nf.prototype.dispose);
function Pf(a,b){var c=a.getApp().getConfigPlugin(),d={},f=[],h={};D(b,function(b,f){var h=Qf(a,f,b,c);d[f]=h});D(b,function(a,b){var c=d[b],c=c.chain(function(b){return Rf(b,a,d)}),c=c.chain(function(a){h[b]=a});f.push(c)});return Sa.apply(y,f).chain(function(){a._actions=h},g)}function Of(a){if(a._actions)D(a._actions,function(a){a.destroy()}),a._actions=k}
function Qf(a,b,c,d){var f,d=d.readInstanceFactory(c.actor);f=c.actorConfig||{};return d.newInstance().chain(function(c){na(c,Pa)&&c.setApp(a.getApp());c.setup(f);return new R(b,c)})}
function Rf(a,b,c){var d=[];D(b,function(b,h){var j,o,s;if(j=/^(transport|success|failure)(?:_(.+))?$/.exec(h))o=j[1],s=j[2],D(b,function(b,f){var h=[],j;(j=c[f])||e(Error("Invalid target action '"+f+"'"));D(b,function(a,b){var c=k,d=g;"string"===typeof a?c=a:"object"===typeof a&&(d=a.value||g);h.push(new ub(b,c,d))});j=j.chain(function(b){"success"===o?a.addSuccessHop(s,b,h):"failure"===o?a.addFailureHop(b,h):"transport"===o&&a.addTransport(b,h)});d.push(j)})});return Sa.apply(y,d).chain(function(){return a},
g)}Nf.prototype.getAction=function(a){this._actions||e(new x("Actions are not available"));return this._actions[a]||k};q(Nf.prototype,"getAction",Nf.prototype.getAction);Nf.prototype.executeAction=function(a,b,c){var d=this.getAction(a);d||e(Error("Action '"+a+"' not found"));return d.execute(b,c)};q(Nf.prototype,"executeAction",Nf.prototype.executeAction);function Sf(){this._app=k}p("wr.ui.ViewerBasedControlFactory",Sf);Sf.prototype.setApp=ca("_app");q(Sf.prototype,"setApp",Sf.prototype.setApp);
Sf.prototype.create=function(a,b,c,d){var f=this;this._app||e(new x("Application not set"));var h=this._app.getConfigPlugin().readInstanceFactory(a._config.viewer,[a,b]),j=a._config.viewerConfig||{};h||e(Error("View does not have a configured viewer"));return h.newInstance().chain(function(h){var s;a.getViews();na(h,Pa)&&h.setApp(f._app);h.isContextProvider()?(s=f.newContainer(a,b,h),d&&h.setContextRegistry(f.newContextRegistry(s,0,d))):s=f.newControl(a,b,h);h.setup(j,c,k);return s})};
q(Sf.prototype,"create",Sf.prototype.create);Sf.prototype.destroy=function(a,b,c){c.destroy()};q(Sf.prototype,"destroy",Sf.prototype.destroy);Sf.prototype.newContextRegistry=function(a,b,c){return new Ff(a,c)};q(Sf.prototype,"newContextRegistry",Sf.prototype.newContextRegistry);Sf.prototype.newControl=function(a,b,c){return new O(this.makeControlId(a,b),c)};q(Sf.prototype,"newControl",Sf.prototype.newControl);Sf.prototype.newContainer=function(a,b,c){return new P(this.makeControlId(a,b),c)};
q(Sf.prototype,"newContainer",Sf.prototype.newContainer);Sf.prototype.makeControlId=function(a,b){var c=[a._id];b&&jQuery.each(b,function(a,b){jQuery.merge(c,["[",b,"]"])});return c.join("")};q(Sf.prototype,"makeControlId",Sf.prototype.makeControlId);function Tf(){this._app=k}t(Tf,Sf);p("wr.ui.DisplayControlFactory",Tf);Tf.prototype.newControl=function(a,b,c){return new Q(this.makeControlId(a,b),c)};q(Tf.prototype,"newControl",Tf.prototype.newControl);Tf.prototype.newContainer=function(a,b,c){return new Q(this.makeControlId(a,b),c)};q(Tf.prototype,"newContainer",Tf.prototype.newContainer);function S(a,b){P.call(this,a,b);this._lastFocusedControlId=k;this.addEventListener("focus",jQuery.proxy(this._handleFocus,this))}t(S,P);p("wr.ui.Window",S);S.prototype.open=function(){this.setAttribute("open",i)};q(S.prototype,"open",S.prototype.open);S.prototype.close=function(){this.setAttribute("open",l)};q(S.prototype,"close",S.prototype.close);S.prototype.isOpen=function(){return this.getAttribute("open")===i};q(S.prototype,"isOpen",S.prototype.isOpen);S.prototype.setTitle=function(a){this.setData({title:a})};
q(S.prototype,"setTitle",S.prototype.setTitle);S.prototype.getTitle=function(){return this.getData().title||k};q(S.prototype,"getTitle",S.prototype.getTitle);S.prototype.readAttributes=function(){var a=S._super.readAttributes.call(this);a.visible=a.open;a.enabled=i;return a};q(S.prototype,"readAttributes",S.prototype.readAttributes);
S.prototype.writeAttributes=function(a){a.visible!==g&&e(new ia("Cannot set window 'visible' attribute directly"));a.enabled!==g&&e(new ia("Cannot set window 'enabled' attribute"));S._super.writeAttributes.call(this,a);a.focused===i&&Uf(this)};q(S.prototype,"writeAttributes",S.prototype.writeAttributes);S.prototype._handleFocus=function(a){a=a._sourceControl;a===this?Uf(this):this._lastFocusedControlId=a._id};
function Uf(a){var b;(b=a._lastFocusedControlId?a.lookupControl(a._lastFocusedControlId):a.getControls()[0]||k)?b.focus():a._lastFocusedControlId=k}S.prototype.toString=function(){var a=["Window:",this._id],b=k;try{b=this.getTitle()}catch(c){}b&&(a.push(':("'),a.push(b),a.push('")'));return a.join("")};function Vf(){this._app=k}t(Vf,Sf);p("wr.ui.WindowControlFactory",Vf);Vf.prototype.newControl=function(a,b,c){return new S(this.makeControlId(a,b),c)};q(Vf.prototype,"newControl",Vf.prototype.newControl);Vf.prototype.newContainer=function(a,b,c){return new S(this.makeControlId(a,b),c)};q(Vf.prototype,"newContainer",Vf.prototype.newContainer);function T(a,b,c){L.call(this,a,b,c)}t(T,L);p("wr.ui.html.ElementViewer",T);T.prototype._log2=B.getLog("wr.ui.html.ElementViewer");T.prototype._codeLog=B.getLog("wr.ui.html.ElementViewer._code");T.prototype.setup=function(a,b){T._super.setup.call(this,a,b);jQuery(this.getContext()).on(Wf,jQuery.proxy(this.handleEvent,this))};q(T.prototype,"setup",T.prototype.setup);T.prototype.destroy=function(){jQuery(this.getContext()).off(Wf,this.handleEvent);T._super.destroy.call(this)};
q(T.prototype,"destroy",T.prototype.destroy);var Xf={focusin:"focus",focusout:"blur",click:"click",keypress:"keypress",keydown:"keydown",keyup:"keyup"},Wf=function(){var a=[];D(Xf,function(b,c){a.push(c+".wr")});return a.join(" ")}();T.prototype.handleEvent=function(a){var b=Xf[a.type];b&&this.raiseEventForHtmlEvent(b,k,a)};q(T.prototype,"handleEvent",T.prototype.handleEvent);var Yf={pointer:"pointer",wait:"wait"},Zf={pointer:"pointer",wait:"wait"};
T.prototype.writeAttributes=function(a){var b=jQuery(this.getContext()),c=a&&a.visible;c!==g&&(c?b.show():b.hide());c=a&&a.cursorType;if(c!==g)b[0].style.cursor=Zf[c]||"";T._super.writeAttributes.call(this,a)};q(T.prototype,"writeAttributes",T.prototype.writeAttributes);T.prototype.readAttributes=function(){var a=T._super.readAttributes.call(this),b=jQuery(this.getContext());a.visible=b.is(":visible");a.cursorType=Yf[b[0].style.cursor]||g;return a};q(T.prototype,"readAttributes",T.prototype.readAttributes);
T.prototype.writeData=function(a){var b=a.html;if(b!==g){var c=jQuery(this.getContext()),d=jQuery(this.getLastFocusedElement()),f=this.isFocused()?d.attr("id"):g,a=d[0]&&$c(d[0]),d=d.is(":text")?d.val():k;this.updateContent(b);f&&(this._log2.debug($f(this,"Restoring focus to element '"+f+"'")),b=c.find("#"+tc(f)),0<b.length?(Zc(b[0]),a&&(f=b.is(":text")?b.val():k,d&&f&&d!==f&&(a=cd(a,d,f)),bd(b[0],a))):this._log2.debug($f(this,"Focus not restored to disappeared element '"+f+"'")))}};
q(T.prototype,"writeData",T.prototype.writeData);T.prototype.sanitizeHTML=function(a){var b,c;return(b=/<body(?:\s[^>]+)?>/i.exec(a))&&(c=/<\/body>/i.exec(a))?a.substring(b.index+b[0].length,c.index):a};q(T.prototype,"sanitizeHTML",T.prototype.sanitizeHTML);T.prototype.extractResourceElements=function(a){var b,c,d=k;if((b=/<head[^>]*>/i.exec(a))&&(c=/<\/head>/i.exec(a)))d=_.str.trim(a.substring(b.index+b[0].length,c.index));return d?jQuery(d).filter("script, link, style").get():[]};
q(T.prototype,"extractResourceElements",T.prototype.extractResourceElements);function ag(a,b){"string"===typeof b&&(/<\/?html[\s>]/.test(b)||/<\/?head[\s>]/.test(b)||/<\/?body[\s>]/.test(b))&&a._log2.warn("HTML fragment appears to contain elements forbidden in document body: this may cripple UI behavior");var c=jQuery("<div/>")[0];if("string"===typeof b)a._setInnerHTML(c,b);else for(var d;d=b[0];)c.insertBefore(d,k);return c}
T.prototype._setInnerHTML=function(a,b){var c=l,d=jQuery("<div/>")[0];d.innerHTML='<script>"test";<\/script>';if(0>d.innerHTML.toLowerCase().indexOf("<script"))d.innerHTML='<form></form><script>"test";<\/script>',c=0<d.innerHTML.toLowerCase().indexOf("<script");Yb(d);c=c?function(a,b){a.innerHTML="<form id='_hack_form'></form>"+b;var c=a.firstChild;"_hack_form"===c.id&&Yb(c)}:function(a,b){a.innerHTML=b};T.prototype._setInnerHTML=c;return c(a,b)};
T.prototype.updateContent=function(a){var b=this.createOldContentFragment(),c=this.createNewContentFragment(this.sanitizeHTML(a)),a=jQuery(this.extractResourceElements(a)).filter(function(){var a=ed(this,i);return a?id(a):i}),d=c.firstChild;a.each(function(){c.insertBefore(this,d)});dc();try{this.replaceContent(b,c)}catch(f){f instanceof ra?(this._log2.error($f(this,"Error caused by inline scripts in updated content (see log for full code)"),f.cause||f),this._codeLog.isDebugEnabled()&&this._codeLog.debug($f(this,
"Executed code was:\r\n"+f.sourceCode))):this._log2.error($f(this,"Error during content update"),f)}finally{ec()}a.each(function(){var a=ed(this,i);a&&jd(a.name)});this.destroyFragments(b,c)};q(T.prototype,"updateContent",T.prototype.updateContent);T.prototype.createOldContentFragment=function(){return ag(this,this.getContext().childNodes)};q(T.prototype,"createOldContentFragment",T.prototype.createOldContentFragment);T.prototype.createNewContentFragment=function(a){return ag(this,a)};
q(T.prototype,"createNewContentFragment",T.prototype.createNewContentFragment);T.prototype.destroyFragments=function(a,b){$b(a);$b(b)};q(T.prototype,"destroyFragments",T.prototype.destroyFragments);T.prototype.replaceContent=function(a,b){var c=jQuery(this.getContext());c.empty();gc();try{ac(c[0],jQuery.makeArray(b.childNodes))}finally{var d=hc();0<d.length&&(d=jQuery("<div>"+d.join("")+"</div>")[0],ac(c[0],jQuery.makeArray(d.childNodes)))}};q(T.prototype,"replaceContent",T.prototype.replaceContent);
function $f(a,b){return"["+a.getView()._id+"] "+b};function bg(a,b){L.call(this,a,b,i);this._containersFilter=k;this._availableViews={}}t(bg,T);p("wr.ui.html.ContainerElementViewer",bg);bg.prototype.setup=function(a,b){if(Nd(b))b=b.body,b==k&&e(Error("DOM Document context must contain a HTML body"));a.containersFilter||e(Error("Containers filter not specified"));this._containersFilter=a.containersFilter;bg._super.setup.call(this,a,b);this._refreshContexts(k,cg(this),l)};q(bg.prototype,"setup",bg.prototype.setup);
bg.prototype.destroy=function(){this._refreshContexts(cg(this),k,i);bg._super.destroy.call(this)};q(bg.prototype,"destroy",bg.prototype.destroy);
bg.prototype.replaceContent=function(a,b){function c(a){var b=[];jQuery.each(a,function(a,c){b.push(c.value)});return jQuery(b)}var d=cg(this,a),f=cg(this,b),f=f.map(function(){var a=jQuery(this),b=a.attr("id");return b&&a.is(":empty")&&(b=d.filter("#"+tc(b)).eq(0),b[0]&&a[0]!==b[0])?(a[0].parentNode.replaceChild(b[0],a[0]),b.find("script").filter(function(){return/^$|\/(?:java|ecma)script/i.test(this.type)}).each(function(){Yb(this)}),b[0]):k});jQuery(this.getContext()).is("body")&&(dg(jQuery(b)),
eg(jQuery(a),jQuery(b)));bg._super.replaceContent.call(this,a,b);f=yd(d,f);this._refreshContexts(c(f.removed),c(f.added),l)};q(bg.prototype,"replaceContent",bg.prototype.replaceContent);function dg(a){a.children().each(function(){jQuery.data(this,"wr-initial",i)})}function eg(a,b){var c=a.children(),d=[],f=[],h;for(h=0;h<c.length&&!jQuery.data(c[h],"wr-initial");h++)d.push(c[h]);for(h=c.length-1;0<h&&!jQuery.data(c[h],"wr-initial");h--)f.unshift(c[h]);b.prepend(jQuery(d)).append(jQuery(f))}
jQuery(function(){var a=jQuery("body");a[0]&&dg(a)});bg.prototype.refreshSubViews=function(){this._refreshContexts(k,k,l)};q(bg.prototype,"refreshSubViews",bg.prototype.refreshSubViews);
bg.prototype._refreshContexts=function(a,b,c){var d=this,f=this.getContextRegistry(),h=this.collectSubViewsDiffs();jQuery.each(h.removed,function(a,b){var c=b._id;f&&f.removeContext(b);delete d._availableViews[c]});f&&a&&a.each(function(){var a=d._availableViews[jQuery(this).attr("id")];a&&f.removeContext(a)});jQuery.each(h.added,function(a,b){d._availableViews[b._id]=b});!c&&b&&b.each(function(){var a=d._availableViews[jQuery(this).attr("id")];a&&f.addContext(a,k,this)})};
function cg(a,b){return(b=b||a.getContext())&&a._containersFilter?jQuery(Pd(b,a._containersFilter)):k};function U(){this._app=k;var a=this;this._context=this._requestAction=this._containersFilter=k;this._windowKeys=new fg;this._controlCloseListener=function(b){b=b._sourceControl;b instanceof S&&gg(a,b)};this._navListener={requestEnqueue:function(a){var c=a._inputs[0];a._wr_enqueuedForm=c&&c.form},requestBeforeServe:function(b){var c=b._wr_enqueuedForm;c&&!jQuery.contains(GLOBAL.document.documentElement,c)&&(a._log.isDebugEnabled()&&a._log.debug("Canceling request bound to post a removed form "+u(c)),
a.getApp().getPlugin("nav").cancel(b))}};this._startListeners=[];this._started=l}t(U,Oa);p("wr.LegacyAjaxPlugin",U);U.prototype._log=B.getLog("wr.LegacyAjaxPlugin");U.prototype.configure=function(a){a.containersFilter||e(Error("Containers filter not specified"));this._containersFilter=a.containersFilter};q(U.prototype,"configure",U.prototype.configure);
U.prototype.start=function(){var a=this,b=jQuery(GLOBAL.document),c=this.getApp().getPlugin("ui").getDisplay(),d=new hg(c,this);this._requestAction=ig(this);this._context=new Jf(c,d);this.getApp().getPlugin("nav").addListener(this._navListener);this._hyperlinkActivationListener=jg(this,this._handleHyperlinkActivation);this._hyperlinkNavigationListener=jg(this,this._handleHyperlinkNavigation);this._formButtonActivationListener=jg(this,this._handleFormButtonActivation);this._formSubmissionListener=
jg(this,this._handleFormSubmission);b.on("focusin mouseenter","a, area",jQuery.proxy(this._hyperlinkActivationListener,this));b.on("click","a, area",jQuery.proxy(this._hyperlinkNavigationListener,this));b.on("click submit",":submit",jQuery.proxy(this._formButtonActivationListener,this));b.on("submit","form",jQuery.proxy(this._formSubmissionListener,this));c.addEventListener("contentchange",kg);c.addEventListener("close",this._controlCloseListener);lg(this,this._context.getDisplay());mg(this,c.getWindows()[0]);
ng(this);_.each(this._startListeners,function(b){try{b()}catch(c){a.error("Error invoking start listener",c)}});this._started=i};q(U.prototype,"start",U.prototype.start);
U.prototype.stop=function(){var a=jQuery(GLOBAL.document),b=this.getApp().getPlugin("ui").getDisplay(),c=this.getApp()._externalExecutionScope;c.deleteGlobal("WRAjaxRequest");c.deleteGlobal("ajaxRequest");og(this,"Prototype")?this._log.debug("Skipping deletion of global $H Prototype's function"):c.deleteGlobal("$H");this._log.info("Compatibility interface disabled");this._windowKeys.clear();ff.linkInfos={};ff.linkInfosSelective={};this._log.debug("Cleared link information");lf();this._log.debug("Cleared link data");
b.removeEventListener("close",this._controlCloseListener);b.removeEventListener("contentchange",kg);a.off("focusin mouseenter","a, area",this._hyperlinkActivationListener);a.off("click","a, area",this._hyperlinkNavigationListener);a.off("click",":submit",this._formButtonActivationListener);a.off("submit","form",this._formSubmissionListener);this.getApp().getPlugin("nav").removeListener(this._navListener);this._context=k;if(this._requestAction)this._requestAction.destroy(),this._requestAction=k;this._started=
l};q(U.prototype,"stop",U.prototype.stop);U.prototype.addStartListener=function(a){if(a&&(this._startListeners.push(a),this._started))try{a()}catch(b){this.error("Error invoking start listener",b)}};q(U.prototype,"addStartListener",U.prototype.addStartListener);U.prototype.removeStartListener=function(a){if(a)this._startListeners=_.without(this._startListeners,a)};q(U.prototype,"removeStartListener",U.prototype.removeStartListener);q(U,"addEventInterceptor",function(a){a&&Kc.add(a)});
q(U,"removeEventInterceptor",function(a){a&&Kc.remove(a)});var pg=[];q(U,"addContentUpdateHandler",function(a){a&&pg.push(a)});q(U,"removeContentUpdateHandler",function(a){a&&(pg=_.without(pg,a))});var qg=jQuery.Callbacks("unique");q(U,"addContentUpdateListener",function(a){a&&qg.add(a)});q(U,"removeContentUpdateListener",function(a){a&&qg.remove(a)});
function kg(a){var b;a=a._sourceControl;a instanceof S&&(b=(a=a.getControls()[0])&&a._viewer,a=b,a instanceof L&&qg.fireWith(GLOBAL,[a.getContext()]))}
q(U,"navigateLocation",function(a,b){var c=Jc().getPlugin("oldajax");rg(a)&&(!b||"_self"===b)?(c._log.isDebugEnabled()&&c._log.debug("Firing AJAX request for location change to "+a),c._compatAjaxRequest(a,c._compatNewHash({}))):(c._log.isDebugEnabled()&&c._log.debug("Queuing request for location change to "+a),c.getApp().getPlugin("nav").navigate(new F(a,k,k,b)))});q(U,"exit",function(){var a=Jc(),b=a.getPlugin("ui").getDisplay().getOpenWindows(),c;for(c=b.length-1;0<=c;c--)b[c].close();return a.stop().chain(function(){a.dispose()})});
function ng(a){function b(){d.setGlobal("$H",jQuery.proxy(c._compatNewHash,c))}var c=a,d=a.getApp()._externalExecutionScope;og(a,"$H")?og(a,"Prototype")?a._log.debug("Skipping re-definition of global $H Prototype's function"):(a._log.warn("Overwriting existing global $H function"),b()):b();(og(a,"ajaxRequest")||og(a,"WRAjaxRequest"))&&e(Error("Legacy interface conflict: check that WebRatio 6.x and earlier client runtime is not loaded"));d.setGlobal("ajaxRequest",jQuery.proxy(a._compatAjaxRequest,
a));d.setGlobal("WRAjaxRequest",jQuery.proxy(a._compatAjaxRequestCtor,a));a._log.info("Compatibility interface enabled")}function og(a,b){return"undefined"!==typeof a.getApp()._externalExecutionScope.getGlobal(b)||"undefined"!==typeof GLOBAL[b]}n=U.prototype;n._compatNewHash=function(a){a=a||{};return{get:function(b){return a[b]},toObject:function(){return a}}};
n._compatAjaxRequest=function(a,b){var c=this;try{this._log.debug("Queuing AJAX request to "+a);var d=sg(this,b),f=tg(a,d);ld();var h=this._context,j=h.getDisplay(),o=this._requestAction.execute(f,h),s=[],W=function(a){a._sourceControl instanceof S&&s.push(a._sourceControl)};j.addEventListener("open",W);j.addEventListener("contentchange",W);var f=function(){j.removeEventListener("open",W);j.removeEventListener("contentchange",W);0<s.length&&_.each(s,function(a){var b=a.getControls()[0],b=b&&b._viewer;
(b=b instanceof L?b.getContext():k)&&jQuery(b).data("wr-appid",c.getApp()._id);mg(c,a);lg(c,a)})},o=o.chain(f,f),f=function(){ld()},o=o.chain(f,f),M=ba(),o=o.chain(M,M);if(d.onFailureCallBack)o.onFailure(function(){GLOBAL.eval(d.onFailureCallBack+"()")});if(d.onCompleteCallBack)o.onComplete(function(){d.onCompleteCallBack()})}catch(Ka){this._log.error("Error preparing request",Ka)}if((o=GLOBAL.event)&&("click"===o.type||"keypress"===o.type))if(jQuery(o.target||o.srcElement).closest("[href], :submit")[0])GLOBAL.event.returnValue=
l;return l};
n._compatAjaxRequestCtor=function(a,b){var c=this;this._log.debug("Legacy precomputed request to "+a);var d=sg(this,b),d=tg(a,d),f=this._requestAction._actor,h=this._context;d.allowIgnoreFields=l;var j=f.precomputeRequest(d);d.allowIgnoreFields=i;var o=f.precomputeRequest(d);return function(a,b){var d={};_.each(b.useless||[],function(b){d[b]=function(){c._log.warn("Calling "+a+"."+b+" - Method has no more use")}});_.each(b.gone||[],function(b){d[b]=function(){c._log.warn("Calling "+a+"."+b+" - Method is no longer available")}});
jQuery.extend(d,b.impl||{});return d}("WRAjaxRequest",{useless:["updateWindowSize"],gone:["sendRequest","openInfoDialog","createAndPrepareWindow"],impl:{getUrl:function(a){return c._compatNewHash(a===l?j:o)},computeResponse:function(a){f.processResponse(a,h)}}})};
function sg(a,b){var c={};if(b){c.isForm=b.get("isForm");c.pressedLink=b.get("pressedLink");c.selectiveRefresh=b.get("selectiveRefresh");c.onFailureCallBack=b.get("onFailureCallBack");c.onCompleteCallBack=b.get("onCompleteCallBack");c.extraQuery=b.get("extraQuery");c.sourcePage=b.get("sourcePage");b.get("window")!==g&&a._log.warn("Setting request window option - Option has no more use");b.get("closeWindow")!==g&&a._log.warn("Setting request closeWindow option - Option has no more use");var d=b.get("waitingWindow");
c.openWaitingWindow=!!d;c.waitWin={};if(c.openWaitingWindow)c.waitWin.message=d.get("message"),c.waitWin.width=d.get("width"),c.waitWin.height=d.get("height"),c.waitWin.duration=d.get("duration"),c.waitWin.className=d.get("className");c.indicator=b.get("indicator")}return c}
function tg(a,b){var c,d;b.isForm?((d=jQuery("#"+tc(a))[0]||jQuery("form[name='"+uc(a)+"']")[0])||e(Error("Form '"+a+"' not found for posting")),c=jQuery(d).attr("action"),d={form:d,button:b.pressedLink,selectiveRefresh:"boolean"===typeof b.selectiveRefresh?b.selectiveRefresh:i}):(c=a,d=k);b.extraQuery&&(c=c+(0>c.indexOf("?")?"?":"")+b.extraQuery);var f={};f.url=c;d&&(f.formPost={button:d.button,form:d.form,selectiveRefresh:d.selectiveRefresh});b.openWaitingWindow&&(f.waitWin={id:"_oldajax_ww",duration:b.waitWin.duration,
width:b.waitWin.width,height:b.waitWin.height,className:b.waitWin.className,message:b.waitWin.message});b.indicator&&(f.indicator="string"===typeof b.indicator?jQuery("#"+tc(b.indicator))[0]:b.indicator);return f}function ig(a){var b=new N;na(b,Pa)&&b.setApp(a.getApp());b.setup({});return new R("oldajax",b)}n._handleHyperlinkActivation=function(a){a=jQuery(a.currentTarget);if(a.attr("href")){var b=this.getApp().getPlugin("nav"),c=ug(a);b.precompute(c);Ha(c.getURL())&&a.attr("href",Ga(c.getURL(),c.getParams()))}};
n._handleHyperlinkNavigation=function(a){if(!a.isDefaultPrevented()){var b=jQuery(a.currentTarget);if(b.attr("href")&&vg(b.attr("href"))){a.preventDefault();var a=b.attr("href"),c=b.attr("target")||k;rg(a)&&(!c||"_self"===c)?(this._log.isDebugEnabled()&&this._log.debug("Firing AJAX request for hyperlink "+u(b[0])),this._compatAjaxRequest(a,this._compatNewHash({}))):(this._log.isDebugEnabled()&&this._log.debug("Queuing request for hyperlink "+u(b[0])),this.getApp().getPlugin("nav").navigate(ug(b)))}}};
function ug(a){var b=a.attr("href"),a=a.attr("target")||k;return new F(b,k,k,a)}n._handleFormButtonActivation=function(a){var a=jQuery(a.currentTarget),b=jQuery(a[0].form);b[0]&&b.data("_wr_submitButton",a.prop("name"))};
n._handleFormSubmission=function(a){if(!a.isDefaultPrevented()){var b=jQuery(a.currentTarget),c=b.data("_wr_submitButton");if(c&&(b.removeData("_wr_submitButton"),c=b.find(":submit[name='"+tc(c)+"']"),vg(b.attr("action")||""))){a.preventDefault();var a=b.attr("action")||"",d=b.attr("target")||k,f=c.attr("name"),h=_.str.strRight(f,"button:");(h=b.find(":input:hidden[name='"+tc(h)+"']").attr("value"))||this._log.warn("Cannot find action URL associated with button '"+f+"'");rg(h)&&(!d||"_self"===d)?
(this._log.isDebugEnabled()&&this._log.debug("Firing AJAX request for submit of form "+u(b[0])),(b=b.attr("id")||b.attr("name"))?this._compatAjaxRequest(b,this._compatNewHash({isForm:i,pressedLink:f,selectiveRefresh:l})):this._log.error("Cannot submit a form lacking both 'id' and 'name' attributes")):(this._log.isDebugEnabled()&&this._log.debug("Queuing request for submit of form "+u(b[0])),b=b.find(":input:not(:submit)").add(c).get(),b=new F(a,k,b,d),this.getApp().getPlugin("nav").navigate(b))}}};
var wg=new XRegExp("^!(?<fparams>.+)");function rg(a){a=parseUri(a);a=XRegExp.exec(a.anchor,wg);return"true"===(a?jQuery.deparam.querystring(a.fparams):{}).ajax}function jg(a,b){var c=a.getApp()._id;return function(a){if(""+(jQuery(a.target).parents().filter(function(){return jQuery(this).data("wr-appid")}).data("wr-appid")||"default")===c)return b.call(this,a)}}
function vg(a){(a=parseUri(a).protocol.toLowerCase())||(a=parseUri(GLOBAL.document.location.href).protocol.toLowerCase());return"http"===a||"https"===a}function hg(a,b){this._display=a;this._parent=b}n=hg.prototype;n.get=da(k);n.set=function(a,b){var c=this._display.lookupControl(a);c?(this._parent._log.debug("Updating HTML data of control '"+a+"'"),c.setData({html:b}),lg(this._parent,c)):_.str.trim(""+b)&&this._parent._log.warn("Control '"+a+"' not found")};n.remove=ba();n.toObject=function(){return{}};
n.addEventListener=ba();n.removeEventListener=ba();n.triggerEvent=ba();function lg(a,b){if(b instanceof P){var c;c=b instanceof Q?b:a.getApp().getPlugin("ui").getDisplay();b===c?_.each(c.getWindows(),function(b){xg(a,b)}):b instanceof S?xg(a,b):(c=b._viewer,c instanceof L&&yg(a,b,c.getContext(),k))}}
function xg(a,b){var c=a._containersFilter,d=b.getControls()[0],f=d&&d._viewer;if(f instanceof L){var d=b.getParent(),h=d.getWindows()[0],j=[];b===h&&_.each(d.getWindows(),function(a){var b=a.getControls()[0],b=b&&b._viewer;a!==h&&b instanceof L&&Array.prototype.push.apply(j,jQuery.makeArray(Pd(b.getContext(),c)))});d=b.getControls()[0];b===h?yg(a,d,f.getContext(),j):yg(a,d,f.getContext(),k)}}
function yg(a,b,c,d){var f=a._containersFilter,h=_.map(b.getControls(),function(a){return a._viewer.getContext()}),j=[];f&&(j=_.map(jQuery(Pd(c,f)).not(jQuery(d)),aa()));c=yd(h,j);_.each(c.removed,function(c){var c=c.value.id,d=b.getControl(c);a._log.debug("Removing control for removed container '"+c+"'");d&&(b.removeControl(d),d.destroy())});_.each(b.getControls(),function(b){var c=jQuery("#"+tc(b._id))[0];yg(a,b,c,k)});_.each(c.added,function(c){var c=c.value,d=c.id,h;a._log.debug("Adding control for added container '"+
d+"'");h=new zg(new Dd(d,{}),k);d=new P(d,h);h.setup({containersFilter:f},c);b.addControl(d);yg(a,d,c,k)})}function zg(a,b){bg.call(this,a,b)}t(zg,bg);n=zg.prototype;n.setup=function(a,b){zg._super.setup.call(this,a,b);this._lazyRemove=!!jQuery(this.getContext()).children(".wr-ajaxContent")[0]};
n.updateContent=function(a){function b(a){if(0<=a){var d=b(a-1);return function(b,c){f[a](b,c,d)}}return function(a,b){h.call(c,b)}}var c=this,d=this.getContext(),f=pg,h=zg._super.updateContent;b(f.length-1)(d,a);qg.fireWith(GLOBAL,[d])};n.createOldContentFragment=function(){return this._lazyRemove?jQuery(this.getContext()).children(".wr-ajaxContent").hide()[0]:zg._super.createOldContentFragment.call(this)};
n.createNewContentFragment=function(a){a=zg._super.createNewContentFragment.call(this,a);if(this._lazyRemove){var b=jQuery(a).children(".wr-ajaxContent")[0];b||e(Error("Content holder element missing in new HTML."));b["wr-fragRoot"]=a;a=b}return a};
n.destroyFragments=function(a,b){function c(a){if(a.id)jQuery.data(a,"wr-originalId",a.id),a.id="___"+a.id;if(a.name)jQuery.data(a,"wr-originalName",a.name),a.name="___"+a.name;if(a.form)a.disabled=i;for(var b=0,a=a.childNodes,d=a.length;b<d;b++){var f=a[b];1==f.nodeType&&f.nodeName&&"SELECT"!=f.nodeName.toUpperCase()&&c(f)}}if(this._lazyRemove){c(a);var d=b["wr-fragRoot"];try{delete b["wr-fragRoot"]}catch(f){try{b.removeAttribute("wr-fragRoot")}catch(h){b["wr-fragRoot"]=k}}b=d}zg._super.destroyFragments.call(this,
a,b)};n.replaceContent=function(a,b){var c=[];jQuery(b).find(".ajaxPreservedMarkup script").each(function(){c.unshift({script:this,parent:this.parentNode,next:this.nextSibling})});if(this._lazyRemove){var d=this.getContext();gc();try{cc(d,[b],a)}finally{var f=hc();0<f.length&&(f=jQuery("<div>"+f.join("")+"</div>")[0],ac(d,jQuery.makeArray(f.childNodes)))}}else zg._super.replaceContent.call(this,a,b);_.each(c,function(a){a.parent.insertBefore(a.script,a.next)})};
function mg(a,b){var c=b.getControls()[0],c=c&&c._viewer;if(c=c instanceof L?c.getContext():k){var d=a._windowKeys,f=Ag(c,"linkInfos");f&&(Bg(d,b,"info",Ud(f)),Vd(ff.linkInfos,f,1),a._log.isDebugEnabled()&&a._log.debug("Received new link information: "+u(f)));if(f=Ag(c,"linkInfosSelective"))Bg(d,b,"infoSel",Ud(f)),Vd(ff.linkInfosSelective,f,1),a._log.isDebugEnabled()&&a._log.debug("Received new selective link information: "+u(f));if(c=Ag(c,"linkData"))D(c,function(a,c){Bg(d,b,"data",[c]);kf(c,a)}),
a._log.isDebugEnabled()&&a._log.debug("Received new link data: "+u(c))}}function gg(a,b){var c=a._windowKeys,d=Cg(c,b,"info"),f=Cg(c,b,"infoSel"),c=Cg(c,b,"data");0>=d.length&&0>=c.length||(_.each(d,function(a){delete ff.linkInfos[a]}),a._log.debug("Cleared link information: "+u(d)),_.each(f,function(a){delete ff.linkInfosSelective[a]}),a._log.debug("Cleared selective link information: "+u(f)),_.each(c,function(a){lf(a)}),a._log.debug("Cleared link data: "+u(c)))}
function Ag(a,b){if(!a||!b)return k;var c=jQuery(a).find("script[type='application/json'].wr-"+tc(b)).eq(0),c=_.str.trim(c.text()||c.html()||"");return!c?k:jQuery.parseJSON(c)}function fg(){this._usageKeys={};this._keyUsages={}}function Bg(a,b,c,d){var f=b._id+"."+c,b=a._usageKeys[f]||(a._usageKeys[f]=[]);b.push.apply(b,d);var h=a._keyUsages;_.each(d,function(a){(h[a]||(h[a]=[])).push(f)})}
function Cg(a,b,c){var d=b._id+"."+c,b=a._usageKeys[d]||[];delete a._usageKeys[d];var f=a._keyUsages;_.each(b,function(a){var a=f[a],b=-1;a&&0<=(b=_.indexOf(a,d))&&a.splice(b,1)});return b=_.filter(b,function(a){return!Dg(this,c,a)},a)}fg.prototype.clear=function(){this._usageKeys={};this._keyUsages={}};function Dg(a,b,c){return _.some(a._keyUsages[c]||[],function(a){return _.str.endsWith(a,"."+b)})};function Eg(a,b){L.call(this,a,b,i)}t(Eg,T);p("wr.ui.html.OverloadedElementViewer",Eg);Eg.prototype.setup=function(a,b){Eg._super.setup.call(this,a,b);this._refreshContexts(l)};q(Eg.prototype,"setup",Eg.prototype.setup);Eg.prototype.destroy=function(){this._refreshContexts(i);Eg._super.destroy.call(this)};q(Eg.prototype,"destroy",Eg.prototype.destroy);Eg.prototype.refreshSubViews=function(){this._refreshContexts(l)};q(Eg.prototype,"refreshSubViews",Eg.prototype.refreshSubViews);
Eg.prototype._refreshContexts=function(a){var b=this.getContextRegistry();if(b){var c=this.getContext(),d=this.collectSubViewsDiffs();if(a)d.added=[],d.removed=this.getView().getViews();jQuery.each(d.removed,function(a,c){b.removeContext(c)});jQuery.each(d.added,function(a,d){b.addContext(d,k,c)})}};function ib(a,b,c,d){a||e(new TypeError("Constructor name required"));c&&!d&&e(new TypeError("Resource loader required"));this._ctorName=a;this._ctorArgs=b||[];this._scriptURL=c?c:k;this._loader=c?d:k;this._loadPromise=k}p("wr.util.InstanceFactory",ib);ib.prototype.getConstructorName=m("_ctorName");q(ib.prototype,"getConstructorName",ib.prototype.getConstructorName);
ib.prototype.newInstance=function(){function a(){try{var a=Td(b._ctorName);"function"!==typeof a&&e(new ReferenceError("Unable to find constructor '"+b._ctorName+"'"));var f=ja(a.prototype);a.apply(f,b._ctorArgs);c.success(f)}catch(h){c.failure(h)}}var b=this,c=new Ra;if(this._scriptURL&&this._loadPromise===k)this._loadPromise=this._loader.load(this._scriptURL,"script"),this._loader=this._scriptURL=k;if(this._loadPromise!==k)this._loadPromise.onSuccess(function(){a()}).onFailure(function(a){c.failure(a)});
else a();return c.getPromise()};q(ib.prototype,"newInstance",ib.prototype.newInstance);function kb(a){this._factories=a||[]}p("wr.util.InstanceListFactory",kb);kb.prototype.getSize=function(){return this._factories.length};q(kb.prototype,"getSize",kb.prototype.getSize);kb.prototype.newInstance=function(){var a=[];jQuery.each(this._factories,function(b,c){a.push(c.newInstance())});return Sa.apply(Sa,a)};q(kb.prototype,"newInstance",kb.prototype.newInstance);function V(){this._displayFactory=this._display=this._rootView=this._factoriesPromise=this._app=k;this._autoFocusFirstWindow=l}t(V,Oa);p("wr.ui.UIPlugin",V);V.prototype._log=B.getLog("wr.ui.UIPlugin");V.prototype.configure=function(a){Fg(this);this._autoFocusFirstWindow=!!a.autoFocusFirstWindow;this._factoriesPromise=Gg(this,a.factories);if(a.display)return Hg(this,a.display).chain(function(a){(a=a.getWindows()[0])&&a.open()})};q(V.prototype,"configure",V.prototype.configure);
V.prototype.start=function(){var a;if(this._autoFocusFirstWindow&&(a=this._display&&this._display.getWindows()[0]))this._log.debug("Automatically focusing the first window"),a.focus()};q(V.prototype,"start",V.prototype.start);V.prototype.dispose=function(){Fg(this)};q(V.prototype,"dispose",V.prototype.dispose);V.prototype.getViewTree=function(){this._rootView||e(new x("View tree is not available"));return this._rootView};q(V.prototype,"getViewTree",V.prototype.getViewTree);
V.prototype.configureViews=function(a,b){var c=this,d={};c._log.isDebugEnabled()&&c._log.debug("Configuring sub-views of "+a+": "+u(b));this.unconfigureViews(a,b);Ig(this,a,function(a){D(b,function(b,j){var o=Jg(c,j,b,d);a.addView(o);c._log.debug("Added view "+o+" to "+a)})})};q(V.prototype,"configureViews",V.prototype.configureViews);
V.prototype.unconfigureViews=function(a,b){var c=this;Ig(this,a,function(a){_.each(_.filter(a.getViews(),function(a){return b.hasOwnProperty(a._id)}),function(b){a.removeView(b);c._log.debug("Removed view "+b+" from "+a)})})};q(V.prototype,"unconfigureViews",V.prototype.unconfigureViews);function Ig(a,b,c){var d;b?(d=a.lookupControl(b))||e(Error("Parent control '"+b+"' not found")):d=a.getDisplay();b=d._viewer.getView();c.call(a,b);d._viewer.refreshSubViews()}
V.prototype.getDisplay=function(){this._display||e(new x("Display is not available"));return this._display};q(V.prototype,"getDisplay",V.prototype.getDisplay);V.prototype.getWindows=function(){return this.getDisplay().getControls()};q(V.prototype,"getWindows",V.prototype.getWindows);V.prototype.getMainWindow=function(){return this.getDisplay().getWindows()[0]||k};q(V.prototype,"getMainWindow",V.prototype.getMainWindow);V.prototype.getWindow=function(a){return this.getDisplay().getControl(a)};
q(V.prototype,"getWindow",V.prototype.getWindow);V.prototype.lookupControl=function(a){var b=this.getDisplay();return a===b._id?b:b.lookupControl(a)};q(V.prototype,"lookupControl",V.prototype.lookupControl);
function Hg(a,b){var c=k,c=Jg(a,"display",b,{});return a._factoriesPromise.chain(function(b){function f(a){var c=b[a._config.factory||"default"];c||e(Error("Missing factory for view "+a));return c}var h,j;h=a.getDisplayContext();j=f(c);return Va(j.create,j,c,k,h,f).chain(function(b){b instanceof Q||a._log.warn("Display factory did not provide an instance of the expected type");a._rootView=c;a._display=b;a._displayFactory=j;return b})})}
function Fg(a){if(a._display)a._displayFactory&&a._rootView?a._displayFactory.destroy(a._rootView,k,a._display):a._display.destroy(),a._displayFactory=k,a._display=k;a._rootView=k}V.prototype.getDisplayContext=function(){return GLOBAL};q(V.prototype,"getDisplayContext",V.prototype.getDisplayContext);
function Gg(a,b){var c=a.getApp().getConfigPlugin(),d=[],f=[];D(b,function(a,b){d.push(b);f.push(c.readInstanceFactory(a))});a._log.debug("Creating "+f.length+" control factories");return(new kb(f)).newInstance().chain(function(b){var c={};a._log.debug("Created "+b.length+" control factories");jQuery.each(b,function(b,f){na(f,Pa)&&f.setApp(a.getApp());c[d[b]]=f});return c})}
function Jg(a,b,c,d){var f,h=c.views;f=Kg(b,c);h&&D(h,function(b,c){var h=Jg(a,c,b,d);f.addView(h)});d[b]&&e(Error("Duplicate view id '"+b+"'"));d[b]=c;return f}function Kg(a,b){var c=/^views$/,d={};D(b,function(a,b){c.test(b)||(d[b]=a)});return new Dd(a,d)};function Lg(){this._globals={};this._active=l;this._savedGlobals=k}p("wr.util.obj.ExecutionScope",Lg);Lg.prototype.isActive=m("_active");q(Lg.prototype,"isActive",Lg.prototype.isActive);Lg.prototype.activate=function(){this._active&&e(new x("Already active"));this._active=i;var a=this._savedGlobals={};_.each(this._globals,function(b,c){a[c]=GLOBAL[c];b!==g?GLOBAL[c]=b:Sd(GLOBAL,c)})};q(Lg.prototype,"activate",Lg.prototype.activate);
Lg.prototype.deactivate=function(){this._active||e(new x("Not active"));this._active=l;var a=this._savedGlobals||{};_.each(this._globals,function(b,c,d){b=a[c];d[c]=GLOBAL[c];b!==g?GLOBAL[c]=b:Sd(GLOBAL,c)});this._savedGlobals=k};q(Lg.prototype,"deactivate",Lg.prototype.deactivate);Lg.prototype.run=function(a){if(this._active)return Mg(a);try{return this.activate(),Mg(a)}finally{this.deactivate()}};q(Lg.prototype,"run",Lg.prototype.run);
function Mg(a){var b=Ng(a),c=[];_.each(b,function(a){c.push(Object.prototype.hasOwnProperty.call(GLOBAL,a)?GLOBAL[a]:g)});return a.apply(GLOBAL,c)}Lg.prototype.getGlobal=function(a){return this._globals[""+a]};q(Lg.prototype,"getGlobal",Lg.prototype.getGlobal);Lg.prototype.setGlobal=function(a,b){var a=""+a,c=this._globals.hasOwnProperty(a);this._globals[a]=b;this._active&&this._savedGlobals&&(c||(this._savedGlobals[a]=GLOBAL[a]),GLOBAL[a]=b)};q(Lg.prototype,"setGlobal",Lg.prototype.setGlobal);
Lg.prototype.deleteGlobal=function(a){var a=""+a,b=this._globals.hasOwnProperty(a);delete this._globals[a];this._active&&this._savedGlobals&&(b||(this._savedGlobals[a]=GLOBAL[a]),Sd(GLOBAL,a))};q(Lg.prototype,"deleteGlobal",Lg.prototype.deleteGlobal);function Ng(a){return(a=/^function[^(]*\(\s*([^)]*?)\s*\)/.exec(Function.prototype.toString.call(a))[1])?a.split(/\s*,\s*/):[]};function Og(a,b){Lg.call(this);this._includeSelector=a;this._excludeSelector=b;this._combinedSelector=a+", "+b;this._elements=k}t(Og,Lg);p("internal.ui.html.ElementExecutionScope",Og);Og.prototype.activate=function(){Og._super.activate.call(this);GLOBAL.document.getElementById=jQuery.proxy(this._getElementByScopedId,this)};q(Og.prototype,"activate",Og.prototype.activate);Og.prototype.deactivate=function(){Og._super.deactivate.call(this);delete GLOBAL.document.getElementById;this._elements=k};
q(Og.prototype,"deactivate",Og.prototype.deactivate);Og.prototype._getElementByScopedId=function(a){var b=GLOBAL.document,b=(GLOBAL.HTMLDocument?GLOBAL.HTMLDocument.prototype:GLOBAL.Object.getPrototypeOf(b)).getElementById.call(b,a);if(!b)return k;var c=jQuery(b).closest(this._combinedSelector);return!c[0]||c.is(this._includeSelector)?b:jQuery(this._includeSelector).find("#"+tc(a))[0]||k};function X(a){this._id=a;this._plugins={};this._lifecycle=new G(this);this._configured=k;this._earlyConfigResult=new Ra;this._disposed=this._started=this._inited=k;var b=".wr-appui-"+tc(a);this._externalExecutionScope=jQuery(b)[0]?new Og(b,".wr-appui"):new Lg;a in X._instances&&e(new x("There is already a known application with id '"+a+"'"));X._instances[a]=this;this._log.info("Creating application '"+a+"'");this._loader=new Mc;this._lifecycle.register(this._loader);var c=this._externalExecutionScope;
_.each(Lc,function(a,b){c.setGlobal(b,a)});_.each(Pg,function(a){this.addLifecycleListener(a)},this)}p("wr.app.App",X);X.prototype._log=B.getLog("wr.App");X._instances={};function Qg(){return _.values(X._instances)}q(X,"getAll",Qg);function Rg(a){return X._instances[a]||k}q(X,"get",Rg);X.prototype.getId=m("_id");q(X.prototype,"getId",X.prototype.getId);
X.prototype.init=function(){var a=this;this._configured!==i&&e(new x("Application not configured"));this._inited!==k&&e(new x("Application already initialized or initializing"));this._inited=l;this._log.info("Application lifecycle: init");var b=Sg(this,this.getConfigPlugin()._config,l).onFailure(function(b){a._log.error("Error applying final configuration",b)}),b=b.chain(function(){return a._lifecycle.init()}).onFailure(function(b){a._log.error("Error during lifecycle init",b)});return b.onSuccess(function(){a._inited=
i})};q(X.prototype,"init",X.prototype.init);X.prototype.start=function(){var a=this;this._inited!==i&&e(new x("Application not initialized"));this._started!==k&&e(new x("Application already started or starting"));this._started=l;this._log.info("Application lifecycle: start");return this._lifecycle.start().onSuccess(function(){a._started=i;a._log.info("Application '"+a._id+"' started")}).onFailure(function(b){a._log.error("Error during lifecycle start",b)})};q(X.prototype,"start",X.prototype.start);
X.prototype.stop=function(){var a=this;this._started!==i&&e(new x("Application not started or stopping"));this._started=l;this._log.info("Application lifecycle: stop");return this._lifecycle.stop().onSuccess(function(){a._started=k;a._log.info("Application '"+a._id+"' stopped")}).onFailure(function(b){a._log.error("Error during lifecycle stop",b)})};q(X.prototype,"stop",X.prototype.stop);
X.prototype.dispose=function(){var a=this;this._started!==k&&e(new x("Application still started"));if(this._disposed!==k)return ab;this._disposed=l;var b;this._inited===k?b=ab:(this._log.info("Application lifecycle: dispose"),b=this._lifecycle.dispose().onSuccess(function(){a._disposed=i}).onFailure(function(b){a._log.error("Error during lifecycle dispose",b)}));b.onComplete(function(){delete X._instances[a._id]});return b};q(X.prototype,"dispose",X.prototype.dispose);
X.prototype.isInitialized=function(){return this._inited===i};q(X.prototype,"isInitialized",X.prototype.isInitialized);X.prototype.isStarted=function(){return this._started===i};q(X.prototype,"isStarted",X.prototype.isStarted);X.prototype.addLifecycleListener=function(a,b){this._lifecycle.addListener(a,b)};q(X.prototype,"addLifecycleListener",X.prototype.addLifecycleListener);X.prototype.removeLifecycleListener=function(a){this._lifecycle.removeListener(a)};
q(X.prototype,"removeLifecycleListener",X.prototype.removeLifecycleListener);X.prototype.getLoader=m("_loader");q(X.prototype,"getLoader",X.prototype.getLoader);
X.prototype.registerPlugin=function(a,b){la(db,b);a in this._plugins&&e(new x("Plugin already registered with id '"+a+"'"));b.getApp()&&e(new x("Plugin instance already registered with an application"));this._plugins[a]=b;b.setApp(this);this._lifecycle.register(b);try{this.handlePluginRegistration(a,b)}catch(c){b.setApp(k),this._lifecycle.unregister(b),delete this._plugins[a],e(c)}};q(X.prototype,"registerPlugin",X.prototype.registerPlugin);
X.prototype.unregisterPlugin=function(a){var b=this.getPlugin(a);this.handlePluginUnregistration(a);this._lifecycle.unregister(b);b.setApp(k);delete this._plugins[a]};q(X.prototype,"unregisterPlugin",X.prototype.unregisterPlugin);X.prototype.getPlugin=function(a,b){var c=this._plugins[a];(c=this.handlePluginLookup(a,c))||e(new x("No plugin registered with id '"+a+"'"));b&&!na(c,b)&&e(new TypeError("Plugin registered with id '"+a+"' does not implement the requested interface"));return c};
q(X.prototype,"getPlugin",X.prototype.getPlugin);X.prototype.handlePluginRegistration=function(a,b){"log"===a?na(b,Qc)||e(Error("The special log plugin must implement the interface of wr.log.LogPlugin")):"config"===a&&!na(b,C)&&e(Error("The special config plugin must be implement the interface of wr.config.ConfigPlugin"))};q(X.prototype,"handlePluginRegistration",X.prototype.handlePluginRegistration);X.prototype.handlePluginUnregistration=function(a){"log"===a&&this._log.warn("Log plugin is being unregistered: it might not be possible to continue logging on some components")};
q(X.prototype,"handlePluginUnregistration",X.prototype.handlePluginUnregistration);X.prototype.handlePluginLookup=function(a,b){if(!b&&"config"===a)b=this._bootConfigManager;return b};q(X.prototype,"handlePluginLookup",X.prototype.handlePluginLookup);q(X,"PLUGIN_LOG","log");X.prototype.getLogPlugin=function(){return this.getPlugin("log")};q(X.prototype,"getLogPlugin",X.prototype.getLogPlugin);q(X,"PLUGIN_CONFIG","config");X.prototype.getConfigPlugin=function(){return this._bootConfigManager||this.getPlugin("config")};
q(X.prototype,"getConfigPlugin",X.prototype.getConfigPlugin);
X.prototype.configure=function(a){var b=this;this._configured!==k&&e(new x("Application initial configuration already provided"));this._configured=l;this._bootConfigManager=new C;this._bootConfigManager.setApp(this);this._bootConfigManager.addHandler(new eb);this._bootConfigManager.addHandler(new gb);var c=jQuery.extend({},this.getDefaultConfig()||{},a=a||{})||{},a=Sg(this,c,i);return a=a.chain(function(){b._bootConfigManager=k;b.getConfigPlugin().merge(c);b._earlyConfigResult.success();b._earlyConfigResult=
k;b._configured=i},function(a){b._log.error("Error applying default configuration",a);b._earlyConfigResult.failure(a);return a})};q(X.prototype,"configure",X.prototype.configure);X.prototype.getDefaultConfig=function(){return Qa};q(X.prototype,"getDefaultConfig",X.prototype.getDefaultConfig);X.prototype.mergeConfig=function(a){return Tg(this,function(){return this.merge(a)})};q(X.prototype,"mergeConfig",X.prototype.mergeConfig);
X.prototype.mergeConfigFiles=function(a){var b=arguments;return Tg(this,function(){return this.mergeFiles.apply(this,b)})};q(X.prototype,"mergeConfigFiles",X.prototype.mergeConfigFiles);X.prototype.isConfigurable=function(){return this._inited===k};q(X.prototype,"isConfigurable",X.prototype.isConfigurable);
function Tg(a,b){a._inited!==k&&e(new x("Unable to modify configuration at this time"));return a._earlyConfigResult?a._earlyConfigResult.getPromise().chain(function(){return Wa(b,a.getConfigPlugin())}):Wa(b,a.getConfigPlugin())}
function Sg(a,b,c){var d=c?"Boot: ":"";if(!b)return ab;a._log.isDebugEnabled()&&a._log.debug(d+"Applying configuration: "+u(b));var f=[],h;for(h in b)b.hasOwnProperty(h)&&f.push(Ug(a,h,b[h],c));b=Sa.apply(y,f);b.onSuccess(function(){a._log.debug(d+"New configuration applied")}).onFailure(function(b){a._log.error(d+"Error applying new configuration",b)});return b}
function Ug(a,b,c,d){var f=d?"Boot: ":"";a._log.debug(f+"Applying configuration of plugin '"+b+"'");var d=a.getConfigPlugin().readInstanceFactory(c.implementation,k),h=new Ra,j=a._plugins[b];if(j){var o;try{o=Td(d._ctorName)}catch(s){o=k}o!==j.constructor?h.failure(new x("A different implementation of '"+b+"' is already registered")):h.success(j)}else a._log.debug(f+"Constructing plugin '"+b+"' with "+d._ctorName),d.newInstance().onSuccess(function(c){try{a.registerPlugin(b,c),h.success(c)}catch(d){h.failure(d)}}).onFailure(function(a){h.failure(a)});
o=h.getPromise().chain(function(d){var h=jQuery.extend({},c);delete h.implementation;a._log.isDebugEnabled()&&a._log.debug(f+"Configuring plugin '"+b+"': "+u(h));return Va(d.configure,d,h)});return o=o.onSuccess(function(){a._log.debug(f+"Applied configuration of plugin '"+b+"'")}).onFailure(function(c){a._log.error(f+"Error applying configuration of plugin '"+b+"'",c)})}var Pg=[];
q(X,"addLifecycleListener",function(a,b){a&&!_.contains(Pg,a)&&(Pg.push(a),_.each(Qg(),function(c){c.addLifecycleListener(a,b)}))});q(X,"removeLifecycleListener",function(a){if(a){var b=_.indexOf(Pg,a);0<=b&&(Pg.splice(b,1),_.each(Qg(),function(b){b.removeLifecycleListener(a)}))}});X.prototype.getExternalExecutionScope=m("_externalExecutionScope");q(X.prototype,"getExternalExecutionScope",X.prototype.getExternalExecutionScope);var Vg=k;function Jc(){var a=Vg||Rg("default");a||e(new x("Default application not available"));return a}p("wr.getApp",Jc);p("wr.runScoped",function(a,b){var c=Wg(a),d=Rg(c);d||e(Error("Application '"+c+"' not found"));return Xg(d,b)});function Ic(a){var b=Vg;return b?Yg(b._id,a):a}p("wr.keepScoped",Ic);function Yg(a,b){var c=Wg(a);return function(){var a=this,f=jQuery.makeArray(arguments),h=Rg(c);h||e(Error("Application '"+c+"' not found"));return Xg(h,function(){return b.apply(a,f)})}}
p("wr.makeScoped",Yg);function Wg(a){"string"!==typeof a&&(a=""+(jQuery(a).parents().filter(function(){return jQuery(this).data("wr-appid")}).data("wr-appid")||""));return""+(a||"default")}function Xg(a,b){var c=Vg;try{return Vg=a,a._externalExecutionScope.run(b)}finally{Vg=c}}
(function(){nc();var a=jQuery("script").filter(function(){return"wr.debug.js"===/^(.+?)(?:;jsessionid=[0-9A-Fa-f]+)?$/.exec(parseUri(jQuery(this).attr("src")).file)[1]});if(a[0]){a=parseUri(a.attr("src"));lc=jQuery.deparam.querystring(a.query);var b=parseUri(GLOBAL.location.href);kc=b.protocol+"://"+b.authority+b.directory+a.directory}a=B.getLog("wr");a.info("WebRatio Runtime (7.2.12.20160224141925, wr.debug.js)");a.info("Platform: "+oa().getInfo()||"Unknown");a.isDebugEnabled()&&(a.debug("Base path: "+
kc),a.debug("Boot parameters: "+u(lc)))})();
lc&&"true"===lc.createDocumentApp&&function(){var a=B.getLog("wr"),b=new X("default");window.onerror=function(b,c,d){a.error("Unexpected error occurred: "+b+"\n\tat <unknown>("+c+":"+d+")")};b._externalExecutionScope.activate();var c=new Ra;Lb(function(){b.configure({}).onSuccess(function(){c.success()}).onFailure(function(a){c.failure(a)})});var d=c.getPromise(),f=mc(),h=f.configFiles?f.configFiles.split(","):[];0<h.length&&(d=d.chain(function(){return b.mergeConfigFiles.apply(b,h)}));var j=new Ra;
jQuery(GLOBAL.document).ready(function(){try{nc(),j.success()}catch(b){a.error("Final environemnt check failed",b),j.failure(b)}});j.getPromise().onSuccess(function(){ld()});Sa(j.getPromise(),d).chain(function(){return Va(b.init,b)},function(b){a.error("Error during default application init",b);return b}).chain(function(){return Va(b.start,b)},function(b){a.error("Error during default application start",b);return b});jQuery(GLOBAL).one("unload",function(){ab.chain(function(){return Va(b.stop,b)},
g).chain(function(){return Va(b.dispose,b)}).onFailure(function(b){a.error("Error during default application stop and dispose",b)}).onComplete(function(){window.onerror=k})})}();function Zg(a){if(a===k)return k;"boolean"!==typeof a&&e(new TypeError("Not a boolean value"));return a?"true":"false"}p("wr.util.str.formatBoolean",Zg);function $g(a){if(a===k)return k;if("true"===a)return i;if("false"===a)return l;e(new TypeError("Invalid boolean string '"+a+"'"))}p("wr.util.str.parseBoolean",$g);function ah(a){"number"===typeof a&&0!==a%1&&e(new TypeError("Not a finite integral number"));return bh(a)}p("wr.util.str.formatInteger",ah);
function ch(a){var b=dh(a);b!==k&&0!==b%1&&e(new TypeError("Invalid integral number string '"+a+"'"));return b}p("wr.util.str.parseInteger",ch);function bh(a){if(a===k)return k;("number"!==typeof a||!isFinite(a))&&e(new TypeError("Not a finite number"));return""+a}p("wr.util.str.formatDecimal",bh);function dh(a){if(a===k)return k;var b=Number(""+a);isFinite(b)||e(new TypeError("Invalid number string '"+a+"'"));return b}p("wr.util.str.parseDecimal",dh);var eh=new XRegExp("^(?<y>\\d{4})-(?<M>\\d{2})-(?<d>\\d{2})$");
function fh(a){if(a===k)return k;a instanceof Date||e(new TypeError("Not a Date"));var b=[];b.push(""+a.getFullYear());b.push("-");b.push(_.str.lpad(""+(a.getMonth()+1),2,"0"));b.push("-");b.push(_.str.lpad(""+a.getDate(),2,"0"));return b.join("")}p("wr.util.str.formatDate",fh);function gh(a){if(a===k)return k;var b;if(b=XRegExp.exec(a,eh))return new Date(b.y,b.M-1,b.d,0,0,0,0);e(new TypeError("Invalid date string '"+a+"'"))}p("wr.util.str.parseDate",gh);var hh=new XRegExp("^(?<H>\\d{2}):(?<m>\\d{2}):(?<s>\\d{2})(?<S>\\.\\d{3})?$");
function ih(a){if(a===k)return k;a instanceof Date||e(new TypeError("Not a Date"));var b=[];b.push(_.str.lpad(""+a.getHours(),2,"0"));b.push(":");b.push(_.str.lpad(""+a.getMinutes(),2,"0"));b.push(":");b.push(_.str.lpad(""+a.getSeconds(),2,"0"));a=a.getMilliseconds();0<a&&(b.push("."),b.push(_.str.lpad(""+a,3,"0")));return b.join("")}p("wr.util.str.formatTime",ih);
function jh(a){if(a===k)return k;var b;if(b=XRegExp.exec(a,hh))return new Date(1970,0,1,b.H,b.m,b.s,b.S||"0");e(new TypeError("Invalid time string '"+a+"'"))}p("wr.util.str.parseTime",jh);function kh(a){if(a===k)return k;a instanceof Date||e(new TypeError("Not a date"));return[fh(a),ih(a)].join("T")}p("wr.util.str.formatTimestamp",kh);
function lh(a){if(a===k)return k;var b=a.split("T",2);if(2===b.length){var c=XRegExp.exec(b[0],eh),b=XRegExp.exec(b[1],hh);if(c&&b)return new Date(c.y,c.M-1,c.d,b.H,b.m,b.s,b.S||"0")}e(new TypeError("Invalid timestamp string '"+a+"'"))}p("wr.util.str.parseTimestamp",lh);function Y(a,b,c,d,f){L.call(this,a,b,c);this._idAttribute=d;this._filterSelector=f;this._selector=k}t(Y,L);p("wr.ui.html.DynamicElementsViewer",Y);
Y.prototype.setup=function(a,b){Y._super.setup.call(this,a,b);var c=this.getView()._id;this._selector="id"===this._idAttribute?"#"+tc(c):"["+tc(this._idAttribute)+"='"+uc(c)+"']";(c=this.findElements())||e(Error("No elements found for selectors "+this._selector+", "+this._filterSelector));this.validateElements(c);var c=jQuery(this.getContext()),d=c.data("__wr_ui_html_created");d?c.data("__wr_ui_html_created",d++):(this.bindListeners(c[0]),c.data("__wr_ui_html_created",1))};q(Y.prototype,"setup",Y.prototype.setup);
Y.prototype.validateElements=ba();q(Y.prototype,"validateElements",Y.prototype.validateElements);Y.prototype.destroy=function(){if(this._selector){var a=jQuery(this.getContext()),b=a.data("__wr_ui_html_created");1===b?(this.unbindListeners(a[0]),a.removeData("__wr_ui_html_created")):a.data("__wr_ui_html_created",b--);this._selector=k;Y._super.destroy.call(this)}};q(Y.prototype,"destroy",Y.prototype.destroy);
var mh={focusin:"focus",focusout:"blur",click:"click",keypress:"keypress",keydown:"keydown",keyup:"keyup"},nh=function(){var a=[];D(mh,function(b,c){a.push(c+".wr")});return a.join(" ")}();Y.prototype.bindListeners=function(a){var b=this,c=this.newListenerProxy(a,function(a){var c=mh[a.type];c&&jQuery(a.target).is(b._selector)&&b.raiseEventForHtmlEvent(c,k,a)});jQuery(a).on(nh,this._filterSelector,c)};q(Y.prototype,"bindListeners",Y.prototype.bindListeners);
Y.prototype.unbindListeners=function(a){jQuery.each(this.getListenerProxies(a),function(b,c){jQuery(a).off(nh,this._filterSelector,c)});this.destroyListenerProxies(a)};q(Y.prototype,"unbindListeners",Y.prototype.unbindListeners);var oh=new K;Y.prototype.newListenerProxy=function(a,b){function c(a){return b.call(this,a)}var d=oh.get(a);d||oh.put(a,d=new w);d.put(b,c);return c};q(Y.prototype,"newListenerProxy",Y.prototype.newListenerProxy);
Y.prototype.getListenerProxies=function(a){return(a=oh.get(a))?a.getValues():[]};q(Y.prototype,"getListenerProxies",Y.prototype.getListenerProxies);Y.prototype.destroyListenerProxies=function(a){oh.remove(a)};q(Y.prototype,"destroyListenerProxies",Y.prototype.destroyListenerProxies);Y.prototype.writeAttributes=function(a){var b=jQuery(this.findElements()),c=a&&a.visible;c!==g&&(c?b.show():b.hide());b.is(":input")&&(c=a&&a.enabled,c!==g&&b.prop("disabled",!c));Y._super.writeAttributes.call(this,a)};
q(Y.prototype,"writeAttributes",Y.prototype.writeAttributes);Y.prototype.readAttributes=function(){var a=Y._super.readAttributes.call(this),b=jQuery(this.findElements());a.visible=b.is(":visible");b.is(":input")&&(a.enabled=!b.prop("disabled"));return a};q(Y.prototype,"readAttributes",Y.prototype.readAttributes);
Y.prototype.findElements=function(){this._selector||e(new x("Cannot access elements before setup"));var a=jQuery(this._selector,this.getContext());this._filterSelector&&(a=a.filter(this._filterSelector));return 0<a.length?a:k};q(Y.prototype,"findElements",Y.prototype.findElements);function ph(a,b){Y.call(this,a,b,l,"id","a")}t(ph,Y);p("wr.ui.html.DynamicAnchorViewer",ph);function qh(a,b){Y.call(this,a,b,l,"name",":button, :submit")}t(qh,Y);p("wr.ui.html.DynamicButtonViewer",qh);function Z(a,b,c,d){Y.call(this,a,b,l,"name",c);this._supportsOptions=d;this._valueType=k}t(Z,Y);p("wr.ui.html.DynamicFieldViewer",Z);Z.prototype.setup=function(a,b){a.valueType||e(Error("Value type not specified"));this._valueType=a.valueType;Z._super.setup.call(this,a,b)};q(Z.prototype,"setup",Z.prototype.setup);Z.prototype.getValueType=function(){this._valueType||e(new x("Cannot access value type before setup"));return this._valueType};q(Z.prototype,"getValueType",Z.prototype.getValueType);
Z.prototype.writeData=function(a){var b=this;Z._super.writeData.call(this,a);if(a){var c=this.findElements();if(c&&this._valueType){var d=a.value;if(d!==g){var f;jQuery.isArray(d)?(f=[],jQuery.each(d,function(a,c){f.push(b.formatValue(c,b._valueType))})):f=this.formatValue(d,this._valueType);this.writeRawValue(c,f)}a=a.valueOptions;if(a!==g&&this._supportsOptions){var h=[];jQuery.each(a,function(a,c){h.push(b.formatValue(c,b._valueType))});zd(this.readOptionRawValues(c),h,function(a){b.removeOptionRawValue(c,
a)},function(a){b.addOptionRawValue(c,a)})}}}};q(Z.prototype,"writeData",Z.prototype.writeData);
Z.prototype.readData=function(){var a=this,b=Z._super.readData.call(this)||{},c=this.findElements();if(c&&this._valueType){var d,f=this.readRawValue(c);jQuery.isArray(f)?(d=[],jQuery.each(f,function(b,c){d.push(a.parseValue(c,a._valueType))})):d=this.parseValue(f,this._valueType);var h;this._supportsOptions?(c=this.readOptionRawValues(c),h=[],jQuery.each(c,function(b,c){h.push(a.parseValue(c,a._valueType))})):h="boolean"===this._valueType?[l,i]:g;b.value=d;b.valueOptions=h}return b};
q(Z.prototype,"readData",Z.prototype.readData);Z.prototype.readRawValue=ha;q(Z.prototype,"readRawValue",Z.prototype.readRawValue);Z.prototype.writeRawValue=ha;q(Z.prototype,"writeRawValue",Z.prototype.writeRawValue);Z.prototype.readOptionRawValues=ha;q(Z.prototype,"readOptionRawValues",Z.prototype.readOptionRawValues);Z.prototype.addOptionRawValue=ha;q(Z.prototype,"addOptionRawValue",Z.prototype.addOptionRawValue);Z.prototype.removeOptionRawValue=ha;q(Z.prototype,"removeOptionRawValue",Z.prototype.removeOptionRawValue);
Z.prototype.parseValue=function(a,b){if(a===k)return k;var c=rh[b];if(c=c&&c.parse)return c(a);e(new ia("Value of type '"+b+"' not supported"))};q(Z.prototype,"parseValue",Z.prototype.parseValue);Z.prototype.formatValue=function(a,b){if(a===k)return k;var c=rh[b];if(c=c&&c.format)return c(a);e(new ia("Value of type '"+b+"' not supported"))};q(Z.prototype,"formatValue",Z.prototype.formatValue);var sh={format:aa(),parse:aa()},rh={};rh["boolean"]={format:Zg,parse:$g};rh.date={format:fh,parse:gh};
rh.decimal={format:bh,parse:dh};rh["float"]={format:bh,parse:dh};rh.integer={format:ah,parse:ch};rh.password=sh;rh.string=sh;rh.text=sh;rh.time={format:ih,parse:jh};rh.timestamp={format:kh,parse:lh};rh.url=sh;function th(a,b){Z.call(this,a,b,":checkbox",i)}t(th,Z);p("wr.ui.html.DynamicCheckboxViewer",th);th.prototype.validateElements=function(a){uh._super.validateElements.call(this,a);var b=this.getValueType();("blob"===b||1===a.length&&"boolean"!==b)&&e(Error("Type "+b+" not supported"))};q(th.prototype,"validateElements",th.prototype.validateElements);
th.prototype.readRawValue=function(a){a=jQuery(a);if(1===a.length)return Zg(!!a.prop("checked"));var b=[];a.filter(":checked").each(function(a,d){b.push(jQuery(d).val())});return 0<b.length?b:k};q(th.prototype,"readRawValue",th.prototype.readRawValue);
th.prototype.writeRawValue=function(a,b){var c=jQuery(a);if(1===c.length){jQuery.isArray(b)&&e(new TypeError("Value cannot be an array"));var d=$g(b)===i;c.prop("checked",d)}else{var f={};b!=k&&(jQuery.isArray(b)||e(new TypeError("Value must be an array")),jQuery.each(b,function(a,b){f[b]=(f[b]||0)+1}));c.each(function(a,b){var c=jQuery(b),d=c.val(),W=l,M=f[d];0<M&&(W=i,f[d]=M-1);c.prop("checked",W)})}};q(th.prototype,"writeRawValue",th.prototype.writeRawValue);
th.prototype.readOptionRawValues=function(a){if(1===a.length)return[Zg(l),Zg(i)];var b=[];jQuery(a).each(function(a,d){b.push(jQuery(d).val())});return b};q(th.prototype,"readOptionRawValues",th.prototype.readOptionRawValues);th.prototype.addOptionRawValue=function(a,b){1===a.length&&e(new ia);var c=jQuery(a),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};q(th.prototype,"addOptionRawValue",th.prototype.addOptionRawValue);
th.prototype.removeOptionRawValue=function(a,b){1===a.length&&e(new ia);jQuery(jQuery(a).get().reverse()).each(function(a,d){var f=jQuery(d);if(f.val()===b)return Yb(f[0]),l})};q(th.prototype,"removeOptionRawValue",th.prototype.removeOptionRawValue);function vh(a,b){Z.call(this,a,b,":file",l)}t(vh,Z);p("wr.ui.html.DynamicFileViewer",vh);vh.prototype.validateElements=function(a){vh._super.validateElements.call(this,a);a=this.getValueType();"blob"!==a&&e(Error("Type "+a+" not supported"))};q(vh.prototype,"validateElements",vh.prototype.validateElements);vh.prototype.readData=ba();q(vh.prototype,"readData",vh.prototype.readData);vh.prototype.writeData=ba();q(vh.prototype,"writeData",vh.prototype.writeData);function wh(a,b){Z.call(this,a,b,":radio",i)}t(wh,Z);p("wr.ui.html.DynamicRadioViewer",wh);wh.prototype.validateElements=function(a){wh._super.validateElements.call(this,a);var b=this.getValueType();"blob"===b&&e(Error("Type "+b+" not supported"));1>=a.length&&e(Error("At least two radio inputs are required"))};q(wh.prototype,"validateElements",wh.prototype.validateElements);wh.prototype.readRawValue=function(a){a=jQuery(a).filter(":checked");return 0<a.length?a.val():k};
q(wh.prototype,"readRawValue",wh.prototype.readRawValue);wh.prototype.writeRawValue=function(a,b){jQuery.isArray(b)&&e(new TypeError("Value cannot be an array"));var c=l;jQuery(a).each(function(a,f){var h=jQuery(f),j=l;!c&&h.val()===b&&(j=c=i);h.prop("checked",j)})};q(wh.prototype,"writeRawValue",wh.prototype.writeRawValue);wh.prototype.readOptionRawValues=function(a){var b=[];jQuery(a).each(function(a,d){b.push(jQuery(d).val())});return b};q(wh.prototype,"readOptionRawValues",wh.prototype.readOptionRawValues);
wh.prototype.addOptionRawValue=function(a,b){var c=jQuery(a),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};q(wh.prototype,"addOptionRawValue",wh.prototype.addOptionRawValue);wh.prototype.removeOptionRawValue=function(a,b){jQuery(jQuery(a).get().reverse()).each(function(a,d){var f=jQuery(d);if(f.val()===b)return Yb(f[0]),l})};q(wh.prototype,"removeOptionRawValue",wh.prototype.removeOptionRawValue);function xh(a,b){Z.call(this,a,b,"select",i)}t(xh,Z);p("wr.ui.html.DynamicSelectViewer",xh);xh.prototype.validateElements=function(a){xh._super.validateElements.call(this,a);a=this.getValueType();"blob"===a&&e(Error("Type "+a+" not supported"))};q(xh.prototype,"validateElements",xh.prototype.validateElements);xh.prototype.readRawValue=function(a){return jQuery(a).val()};q(xh.prototype,"readRawValue",xh.prototype.readRawValue);
xh.prototype.writeRawValue=function(a,b){var c=jQuery(a),d=c.attr("multiple")!==g,f={};b!=k&&(d?(jQuery.isArray(b)||e(new TypeError("Value must be an array")),jQuery.each(b,function(a,b){f[b]=(f[b]||0)+1})):(jQuery.isArray(b)&&e(new TypeError("Value cannot be an array")),f[b]=1));c.find("option").each(function(a,b){var c=jQuery(b),d=c.val(),W=l,M=f[d];0<M&&(W=i,f[d]=M-1);c.prop("selected",W)})};q(xh.prototype,"writeRawValue",xh.prototype.writeRawValue);
xh.prototype.readOptionRawValues=function(a){var b=[];jQuery(a).find("option").each(function(a,d){b.push(jQuery(d).val())});return b};q(xh.prototype,"readOptionRawValues",xh.prototype.readOptionRawValues);xh.prototype.addOptionRawValue=function(a,b){var c=jQuery(a).find("option"),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};q(xh.prototype,"addOptionRawValue",xh.prototype.addOptionRawValue);
xh.prototype.removeOptionRawValue=function(a,b){jQuery(jQuery(a).find("option").get().reverse()).each(function(a,d){var f=jQuery(d);if(f.val()===b)return Yb(f[0]),l})};q(xh.prototype,"removeOptionRawValue",xh.prototype.removeOptionRawValue);function uh(a,b){Z.call(this,a,b,":text, :password, textarea",l)}t(uh,Z);p("wr.ui.html.DynamicTextViewer",uh);uh.prototype.validateElements=function(a){uh._super.validateElements.call(this,a);a=this.getValueType();"blob"===a&&e(Error("Type "+a+" not supported"))};q(uh.prototype,"validateElements",uh.prototype.validateElements);uh.prototype.writeAttributes=function(a){var b=jQuery(this.findElements()),c=a&&a.editable;c!==g&&b.prop("readOnly",!c);uh._super.writeAttributes.call(this,a)};
q(uh.prototype,"writeAttributes",uh.prototype.writeAttributes);uh.prototype.readAttributes=function(){var a=uh._super.readAttributes.call(this),b=jQuery(this.findElements());a.editable=!b.prop("readOnly");return a};q(uh.prototype,"readAttributes",uh.prototype.readAttributes);uh.prototype.readRawValue=function(a){a=jQuery(a).val();return""===a?k:a};q(uh.prototype,"readRawValue",uh.prototype.readRawValue);
uh.prototype.writeRawValue=function(a,b){jQuery.isArray(b)&&e(new TypeError("Value cannot be an array"));jQuery(a).val(b||"")};q(uh.prototype,"writeRawValue",uh.prototype.writeRawValue);})();})(this,jQuery);